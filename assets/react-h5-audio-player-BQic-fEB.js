import{h as D,_ as S,t as y,u as M,a as O,b as u,j as l,g as ee}from"./@babel-houl6Xsg.js";import{r as C,a as d}from"./react-Bpj1It56.js";import{I as P}from"./@iconify-qjzFbtsX.js";var te=function(h){switch(h){case"stacked":return"rhap_stacked";case"stacked-reverse":return"rhap_stacked-reverse";case"horizontal":return"rhap_horizontal";case"horizontal-reverse":return"rhap_horizontal-reverse";default:return"rhap_stacked"}},K=function(h){return h instanceof MouseEvent?h.clientX:h.touches[0].clientX},J=function(h){return h>9?h.toString():"0".concat(h)},_=function(h,p,e){if(!isFinite(h))return null;var t=Math.floor(h/60),i=J(t),a=J(Math.floor(h%60)),r=J(Math.floor(t%60)),o=Math.floor(t/60),n="".concat(i,":").concat(a),s="".concat(o,":").concat(r,":").concat(a);if(e==="auto")return p>=3600?s:n;if(e==="mm:ss")return n;if(e==="hh:mm:ss")return s};function X(m,h){var p=!1;return function(e){p||(m(e),p=!0,setTimeout(function(){return p=!1},h))}}function re(m){var h=oe();return function(){var e=y(m),t;if(h){var i=y(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return M(this,t)}}function oe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var ne=function(m){D(p,m);var h=re(p);function p(){var e;O(this,p);for(var t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];return e=h.call.apply(h,[this].concat(i)),u(l(e),"audio",void 0),u(l(e),"timeOnMouseMove",0),u(l(e),"hasAddedAudioEventListener",!1),u(l(e),"downloadProgressAnimationTimer",void 0),u(l(e),"state",{isDraggingProgress:!1,currentTimePos:"0%",hasDownloadProgressAnimation:!1,downloadProgressArr:[],waitingForSeekCallback:!1}),u(l(e),"getCurrentProgress",function(r){var o=e.props,n=o.audio,s=o.progressBar,c=n.src.indexOf("blob:")!==0&&typeof e.props.srcDuration>"u";if(c&&(!n.src||!isFinite(n.currentTime)||!s.current))return{currentTime:0,currentTimePos:"0%"};var f=s.current.getBoundingClientRect(),v=f.width,w=K(r)-f.left;w<0?w=0:w>v&&(w=v);var A=e.getDuration(),g=A*w/v;return{currentTime:g,currentTimePos:"".concat((w/v*100).toFixed(2),"%")}}),u(l(e),"handleContextMenu",function(r){r.preventDefault()}),u(l(e),"handleMouseDownOrTouchStartProgressBar",function(r){r.stopPropagation();var o=e.getCurrentProgress(r.nativeEvent),n=o.currentTime,s=o.currentTimePos;isFinite(n)&&(e.timeOnMouseMove=n,e.setState({isDraggingProgress:!0,currentTimePos:s}),r.nativeEvent instanceof MouseEvent?(window.addEventListener("mousemove",e.handleWindowMouseOrTouchMove),window.addEventListener("mouseup",e.handleWindowMouseOrTouchUp)):(window.addEventListener("touchmove",e.handleWindowMouseOrTouchMove),window.addEventListener("touchend",e.handleWindowMouseOrTouchUp)))}),u(l(e),"handleWindowMouseOrTouchMove",function(r){r instanceof MouseEvent&&r.preventDefault(),r.stopPropagation();var o=window.getSelection();o&&o.type==="Range"&&o.empty();var n=e.state.isDraggingProgress;if(n){var s=e.getCurrentProgress(r),c=s.currentTime,f=s.currentTimePos;e.timeOnMouseMove=c,e.setState({currentTimePos:f})}}),u(l(e),"handleWindowMouseOrTouchUp",function(r){r.stopPropagation();var o=e.timeOnMouseMove,n=e.props,s=n.audio,c=n.onChangeCurrentTimeError,f=n.onSeek;if(f)e.setState({isDraggingProgress:!1,waitingForSeekCallback:!0},function(){f(s,o).then(function(){return e.setState({waitingForSeekCallback:!1})},function(w){throw new Error(w)})});else{var v={isDraggingProgress:!1};if(s.readyState===s.HAVE_NOTHING||s.readyState===s.HAVE_METADATA||!isFinite(o))try{s.load()}catch(w){return v.currentTimePos="0%",c&&c(w)}s.currentTime=o,e.setState(v)}r instanceof MouseEvent?(window.removeEventListener("mousemove",e.handleWindowMouseOrTouchMove),window.removeEventListener("mouseup",e.handleWindowMouseOrTouchUp)):(window.removeEventListener("touchmove",e.handleWindowMouseOrTouchMove),window.removeEventListener("touchend",e.handleWindowMouseOrTouchUp))}),u(l(e),"handleAudioTimeUpdate",X(function(r){var o=e.state.isDraggingProgress,n=r.target;if(!(o||e.state.waitingForSeekCallback===!0)){var s=n.currentTime,c=e.getDuration();e.setState({currentTimePos:"".concat((s/c*100||0).toFixed(2),"%")})}},e.props.progressUpdateInterval)),u(l(e),"handleAudioDownloadProgressUpdate",function(r){for(var o=r.target,n=e.getDuration(),s=[],c=0;c<o.buffered.length;c++){var f=o.buffered.start(c),v=o.buffered.end(c);s.push({left:"".concat(Math.round(100/n*f)||0,"%"),width:"".concat(Math.round(100/n*(v-f))||0,"%")})}clearTimeout(e.downloadProgressAnimationTimer),e.setState({downloadProgressArr:s,hasDownloadProgressAnimation:!0}),e.downloadProgressAnimationTimer=setTimeout(function(){e.setState({hasDownloadProgressAnimation:!1})},200)}),e}return S(p,[{key:"getDuration",value:function(){var t=this.props,i=t.audio,a=t.srcDuration;return typeof a>"u"?i.duration:a}},{key:"initialize",value:function(){var t=this.props.audio;t&&!this.hasAddedAudioEventListener&&(this.audio=t,this.hasAddedAudioEventListener=!0,t.addEventListener("timeupdate",this.handleAudioTimeUpdate),t.addEventListener("progress",this.handleAudioDownloadProgressUpdate))}},{key:"componentDidMount",value:function(){this.initialize()}},{key:"componentDidUpdate",value:function(){this.initialize()}},{key:"componentWillUnmount",value:function(){this.audio&&this.hasAddedAudioEventListener&&(this.audio.removeEventListener("timeupdate",this.handleAudioTimeUpdate),this.audio.removeEventListener("progress",this.handleAudioDownloadProgressUpdate)),clearTimeout(this.downloadProgressAnimationTimer)}},{key:"render",value:function(){var t=this.props,i=t.showDownloadProgress,a=t.showFilledProgress,r=t.progressBar,o=t.i18nProgressBar,n=this.state,s=n.currentTimePos,c=n.downloadProgressArr,f=n.hasDownloadProgressAnimation;return d.createElement("div",{className:"rhap_progress-container",ref:r,"aria-label":o,role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":Number(s.split("%")[0]),tabIndex:0,onMouseDown:this.handleMouseDownOrTouchStartProgressBar,onTouchStart:this.handleMouseDownOrTouchStartProgressBar,onContextMenu:this.handleContextMenu},d.createElement("div",{className:"rhap_progress-bar ".concat(i?"rhap_progress-bar-show-download":"")},d.createElement("div",{className:"rhap_progress-indicator",style:{left:s}}),a&&d.createElement("div",{className:"rhap_progress-filled",style:{width:s}}),i&&c.map(function(v,w){var A=v.left,g=v.width;return d.createElement("div",{key:w,className:"rhap_download-progress",style:{left:A,width:g,transitionDuration:f?".2s":"0s"}})})))}}]),p}(C.Component),ae=function(h,p){return d.createElement(ne,ee({},h,{progressBar:p}))};const ie=C.forwardRef(ae);function se(m){var h=ue();return function(){var e=y(m),t;if(h){var i=y(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return M(this,t)}}function ue(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var H=function(m){D(p,m);var h=se(p);function p(e){var t;O(this,p),t=h.call(this,e),u(l(t),"audio",void 0),u(l(t),"hasAddedAudioEventListener",!1),u(l(t),"state",{currentTime:t.props.defaultCurrentTime}),u(l(t),"handleAudioCurrentTimeChange",function(s){var c=s.target,f=t.props,v=f.isLeftTime,w=f.timeFormat,A=f.defaultCurrentTime;t.setState({currentTime:_(v?c.duration-c.currentTime:c.currentTime,c.duration,w)||A})}),u(l(t),"addAudioEventListeners",function(){var s=t.props.audio;s&&!t.hasAddedAudioEventListener&&(t.audio=s,t.hasAddedAudioEventListener=!0,s.addEventListener("timeupdate",t.handleAudioCurrentTimeChange),s.addEventListener("loadedmetadata",t.handleAudioCurrentTimeChange))});var i=e.audio,a=e.defaultCurrentTime,r=e.isLeftTime,o=e.timeFormat,n=a;return i&&(n=_(r?i.duration-i.currentTime:i.currentTime,i.duration,o)),t.state={currentTime:n},t}return S(p,[{key:"componentDidMount",value:function(){this.addAudioEventListeners()}},{key:"componentDidUpdate",value:function(){this.addAudioEventListeners()}},{key:"componentWillUnmount",value:function(){this.audio&&this.hasAddedAudioEventListener&&(this.audio.removeEventListener("timeupdate",this.handleAudioCurrentTimeChange),this.audio.removeEventListener("loadedmetadata",this.handleAudioCurrentTimeChange))}},{key:"render",value:function(){return this.state.currentTime}}]),p}(C.PureComponent);function le(m){var h=de();return function(){var e=y(m),t;if(h){var i=y(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return M(this,t)}}function de(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var ce=function(m){D(p,m);var h=le(p);function p(e){var t;O(this,p),t=h.call(this,e),u(l(t),"audio",void 0),u(l(t),"hasAddedAudioEventListener",!1),u(l(t),"state",{duration:t.props.audio?_(t.props.audio.duration,t.props.audio.duration,t.props.timeFormat):t.props.defaultDuration}),u(l(t),"handleAudioDurationChange",function(o){var n=o.target,s=t.props,c=s.timeFormat,f=s.defaultDuration;t.setState({duration:_(n.duration,n.duration,c)||f})}),u(l(t),"addAudioEventListeners",function(){var o=t.props.audio;o&&!t.hasAddedAudioEventListener&&(t.audio=o,t.hasAddedAudioEventListener=!0,o.addEventListener("durationchange",t.handleAudioDurationChange),o.addEventListener("abort",t.handleAudioDurationChange))});var i=e.audio,a=e.timeFormat,r=e.defaultDuration;return t.state={duration:i?_(i.duration,i.duration,a):r},t}return S(p,[{key:"componentDidMount",value:function(){this.addAudioEventListeners()}},{key:"componentDidUpdate",value:function(){this.addAudioEventListeners()}},{key:"componentWillUnmount",value:function(){this.audio&&this.hasAddedAudioEventListener&&(this.audio.removeEventListener("durationchange",this.handleAudioDurationChange),this.audio.removeEventListener("abort",this.handleAudioDurationChange))}},{key:"render",value:function(){return this.state.duration}}]),p}(C.PureComponent);function pe(m){var h=me();return function(){var e=y(m),t;if(h){var i=y(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return M(this,t)}}function me(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var he=function(m){D(p,m);var h=pe(p);function p(){var e;O(this,p);for(var t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];return e=h.call.apply(h,[this].concat(i)),u(l(e),"audio",void 0),u(l(e),"hasAddedAudioEventListener",!1),u(l(e),"volumeBar",C.createRef()),u(l(e),"volumeAnimationTimer",0),u(l(e),"lastVolume",e.props.volume),u(l(e),"state",{currentVolumePos:"".concat((e.lastVolume/1*100||0).toFixed(2),"%"),hasVolumeAnimation:!1,isDraggingVolume:!1}),u(l(e),"getCurrentVolume",function(r){var o=e.props.audio;if(!e.volumeBar.current)return{currentVolume:o.volume,currentVolumePos:e.state.currentVolumePos};var n=e.volumeBar.current.getBoundingClientRect(),s=n.width,c=K(r)-n.left,f,v;return c<0?(f=0,v="0%"):c>n.width?(f=1,v="100%"):(f=c/s,v="".concat(c/s*100,"%")),{currentVolume:f,currentVolumePos:v}}),u(l(e),"handleContextMenu",function(r){r.preventDefault()}),u(l(e),"handleClickVolumeButton",function(){var r=e.props.audio;r.volume>0?(e.lastVolume=r.volume,r.volume=0):r.volume=e.lastVolume}),u(l(e),"handleVolumnControlMouseOrTouchDown",function(r){r.stopPropagation();var o=e.props.audio,n=e.getCurrentVolume(r.nativeEvent),s=n.currentVolume,c=n.currentVolumePos;o.volume=s,e.setState({isDraggingVolume:!0,currentVolumePos:c}),r.nativeEvent instanceof MouseEvent?(window.addEventListener("mousemove",e.handleWindowMouseOrTouchMove),window.addEventListener("mouseup",e.handleWindowMouseOrTouchUp)):(window.addEventListener("touchmove",e.handleWindowMouseOrTouchMove),window.addEventListener("touchend",e.handleWindowMouseOrTouchUp))}),u(l(e),"handleWindowMouseOrTouchMove",function(r){r instanceof MouseEvent&&r.preventDefault(),r.stopPropagation();var o=e.props.audio,n=window.getSelection();n&&n.type==="Range"&&n.empty();var s=e.state.isDraggingVolume;if(s){var c=e.getCurrentVolume(r),f=c.currentVolume,v=c.currentVolumePos;o.volume=f,e.setState({currentVolumePos:v})}}),u(l(e),"handleWindowMouseOrTouchUp",function(r){r.stopPropagation(),e.setState({isDraggingVolume:!1}),r instanceof MouseEvent?(window.removeEventListener("mousemove",e.handleWindowMouseOrTouchMove),window.removeEventListener("mouseup",e.handleWindowMouseOrTouchUp)):(window.removeEventListener("touchmove",e.handleWindowMouseOrTouchMove),window.removeEventListener("touchend",e.handleWindowMouseOrTouchUp))}),u(l(e),"handleAudioVolumeChange",function(r){var o=e.state.isDraggingVolume,n=r.target,s=n.volume;(e.lastVolume>0&&s===0||e.lastVolume===0&&s>0)&&e.props.onMuteChange(),e.lastVolume=s,!o&&(e.setState({hasVolumeAnimation:!0,currentVolumePos:"".concat((s/1*100||0).toFixed(2),"%")}),clearTimeout(e.volumeAnimationTimer),e.volumeAnimationTimer=setTimeout(function(){e.setState({hasVolumeAnimation:!1})},100))}),e}return S(p,[{key:"componentDidUpdate",value:function(){var t=this.props.audio;t&&!this.hasAddedAudioEventListener&&(this.audio=t,this.hasAddedAudioEventListener=!0,t.addEventListener("volumechange",this.handleAudioVolumeChange))}},{key:"componentWillUnmount",value:function(){this.audio&&this.hasAddedAudioEventListener&&this.audio.removeEventListener("volumechange",this.handleAudioVolumeChange),clearTimeout(this.volumeAnimationTimer)}},{key:"render",value:function(){var t=this.props,i=t.audio,a=t.showFilledVolume,r=t.i18nVolumeControl,o=this.state,n=o.currentVolumePos,s=o.hasVolumeAnimation,c=i||{},f=c.volume;return d.createElement("div",{ref:this.volumeBar,onMouseDown:this.handleVolumnControlMouseOrTouchDown,onTouchStart:this.handleVolumnControlMouseOrTouchDown,onContextMenu:this.handleContextMenu,role:"progressbar","aria-label":r,"aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":Number((f*100).toFixed(0)),tabIndex:0,className:"rhap_volume-bar-area"},d.createElement("div",{className:"rhap_volume-bar"},d.createElement("div",{className:"rhap_volume-indicator",style:{left:n,transitionDuration:s?".1s":"0s"}}),a&&d.createElement("div",{className:"rhap_volume-filled",style:{width:n}})))}}]),p}(C.Component),E;(function(m){m.CURRENT_TIME="CURRENT_TIME",m.CURRENT_LEFT_TIME="CURRENT_LEFT_TIME",m.PROGRESS_BAR="PROGRESS_BAR",m.DURATION="DURATION",m.ADDITIONAL_CONTROLS="ADDITIONAL_CONTROLS",m.MAIN_CONTROLS="MAIN_CONTROLS",m.VOLUME_CONTROLS="VOLUME_CONTROLS",m.LOOP="LOOP",m.VOLUME="VOLUME"})(E||(E={}));function fe(m){var h=ve();return function(){var e=y(m),t;if(h){var i=y(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return M(this,t)}}function ve(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var ge=function(m){D(p,m);var h=fe(p);function p(){var e;O(this,p);for(var t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];return e=h.call.apply(h,[this].concat(i)),u(l(e),"audio",C.createRef()),u(l(e),"progressBar",C.createRef()),u(l(e),"container",C.createRef()),u(l(e),"lastVolume",e.props.volume),u(l(e),"listenTracker",void 0),u(l(e),"volumeAnimationTimer",void 0),u(l(e),"downloadProgressAnimationTimer",void 0),u(l(e),"togglePlay",function(r){r.stopPropagation();var o=e.audio.current;(o.paused||o.ended)&&o.src?e.playAudioPromise():o.paused||o.pause()}),u(l(e),"playAudioPromise",function(){e.audio.current.error&&e.audio.current.load();var r=e.audio.current.play();r?r.then(null).catch(function(o){var n=e.props.onPlayError;n&&n(new Error(o))}):e.forceUpdate()}),u(l(e),"isPlaying",function(){var r=e.audio.current;return r?!r.paused&&!r.ended:!1}),u(l(e),"handlePlay",function(r){e.forceUpdate(),e.props.onPlay&&e.props.onPlay(r)}),u(l(e),"handlePause",function(r){e.audio&&(e.forceUpdate(),e.props.onPause&&e.props.onPause(r))}),u(l(e),"handleEnded",function(r){e.audio&&(e.forceUpdate(),e.props.onEnded&&e.props.onEnded(r))}),u(l(e),"handleAbort",function(r){e.props.onAbort&&e.props.onAbort(r)}),u(l(e),"handleClickVolumeButton",function(){var r=e.audio.current;r.volume>0?(e.lastVolume=r.volume,r.volume=0):r.volume=e.lastVolume}),u(l(e),"handleMuteChange",function(){e.forceUpdate()}),u(l(e),"handleClickLoopButton",function(){e.audio.current.loop=!e.audio.current.loop,e.forceUpdate()}),u(l(e),"handleClickRewind",function(){var r=e.props,o=r.progressJumpSteps,n=r.progressJumpStep,s=o.backward||n;e.setJumpTime(-s)}),u(l(e),"handleClickForward",function(){var r=e.props,o=r.progressJumpSteps,n=r.progressJumpStep,s=o.forward||n;e.setJumpTime(s)}),u(l(e),"setJumpTime",function(r){var o=e.audio.current,n=o.duration,s=o.currentTime;if(o.readyState===o.HAVE_NOTHING||o.readyState===o.HAVE_METADATA||!isFinite(n)||!isFinite(s))try{o.load()}catch(f){return e.props.onChangeCurrentTimeError&&e.props.onChangeCurrentTimeError(f)}var c=s+r/1e3;c<0?(o.currentTime=0,c=0):c>n?(o.currentTime=n,c=n):o.currentTime=c}),u(l(e),"setJumpVolume",function(r){var o=e.audio.current.volume+r;o<0?o=0:o>1&&(o=1),e.audio.current.volume=o}),u(l(e),"handleKeyDown",function(r){if(e.props.hasDefaultKeyBindings)switch(r.key){case" ":(r.target===e.container.current||r.target===e.progressBar.current)&&(r.preventDefault(),e.togglePlay(r));break;case"ArrowLeft":e.handleClickRewind();break;case"ArrowRight":e.handleClickForward();break;case"ArrowUp":r.preventDefault(),e.setJumpVolume(e.props.volumeJumpStep);break;case"ArrowDown":r.preventDefault(),e.setJumpVolume(-e.props.volumeJumpStep);break;case"l":e.handleClickLoopButton();break;case"m":e.handleClickVolumeButton();break}}),u(l(e),"renderUIModules",function(r){return r.map(function(o,n){return e.renderUIModule(o,n)})}),u(l(e),"renderUIModule",function(r,o){var n=e.props,s=n.defaultCurrentTime,c=n.progressUpdateInterval,f=n.showDownloadProgress,v=n.showFilledProgress,w=n.showFilledVolume,A=n.defaultDuration,g=n.customIcons,R=n.showSkipControls,N=n.onClickPrevious,k=n.onClickNext,V=n.onChangeCurrentTimeError,b=n.showJumpControls,U=n.customAdditionalControls,j=n.customVolumeControls,Z=n.muted,B=n.timeFormat,q=n.volume,Q=n.loop,L=n.mse,T=n.i18nAriaLabels;switch(r){case E.CURRENT_TIME:return d.createElement("div",{key:o,id:"rhap_current-time",className:"rhap_time rhap_current-time"},d.createElement(H,{audio:e.audio.current,isLeftTime:!1,defaultCurrentTime:s,timeFormat:B}));case E.CURRENT_LEFT_TIME:return d.createElement("div",{key:o,id:"rhap_current-left-time",className:"rhap_time rhap_current-left-time"},d.createElement(H,{audio:e.audio.current,isLeftTime:!0,defaultCurrentTime:s,timeFormat:B}));case E.PROGRESS_BAR:return d.createElement(ie,{key:o,ref:e.progressBar,audio:e.audio.current,progressUpdateInterval:c,showDownloadProgress:f,showFilledProgress:v,onSeek:L&&L.onSeek,onChangeCurrentTimeError:V,srcDuration:L&&L.srcDuration,i18nProgressBar:T.progressControl});case E.DURATION:return d.createElement("div",{key:o,className:"rhap_time rhap_total-time"},L&&L.srcDuration?_(L.srcDuration,L.srcDuration,e.props.timeFormat):d.createElement(ce,{audio:e.audio.current,defaultDuration:A,timeFormat:B}));case E.ADDITIONAL_CONTROLS:return d.createElement("div",{key:o,className:"rhap_additional-controls"},e.renderUIModules(U));case E.MAIN_CONTROLS:{var $=e.isPlaying(),F;return $?F=g.pause?g.pause:d.createElement(P,{icon:"mdi:pause-circle"}):F=g.play?g.play:d.createElement(P,{icon:"mdi:play-circle"}),d.createElement("div",{key:o,className:"rhap_main-controls"},R&&d.createElement("button",{"aria-label":T.previous,className:"rhap_button-clear rhap_main-controls-button rhap_skip-button",type:"button",onClick:N},g.previous?g.previous:d.createElement(P,{icon:"mdi:skip-previous"})),b&&d.createElement("button",{"aria-label":T.rewind,className:"rhap_button-clear rhap_main-controls-button rhap_rewind-button",type:"button",onClick:e.handleClickRewind},g.rewind?g.rewind:d.createElement(P,{icon:"mdi:rewind"})),d.createElement("button",{"aria-label":$?T.pause:T.play,className:"rhap_button-clear rhap_main-controls-button rhap_play-pause-button",type:"button",onClick:e.togglePlay},F),b&&d.createElement("button",{"aria-label":T.forward,className:"rhap_button-clear rhap_main-controls-button rhap_forward-button",type:"button",onClick:e.handleClickForward},g.forward?g.forward:d.createElement(P,{icon:"mdi:fast-forward"})),R&&d.createElement("button",{"aria-label":T.next,className:"rhap_button-clear rhap_main-controls-button rhap_skip-button",type:"button",onClick:k},g.next?g.next:d.createElement(P,{icon:"mdi:skip-next"})))}case E.VOLUME_CONTROLS:return d.createElement("div",{key:o,className:"rhap_volume-controls"},e.renderUIModules(j));case E.LOOP:{var z=e.audio.current?e.audio.current.loop:Q,I;return z?I=g.loop?g.loop:d.createElement(P,{icon:"mdi:repeat"}):I=g.loopOff?g.loopOff:d.createElement(P,{icon:"mdi:repeat-off"}),d.createElement("button",{key:o,"aria-label":z?T.loop:T.loopOff,className:"rhap_button-clear rhap_repeat-button",type:"button",onClick:e.handleClickLoopButton},I)}case E.VOLUME:{var Y=e.audio.current||{},G=Y.volume,x=G===void 0?Z?0:q:G,W;return x?W=g.volume?g.volume:d.createElement(P,{icon:"mdi:volume-high"}):W=g.volume?g.volumeMute:d.createElement(P,{icon:"mdi:volume-mute"}),d.createElement("div",{key:o,className:"rhap_volume-container"},d.createElement("button",{"aria-label":x?T.volume:T.volumeMute,onClick:e.handleClickVolumeButton,type:"button",className:"rhap_button-clear rhap_volume-button"},W),d.createElement(he,{audio:e.audio.current,volume:x,onMuteChange:e.handleMuteChange,showFilledVolume:w,i18nVolumeControl:T.volumeControl}))}default:return C.isValidElement(r)?r.key?r:C.cloneElement(r,{key:o}):null}}),e}return S(p,[{key:"componentDidMount",value:function(){var t=this;this.forceUpdate();var i=this.audio.current;this.props.muted?i.volume=0:i.volume=this.lastVolume,i.addEventListener("error",function(a){var r=a.target;if(r.error&&r.currentTime===r.duration)return t.props.onEnded&&t.props.onEnded(a);t.props.onError&&t.props.onError(a)}),i.addEventListener("canplay",function(a){t.props.onCanPlay&&t.props.onCanPlay(a)}),i.addEventListener("canplaythrough",function(a){t.props.onCanPlayThrough&&t.props.onCanPlayThrough(a)}),i.addEventListener("play",this.handlePlay),i.addEventListener("abort",this.handleAbort),i.addEventListener("ended",this.handleEnded),i.addEventListener("playing",function(a){t.props.onPlaying&&t.props.onPlaying(a)}),i.addEventListener("seeking",function(a){t.props.onSeeking&&t.props.onSeeking(a)}),i.addEventListener("seeked",function(a){t.props.onSeeked&&t.props.onSeeked(a)}),i.addEventListener("waiting",function(a){t.props.onWaiting&&t.props.onWaiting(a)}),i.addEventListener("emptied",function(a){t.props.onEmptied&&t.props.onEmptied(a)}),i.addEventListener("stalled",function(a){t.props.onStalled&&t.props.onStalled(a)}),i.addEventListener("suspend",function(a){t.props.onSuspend&&t.props.onSuspend(a)}),i.addEventListener("loadstart",function(a){t.props.onLoadStart&&t.props.onLoadStart(a)}),i.addEventListener("loadedmetadata",function(a){t.props.onLoadedMetaData&&t.props.onLoadedMetaData(a)}),i.addEventListener("loadeddata",function(a){t.props.onLoadedData&&t.props.onLoadedData(a)}),i.addEventListener("pause",this.handlePause),i.addEventListener("timeupdate",X(function(a){t.props.onListen&&t.props.onListen(a)},this.props.listenInterval)),i.addEventListener("volumechange",function(a){t.props.onVolumeChange&&t.props.onVolumeChange(a)}),i.addEventListener("encrypted",function(a){var r=t.props.mse;r&&r.onEcrypted&&r.onEcrypted(a)})}},{key:"componentDidUpdate",value:function(t){var i=this.props,a=i.src,r=i.autoPlayAfterSrcChange;t.src!==a&&(r?this.playAudioPromise():this.forceUpdate())}},{key:"render",value:function(){var t=this.props,i=t.className,a=t.src,r=t.loop,o=t.preload,n=t.autoPlay,s=t.crossOrigin,c=t.mediaGroup,f=t.header,v=t.footer,w=t.layout,A=t.customProgressBarSection,g=t.customControlsSection,R=t.children,N=t.style,k=t.i18nAriaLabels,V=this.audio.current?this.audio.current.loop:r,b=V?"rhap_loop--on":"rhap_loop--off",U=this.isPlaying()?"rhap_play-status--playing":"rhap_play-status--paused";return d.createElement("div",{role:"group",tabIndex:0,"aria-label":k.player,className:"rhap_container ".concat(b," ").concat(U," ").concat(i),onKeyDown:this.handleKeyDown,ref:this.container,style:N},d.createElement("audio",{src:a,controls:!1,loop:V,autoPlay:n,preload:o,crossOrigin:s,mediaGroup:c,ref:this.audio},R),f&&d.createElement("div",{className:"rhap_header"},f),d.createElement("div",{className:"rhap_main ".concat(te(w))},d.createElement("div",{className:"rhap_progress-section"},this.renderUIModules(A)),d.createElement("div",{className:"rhap_controls-section"},this.renderUIModules(g))),v&&d.createElement("div",{className:"rhap_footer"},v))}}]),p}(C.Component);u(ge,"defaultProps",{autoPlay:!1,autoPlayAfterSrcChange:!0,listenInterval:1e3,progressJumpStep:5e3,progressJumpSteps:{},volumeJumpStep:.1,loop:!1,muted:!1,preload:"auto",progressUpdateInterval:20,defaultCurrentTime:"--:--",defaultDuration:"--:--",timeFormat:"auto",volume:1,className:"",showJumpControls:!0,showSkipControls:!1,showDownloadProgress:!0,showFilledProgress:!0,showFilledVolume:!1,customIcons:{},customProgressBarSection:[E.CURRENT_TIME,E.PROGRESS_BAR,E.DURATION],customControlsSection:[E.ADDITIONAL_CONTROLS,E.MAIN_CONTROLS,E.VOLUME_CONTROLS],customAdditionalControls:[E.LOOP],customVolumeControls:[E.VOLUME],layout:"stacked",hasDefaultKeyBindings:!0,i18nAriaLabels:{player:"Audio player",progressControl:"Audio progress control",volumeControl:"Volume control",play:"Play",pause:"Pause",rewind:"Rewind",forward:"Forward",previous:"Previous",next:"Skip",loop:"Disable loop",loopOff:"Enable loop",volume:"Mute",volumeMute:"Unmute"}});export{ge as H};
