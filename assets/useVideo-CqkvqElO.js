import{r as u,j as a}from"./react-Bpj1It56.js";import{l as x,d as f,h as p}from"./main-hZYZiN6R.js";import{L as v,g as y}from"./@tanstack-BQ3PdJvV.js";import{u as w}from"./react-scroll-to-bottom-CTjbJ2mK.js";import{f as b,g as j,s as I,v as _}from"./@heroui-CIH5ufY4.js";import{a as S}from"./axios-DXsv3KKR.js";function U({id:r,item:n,isLoading:l}){const c=n.link||"",s=m(c);function m(t){if(t.includes("youtube.com")||t.includes("youtu.be")){const e=d(t);return e?`https://img.youtube.com/vi/${e}/hqdefault.jpg`:""}else if(t.includes("drive.google.com")){const e=i(t);return e!==""?`https://lh3.googleusercontent.com/d/${e}=s320?authuser=0`:`https://lh3.googleusercontent.com/d/${e}=s320?authuser=0`}return""}function d(t){const e=/(?:youtu\.be\/|youtube\.com\/(?:.*v=|.*\/|.*embed\/|.*shorts\/))([\w-]+)/,o=t.match(e);return o?o[1]:null}function i(t){const e=/(?:drive\.google\.com\/(?:.*\/d\/|file\/d\/))([a-zA-Z0-9_-]+)/,o=t.match(e);return o?o[1]:null}return u.useEffect(()=>{const t=document.createElement("img");t.src=`${s}`},[r]),u.useEffect(()=>{x.setTitle(n.ຊື່ພຣະສູດ)},[n.ຊື່ພຣະສູດ]),a.jsxs(v,{to:`/video/view/${r}`,className:"z-10 flex flex-col justify-between items-center cursor-pointer",onClick:()=>{w()},children:[a.jsx(b,{isHoverable:!0,isFooterBlurred:!0,className:"w-[165px] sm:w-[190px] md:w-[200px] lg:w-[272px] h-[205px] sm:h-[205px] md:h-[255px] lg:h-[305px] flex-shrink-0 mx-2 shadow-xl hover:shadow-3xl transition-transform duration-300 transform hover:-translate-y-2",style:{marginBottom:"-1.2rem",boxShadow:`
            0 10px 15px -3px rgba(0, 0, 0, 0.2), 
            0 4px 6px -2px rgba(0, 0, 0, 0.1),
            inset 0 -3px 6px rgba(0, 0, 0, 0.2)`,backgroundColor:"transparent",borderRadius:"0"},children:a.jsxs(j,{className:"overflow-hidden p-0 relative flex flex-col",style:{borderRadius:"0"},children:[a.jsx("div",{className:"hidden sm:block flex-grow",style:{marginTop:"2.5rem"},children:a.jsx("p",{className:"text-white text-center text-sm line-clamp-2 overflow-hidden",children:n.ຊື່ພຣະສູດ})}),a.jsx("div",{className:"block sm:hidden",style:{marginTop:"2.5rem"},children:a.jsx("p",{className:"text-white text-center text-sm line-clamp-2 overflow-hidden",children:n.ຊື່ພຣະສູດ})}),l&&a.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-200",children:a.jsx(I,{size:"sm"})}),a.jsx(_,{removeWrapper:!0,loading:"lazy",shadow:"lg",radius:"none",alt:n.ຊື່ພຣະສູດ,src:s,style:{marginTop:"0.4rem",borderRadius:"0"},className:`z-0 object-fill transition-opacity duration-300 ${l?"opacity-0":"opacity-100"} 
            h-[145px] sm:h-[160px] md:h-[180px] lg:h-[230px]`})]})}),a.jsx("div",{className:"w-[90%] h-4 mt-[-1.5rem] bg-gray-900 opacity-25 blur-md"})]})}var A={SUTRA_API_URL:"https://sheets.googleapis.com/v4/spreadsheets/1mKtgmZ_Is4e6P3P5lvOwIplqx7VQ3amicgienGN9zwA/values/Sheet1!1:1000000?key=AIzaSyDFjIl-SEHUsgK0sjMm7x0awpf8tTEPQjs",BOOK_API_URL:"https://sheets.googleapis.com/v4/spreadsheets/1mKtgmZ_Is4e6P3P5lvOwIplqx7VQ3amicgienGN9zwA/values/books!1:1000000?key=AIzaSyDFjIl-SEHUsgK0sjMm7x0awpf8tTEPQjs",VIDEO_API_URL:"https://sheets.googleapis.com/v4/spreadsheets/1mKtgmZ_Is4e6P3P5lvOwIplqx7VQ3amicgienGN9zwA/values/video!1:1000000?key=AIzaSyDFjIl-SEHUsgK0sjMm7x0awpf8tTEPQjs",CALENDAR_API_URL:"https://sheets.googleapis.com/v4/spreadsheets/1mKtgmZ_Is4e6P3P5lvOwIplqx7VQ3amicgienGN9zwA/values/calendar!1:1000000?key=AIzaSyDFjIl-SEHUsgK0sjMm7x0awpf8tTEPQjs",SITE_URL:"https://buddhaword.net"};const T=async()=>{const r=await S.get(`${A.VIDEO_API_URL}`);return(c=>{const[s,...m]=c.values;return m.map(d=>{const i={};return s.forEach((t,e)=>{i[t]=d[e]||""}),i})})(r.data)},R=()=>{const{searchTerm:r,setSearchTerm:n}=f(),[l,c]=u.useState(null),{data:s,isLoading:m,refetch:d}=y({queryKey:["video",r,l],queryFn:async()=>T(),staleTime:p(navigator.onLine),gcTime:p(navigator.onLine),enabled:navigator.onLine}),i=u.useMemo(()=>{if(!s)return[];const e=typeof r=="string"?r.toLowerCase():"";return s.filter(o=>{const h=!l||o.ໝວດທັມ===l,g=!e||[o.ຊື່ພຣະສູດ,o.ພຣະສູດ,o.ໝວດທັມ].join(" ").toLowerCase().includes(e);return h&&g})},[s,r,l]),t=Array.from(new Set(s==null?void 0:s.map(e=>e.ໝວດທັມ).filter(Boolean)));return{data:i,isLoading:m,refetch:d,searchTerm:r,setSearchTerm:n,selectedCategory:l,setSelectedCategory:c,uniqueCategories:t}};export{U as V,R as u};
