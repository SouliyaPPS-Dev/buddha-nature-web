import{r as a,j as t}from"./react-Bpj1It56.js";import{A as Y,F as Z}from"./FavoriteButton-CisfVuQu.js";import{u as ee,c as te,d as oe,e as re,f as ne}from"./main-hZYZiN6R.js";import{n as se}from"./@tanstack-BQ3PdJvV.js";import{p as ie}from"./dompurify-CocPUCx9.js";import{H as N}from"./react-highlight-words-yh67jzXc.js";import{H as E}from"./react-html-parser-Bzk_WztA.js";import"./htmlparser2-QVUjCeQB.js";import{c as ae,d as ce,e as le,f as pe,g as ue,b as me,h as de}from"./react-icons-C88MKWVs.js";import{e as ge}from"./framer-motion-BfgC9wdC.js";import"./@babel-houl6Xsg.js";import"./core-js-pure-evcE_T-D.js";import"./react-h5-audio-player-BQic-fEB.js";import"./@iconify-qjzFbtsX.js";import"./react-dom-By78mrQC.js";import"./scheduler-8y5VlOXR.js";import"./idb-Bn1DMRyg.js";import"./react-helmet-async-BL1df5qm.js";import"./react-fast-compare-CoPa2Gs5.js";import"./invariant-BaQWlx5Y.js";import"./shallowequal-QcPrNyiR.js";import"./react-transition-group-CwkOSmso.js";import"./dom-helpers-k64VTSqm.js";import"./@heroui-CIH5ufY4.js";import"./@react-aria-xE5HBTkH.js";import"./@react-stately-BNzC-r0j.js";import"./@internationalized-C6LEMtSM.js";import"./@swc-h1AXYk7E.js";import"./clsx-B-dksMZM.js";import"./scroll-into-view-if-needed-BHvttMQE.js";import"./compute-scroll-into-view-DWa9QgjM.js";import"./tailwind-variants-wBLq28id.js";import"./tailwind-merge-CYizakiM.js";import"./react-toastify-BeNbc-FJ.js";import"./antd-Cx7N9Psy.js";import"./rc-util-BDnH4PQc.js";import"./@ant-design-AtsPa5Ww.js";import"./classnames-C0_Vbuxc.js";import"./@ctrl-DOFZgDuz.js";import"./rc-motion-BrDRrNAo.js";import"./@rc-component-DfZBjsxQ.js";import"./dayjs-DYhqyFLG.js";import"./rc-field-form-C5nkFfg4.js";import"./rc-image-CJVIC9RT.js";import"./rc-dialog-Oy9-Ncdj.js";import"./rc-pagination-BRLbcoVp.js";import"./rc-picker-oSZthl20.js";import"./smoothscroll-polyfill-DfrSojlF.js";import"./axios-DXsv3KKR.js";import"./lodash.debounce-DOTX7tph.js";import"./react-scroll-to-bottom-CTjbJ2mK.js";import"./core-js-Dho04YfF.js";import"./@emotion-CBpc3bmA.js";import"./stylis-YPZU7XtI.js";import"./math-random-BDtfBM1x.js";import"./react-big-calendar-BzSGFtnG.js";import"./uncontrollable-Dt8teSny.js";import"./react-lifecycles-compat-AfN2QaV3.js";import"./prop-types-D1h4IAre.js";import"./date-arithmetic-DrY26MJF.js";import"./lodash-Cj-1ifDK.js";import"./react-overlays-0MuLoRkH.js";import"./@restart-JGbTMMQN.js";import"./@popperjs-DMGSESOy.js";import"./warning-Dwrh-cZ9.js";import"./memoize-one-BdPwpGay.js";import"./swiper-DTw7uyIM.js";import"./tiny-invariant-CopsF_GD.js";import"./tiny-warning-Dirz_SfZ.js";import"./use-sync-external-store-Ct5KFJC2.js";import"./motion-utils-C_SlKRoS.js";import"./motion-dom-DWDx2Ux7.js";import"./entities-05SZEo_X.js";import"./inherits-BlmhoU4v.js";import"./events-CXH2uRM3.js";import"./domutils-nv7eZwOX.js";import"./dom-serializer-C1mRqh9f.js";import"./domelementtype-C_FFwB5S.js";import"./string_decoder-DSI1wpto.js";import"./safe-buffer-CMTcrbJ_.js";import"./buffer-DT9VzwNJ.js";import"./base64-js-DRz5BQNA.js";import"./ieee754-vIlwft-x.js";const xe=se("/favorites/details/$id")({component:fe});function fe(){var F,L,R,$,B;const{scrollContainerRef:P}=ee(),A=xe.useParams(),{id:c}=A,{data:n}=te(),{searchTerm:l}=oe(),{fontSize:w,setFontSize:k}=re(),[f,T]=a.useState(!1),[H,I]=a.useState(!1),u=1,[o,m]=a.useState([]),[i,b]=a.useState(0),[z,D]=a.useState(!1),j=()=>{const e=window.getSelection();D(!!(e&&e.toString().length>0))},W=n==null?void 0:n.findIndex(e=>{var r;return e.ID===((r=o==null?void 0:o[i])==null?void 0:r.ID)}),C=n==null?void 0:n.filter(e=>{const r=c?e.ID===c:!0,s=l?[e.ຊື່ພຣະສູດ,e.ພຣະສູດ,e.ໝວດທັມ].some(p=>p==null?void 0:p.toLowerCase().includes(l.toLowerCase())):!0;return r&&s}),h=a.useCallback(()=>{if(!n)return[];const e=typeof l=="string"?l.toLowerCase():"";return l?e!==""?n.filter(r=>[r.ຊື່ພຣະສູດ,r.ພຣະສູດ,r.ໝວດທັມ].join("").toLowerCase().includes(e)):n.filter(r=>{var s;return((s=r.ID)==null?void 0:s.toLowerCase())===(c==null?void 0:c.toLowerCase())}):n.filter(r=>{var s;return((s=r.ID)==null?void 0:s.toLowerCase())===(c==null?void 0:c.toLowerCase())})},[n,l]),O=a.useCallback(()=>!n||n.length===0||!o[i]?-1:n.findIndex(e=>{var r;return e.ID===((r=o[i])==null?void 0:r.ID)}),[n,o,i]),d=a.useMemo(()=>O()+1>=n.length,[O,n]),g=a.useMemo(()=>o.length<=1||f,[o,f]);a.useEffect(()=>{h().length&&m(h().slice(0,u))},[h,u]),a.useEffect(()=>{m(l===""?h().slice(0,u):h())},[l]),a.useEffect(()=>{const e=n==null?void 0:n.filter(r=>{var s;return((s=r.ID)==null?void 0:s.toLowerCase())===(c==null?void 0:c.toLowerCase())});e.length>0?m(e.slice(0,u)):m([])},[n,c]);const U=(e,r,s)=>e+r<C.length?C.slice(e+1,e+1+r):e+1<s.length?s.slice(e+1,e+1+r):l!==""?s.slice(0,r):[],S=()=>{i<o.length-1&&setTimeout(()=>{b(i+1)},600),m(e=>e.concat(U(W,u,n))),b(e=>e+u)},v=()=>{f||(T(!0),i>=1&&setTimeout(()=>{b(i-1),T(!1)},100),m(e=>e.slice(0,e.length-u)),b(e=>e-u))};a.useEffect(()=>{const e=r=>{const s=!f&&i>0&&!g;r.key==="ArrowLeft"&&s?v():r.key==="ArrowRight"&&!d&&S()};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[i,C.length,f]);const G=()=>k(e=>e<32?e+2:e),K=()=>k(e=>e>12?e-2:e),_=()=>{if(o.length){const e=o[i],r=`
      ${e.ຊື່ພຣະສູດ}
      ${e.ພຣະສູດ}
      ${e.ໝວດທັມ}
    `.replace(/<br\s*\/?>/gi,"").replace(/<\/?b>/gi,"").trim();navigator.clipboard.writeText(r).then(()=>{I(!0),setTimeout(()=>I(!1),2e3)})}},q=async()=>{var s,p;const e=(s=o==null?void 0:o[i])==null?void 0:s.ຊື່ພຣະສູດ,r=`${window.location.origin}/favorites/details/${(p=o==null?void 0:o[i])==null?void 0:p.ID}${window.location.search}`;if(navigator.share)try{await navigator.share({url:r,text:e}),console.log("Shared successfully")}catch(x){console.error("Error sharing:",x)}else alert("Sharing is not supported on this device.")},y=a.useRef(null);a.useEffect(()=>{setTimeout(()=>{document.activeElement instanceof HTMLElement&&document.activeElement.blur()},100)},[]);const M=()=>{y.current&&(y.current.style.cursor="text",y.current.blur())},J=e=>{e.preventDefault()},Q=(e,r)=>{const s=ie.sanitize(e);return t.jsx("div",{ref:y,onMouseDown:M,onTouchStart:M,onKeyDown:J,contentEditable:"true",suppressContentEditableWarning:!0,style:{fontSize:`${w}px`,cursor:"text",userSelect:"text",WebkitUserSelect:"text",touchAction:"manipulation",pointerEvents:"auto",wordBreak:"break-word",whiteSpace:"pre-wrap",outline:"none",caretColor:"black"},className:"relative p-2 rounded-md no-edit",children:r!=null&&r.trim()?s.split(new RegExp(`(${r})`,"gi")).map((p,x)=>p.toLowerCase()===r.toLowerCase()?t.jsx("span",{className:"bg-yellow-200 font-bold text-black cursor-text",style:{fontSize:`${w}px`},children:E(p)},x):t.jsx("span",{children:E(p.replace(/<br>(.*?)<\/br>/gi,"<strong>$1</strong>").replace(/\n/g,"<br />").replace(/<br\s*\/?>/gi,"<br />"))},x)):s.split(/\n|<br\s*\/?>/gi).map((p,x,X)=>t.jsxs("span",{children:[E(p.replace(/<br>(.*?)<\/br>/gi,"<strong>$1</strong>")),x!==X.length-1&&t.jsx("br",{})," "]},x))})},V=()=>t.jsxs("div",{className:"fixed bottom-0 left-0 right-0 z-10 px-4 py-4 flex justify-between items-center md:mb-[64px] mb-5 text-white",children:[t.jsx("div",{style:{flex:1,display:"flex",justifyContent:"flex-start"},children:t.jsxs("button",{onClick:v,disabled:g,style:{display:"flex",alignItems:"center",justifyContent:"center",width:"30px",height:"30px",borderRadius:"15px",border:"none",background:g?"#E0E0E0":"#8B5E3C",color:g?"#999":"#fff",cursor:g?"not-allowed":"pointer",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.15)",transition:"all 0.3s ease"},onMouseOver:e=>{g||(e.currentTarget.style.background="#704214",e.currentTarget.style.transform="scale(1.1)")},onMouseOut:e=>{g||(e.currentTarget.style.background="#8B5E3C",e.currentTarget.style.transform="scale(1)")},children:[t.jsx(ae,{size:18})," "]})}),t.jsxs("div",{style:{flex:1,display:"flex",justifyContent:"center",gap:"1rem",alignItems:"center"},children:[t.jsx("button",{onClick:K,style:{width:"32px",height:"32px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #8B5E3C, #D4A054)",border:"none",cursor:"pointer",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"},onMouseOver:e=>Object.assign(e.currentTarget.style,{transform:"scale(1.05)",boxShadow:"0 6px 8px rgba(0, 0, 0, 0.2)"}),onMouseOut:e=>Object.assign(e.currentTarget.style,{transform:"scale(1)",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"}),children:t.jsx(ce,{size:20})}),t.jsx("button",{onClick:G,style:{width:"32px",height:"32px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #5E412D, #8B5E3C)",border:"none",cursor:"pointer",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"},onMouseOver:e=>Object.assign(e.currentTarget.style,{transform:"scale(1.05)",boxShadow:"0 6px 8px rgba(0, 0, 0, 0.2)"}),onMouseOut:e=>Object.assign(e.currentTarget.style,{transform:"scale(1)",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"}),children:t.jsx(le,{size:20})}),t.jsx(Z,{currentItem:o==null?void 0:o[i]}),t.jsx("button",{onClick:_,style:{width:"32px",height:"32px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #5E412D, #8B5E3C)",border:"none",cursor:"pointer",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)",transition:"transform 0.2s ease, box-shadow 0.2s ease"},onMouseOver:e=>Object.assign(e.currentTarget.style,{transform:"scale(1.05)",boxShadow:"0 6px 8px rgba(0, 0, 0, 0.2)"}),onMouseOut:e=>Object.assign(e.currentTarget.style,{transform:"scale(1)",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"}),children:H?t.jsx(pe,{size:18,color:"green"}):t.jsx(ue,{size:18})}),t.jsx("button",{onClick:q,style:{width:"32px",height:"32px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #5E412D, #8B5E3C)",border:"none",cursor:"pointer",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"},onMouseOver:e=>Object.assign(e.currentTarget.style,{transform:"scale(1.05)",boxShadow:"0 6px 8px rgba(0, 0, 0, 0.2)"}),onMouseOut:e=>Object.assign(e.currentTarget.style,{transform:"scale(1)",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"}),children:t.jsx(me,{size:20})})]}),t.jsx("div",{style:{flex:1,display:"flex",justifyContent:"flex-end"},children:t.jsxs("button",{onClick:S,disabled:d,style:{display:"flex",alignItems:"center",justifyContent:"center",width:"32px",height:"32px",borderRadius:"50%",border:"none",background:d?"#E0E0E0":"#8B5E3C",color:d?"#999":"#fff",cursor:d?"not-allowed":"pointer",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.15)",transition:"all 0.3s ease"},onMouseOver:e=>{d||(e.currentTarget.style.background="#704214",e.currentTarget.style.transform="scale(1.1)")},onMouseOut:e=>{d||(e.currentTarget.style.background="#8B5E3C",e.currentTarget.style.transform="scale(1)")},children:[t.jsx(de,{size:18})," "]})})]});return t.jsxs(t.Fragment,{children:[t.jsx(ne,{title:"Favorites | ຄຳສອນພຸດທະ",description:"User favorites",url:typeof window<"u"?window.location.href:void 0,canonical:typeof window<"u"?`${window.location.origin}/favorites/details/${c}`:void 0,noIndex:!0}),t.jsx("div",{ref:P,className:"relative flex justify-center items-center mb-24 mt-4 px-3",children:(o==null?void 0:o.length)>0?t.jsx(t.Fragment,{children:t.jsx(ge.div,{className:"page cursor-text mb-8",style:{fontSize:`${w}px`,perspective:"1000px",position:"relative"},transition:{duration:.6,ease:"easeInOut"},drag:z?!1:"x",dragConstraints:{left:0,right:0},onMouseUp:j,onMouseDown:j,onTouchEnd:j,onDragEnd:(e,r)=>{z||(r.offset.x<-100?S():r.offset.x>100&&i>0&&v())},children:t.jsxs("div",{children:[t.jsx("div",{style:{textAlign:"center",marginBottom:"1rem"},children:t.jsx(N,{highlightClassName:"bg-yellow-200 font-bold",searchWords:[l||""],autoEscape:!0,textToHighlight:(F=o==null?void 0:o[i])==null?void 0:F.ຊື່ພຣະສູດ,style:{fontSize:"20px"}})}),t.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",marginBottom:"1rem"},children:((L=o==null?void 0:o[i])==null?void 0:L.ສຽງ)!=="/"&&t.jsx(Y,{audio:(R=o==null?void 0:o[i])==null?void 0:R.ສຽງ})}),Q(($=o==null?void 0:o[i])==null?void 0:$.ພຣະສູດ,l),t.jsx("br",{}),t.jsx("div",{style:{textAlign:"center",marginBottom:"1rem"},children:t.jsx(N,{highlightClassName:"bg-yellow-200 font-bold",searchWords:[l||""],autoEscape:!0,textToHighlight:(B=o==null?void 0:o[i])==null?void 0:B.ໝວດທັມ,style:{fontSize:"20px",textAlign:"center",display:"inline-block",fontStyle:"italic",color:"#888"}})})]})})}):t.jsx("div",{className:"text-center",children:"No content available"})}),V()]})}export{xe as Route};
