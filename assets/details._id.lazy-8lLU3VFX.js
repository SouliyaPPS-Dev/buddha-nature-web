import{r as l,j as o}from"./react-Bpj1It56.js";import{A as ce,F as le}from"./FavoriteButton-CisfVuQu.js";import{u as pe,a as ue,d as ge,e as me,f as de}from"./main-hZYZiN6R.js";import{n as xe}from"./@tanstack-BQ3PdJvV.js";import{p as W}from"./dompurify-CocPUCx9.js";import"./react-h5-audio-player-BQic-fEB.js";import{H as D}from"./react-highlight-words-yh67jzXc.js";import{H as O}from"./react-html-parser-Bzk_WztA.js";import"./htmlparser2-QVUjCeQB.js";import{c as he,d as fe,e as be,f as ye,g as we,b as Ce,h as G}from"./react-icons-C88MKWVs.js";import{e as je}from"./framer-motion-BfgC9wdC.js";import"./@babel-houl6Xsg.js";import"./core-js-pure-evcE_T-D.js";import"./react-dom-By78mrQC.js";import"./scheduler-8y5VlOXR.js";import"./idb-Bn1DMRyg.js";import"./react-helmet-async-BL1df5qm.js";import"./react-fast-compare-CoPa2Gs5.js";import"./invariant-BaQWlx5Y.js";import"./shallowequal-QcPrNyiR.js";import"./react-transition-group-CwkOSmso.js";import"./dom-helpers-k64VTSqm.js";import"./@heroui-CIH5ufY4.js";import"./@react-aria-xE5HBTkH.js";import"./@react-stately-BNzC-r0j.js";import"./@internationalized-C6LEMtSM.js";import"./@swc-h1AXYk7E.js";import"./clsx-B-dksMZM.js";import"./scroll-into-view-if-needed-BHvttMQE.js";import"./compute-scroll-into-view-DWa9QgjM.js";import"./tailwind-variants-wBLq28id.js";import"./tailwind-merge-CYizakiM.js";import"./react-toastify-BeNbc-FJ.js";import"./antd-Cx7N9Psy.js";import"./rc-util-BDnH4PQc.js";import"./@ant-design-AtsPa5Ww.js";import"./classnames-C0_Vbuxc.js";import"./@ctrl-DOFZgDuz.js";import"./rc-motion-BrDRrNAo.js";import"./@rc-component-DfZBjsxQ.js";import"./dayjs-DYhqyFLG.js";import"./rc-field-form-C5nkFfg4.js";import"./rc-image-CJVIC9RT.js";import"./rc-dialog-Oy9-Ncdj.js";import"./rc-pagination-BRLbcoVp.js";import"./rc-picker-oSZthl20.js";import"./smoothscroll-polyfill-DfrSojlF.js";import"./axios-DXsv3KKR.js";import"./lodash.debounce-DOTX7tph.js";import"./react-scroll-to-bottom-CTjbJ2mK.js";import"./core-js-Dho04YfF.js";import"./@emotion-CBpc3bmA.js";import"./stylis-YPZU7XtI.js";import"./math-random-BDtfBM1x.js";import"./react-big-calendar-BzSGFtnG.js";import"./uncontrollable-Dt8teSny.js";import"./react-lifecycles-compat-AfN2QaV3.js";import"./prop-types-D1h4IAre.js";import"./date-arithmetic-DrY26MJF.js";import"./lodash-Cj-1ifDK.js";import"./react-overlays-0MuLoRkH.js";import"./@restart-JGbTMMQN.js";import"./@popperjs-DMGSESOy.js";import"./warning-Dwrh-cZ9.js";import"./memoize-one-BdPwpGay.js";import"./swiper-DTw7uyIM.js";import"./tiny-invariant-CopsF_GD.js";import"./tiny-warning-Dirz_SfZ.js";import"./use-sync-external-store-Ct5KFJC2.js";import"./motion-utils-C_SlKRoS.js";import"./motion-dom-DWDx2Ux7.js";import"./entities-05SZEo_X.js";import"./inherits-BlmhoU4v.js";import"./events-CXH2uRM3.js";import"./domutils-nv7eZwOX.js";import"./dom-serializer-C1mRqh9f.js";import"./domelementtype-C_FFwB5S.js";import"./string_decoder-DSI1wpto.js";import"./safe-buffer-CMTcrbJ_.js";import"./buffer-DT9VzwNJ.js";import"./base64-js-DRz5BQNA.js";import"./ieee754-vIlwft-x.js";import"./@iconify-qjzFbtsX.js";const Se=xe("/sutra/details/$id")({component:Ee});function Ee(){var $,A,N,P,H;const{scrollContainerRef:U}=pe(),K=Se.useParams(),{id:a}=K,{data:i}=ue(),{searchTerm:c}=ge(),{fontSize:E,setFontSize:z}=me(),[m,L]=l.useState(!1),[_,M]=l.useState(!1),g=1,[t,d]=l.useState([]),[s,y]=l.useState(0),[I,J]=l.useState(!1),v=()=>{const e=window.getSelection();J(!!(e&&e.toString().length>0))},q=i==null?void 0:i.findIndex(e=>{var r;return e.ID===((r=t==null?void 0:t[s])==null?void 0:r.ID)}),T=i==null?void 0:i.filter(e=>{const r=a?e.ID===a:!0,n=c?[e.ຊື່ພຣະສູດ,e.ພຣະສູດ,e.ໝວດທັມ].some(p=>p==null?void 0:p.toLowerCase().includes(c.toLowerCase())):!0;return r&&n}),x=l.useCallback(()=>{if(!i)return[];const e=typeof c=="string"?c.toLowerCase():"";return c?e!==""?i.filter(r=>[r.ຊື່ພຣະສູດ,r.ພຣະສູດ,r.ໝວດທັມ].join("").toLowerCase().includes(e)):i.filter(r=>{var n;return((n=r.ID)==null?void 0:n.toLowerCase())===(a==null?void 0:a.toLowerCase())}):i.filter(r=>{var n;return((n=r.ID)==null?void 0:n.toLowerCase())===(a==null?void 0:a.toLowerCase())})},[i,c,a]),h=x().length<1,b=x().length<=t.length;l.useEffect(()=>{x().length&&d(x().slice(0,g))},[x,g]),l.useEffect(()=>{d(c===""?x().slice(0,g):x())},[c]),l.useEffect(()=>{const e=i==null?void 0:i.filter(r=>{var n;return((n=r.ID)==null?void 0:n.toLowerCase())===(a==null?void 0:a.toLowerCase())});e.length>0?d(e.slice(0,g)):d([])},[i,a]);const Q=(e,r,n)=>e+r<T.length?T.slice(e+1,e+1+r):e+1<n.length?n.slice(e+1,e+1+r):c!==""?n.slice(0,r):[],w=()=>{s<t.length-1&&setTimeout(()=>{y(s+1)},600),d(e=>e.concat(Q(q,g,i))),y(e=>e+g)},k=()=>{m||(L(!0),s>=1&&setTimeout(()=>{y(s-1),L(!1)},100),d(e=>e.slice(0,e.length-g)),y(e=>e-g))},C=l.useMemo(()=>t.length<=1||m,[t,m]);l.useEffect(()=>{const e=r=>{const n=!m&&s>0&&!h;r.key==="ArrowLeft"&&n?k():r.key==="ArrowRight"&&w()};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[s,T.length,m]);const V=()=>z(e=>e<32?e+2:e),X=()=>z(e=>e>12?e-2:e),Y=()=>{if(t.length){const e=t[s],r=`
      ${e.ຊື່ພຣະສູດ}
      ${e.ພຣະສູດ}
      ${e.ໝວດທັມ}
    `.replace(/<br\s*\/?>/gi,"").replace(/<\/?b>/gi,"").trim();navigator.clipboard.writeText(r).then(()=>{M(!0),setTimeout(()=>M(!1),2e3)})}},Z=async()=>{var n,p;const e=(n=t==null?void 0:t[s])==null?void 0:n.ຊື່ພຣະສູດ,r=`${window.location.origin}/sutra/details/${(p=t==null?void 0:t[s])==null?void 0:p.ID}${window.location.search}`;if(navigator.share)try{await navigator.share({url:r,text:e}),console.log("Shared successfully")}catch(f){console.error("Error sharing:",f)}else alert("Sharing is not supported on this device.")},j=l.useRef(null);l.useEffect(()=>{setTimeout(()=>{document.activeElement instanceof HTMLElement&&document.activeElement.blur()},100)},[]);const R=()=>{j.current&&(j.current.style.cursor="text",j.current.blur())},ee=e=>{e.preventDefault()},te=(e,r)=>{const n=W.sanitize(e);return o.jsx("div",{ref:j,onMouseDown:R,onTouchStart:R,onKeyDown:ee,contentEditable:"true",suppressContentEditableWarning:!0,style:{fontSize:`${E}px`,cursor:"text",userSelect:"text",WebkitUserSelect:"text",touchAction:"manipulation",pointerEvents:"auto",wordBreak:"break-word",whiteSpace:"pre-wrap",outline:"none",caretColor:"black"},className:"relative rounded-md no-edit",children:r!=null&&r.trim()?n.split(new RegExp(`(${r})`,"gi")).map((p,f)=>p.toLowerCase()===r.toLowerCase()?o.jsx("span",{className:"bg-yellow-200 font-bold text-black cursor-text",style:{fontSize:`${E}px`},children:O(p)},f):o.jsx("span",{children:O(p.replace(/<br>(.*?)<\/br>/gi,"<strong>$1</strong>").replace(/\n/g,"<br />").replace(/<br\s*\/?>/gi,"<br />"))},f)):n.split(/\n|<br\s*\/?>/gi).map((p,f,ae)=>o.jsxs("span",{children:[O(p.replace(/<br>(.*?)<\/br>/gi,"<strong>$1</strong>")),f!==ae.length-1&&o.jsx("br",{})," "]},f))})},u=t==null?void 0:t[s],S=(u==null?void 0:u.ຊື່ພຣະສູດ)||"",oe=(u==null?void 0:u.ໝວດທັມ)||"",re=(u==null?void 0:u.ພຣະສູດ)||"",B=(W.sanitize(re,{ALLOWED_TAGS:[]}).replace(/\s+/g," ").trim()||oe).slice(0,160),ne=typeof window<"u"?`${window.location.origin}/sutra/details/${a}`:void 0,F=typeof window<"u"?window.location.href:void 0,se=S?{"@context":"https://schema.org","@type":"Article",headline:S,description:B,inLanguage:"lo",mainEntityOfPage:F}:null,ie=()=>o.jsxs("div",{className:"fixed bottom-0 left-0 right-0 z-10 px-4 py-4 flex justify-between items-center md:mb-[64px] mb-5 text-white",children:[o.jsx("div",{style:{flex:1,display:"flex",justifyContent:"flex-start"},children:o.jsxs("button",{onClick:k,disabled:C,style:{display:"flex",alignItems:"center",justifyContent:"center",width:"30px",height:"30px",borderRadius:"15px",border:"none",background:C?"#E0E0E0":"#8B5E3C",color:C?"#999":"#fff",cursor:C?"not-allowed":"pointer",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.15)",transition:"all 0.3s ease"},onMouseOver:e=>{t.length>1&&!m&&(e.currentTarget.style.background="#704214",e.currentTarget.style.transform="scale(1.1)")},onMouseOut:e=>{t.length>1&&!m&&(e.currentTarget.style.background="#8B5E3C",e.currentTarget.style.transform="scale(1)")},children:[o.jsx(he,{size:18})," "]})}),o.jsxs("div",{style:{flex:1,display:"flex",justifyContent:"center",gap:"1rem",alignItems:"center"},children:[o.jsx("button",{onClick:X,style:{width:"32px",height:"32px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #8B5E3C, #D4A054)",border:"none",cursor:"pointer",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"},onMouseOver:e=>Object.assign(e.currentTarget.style,{transform:"scale(1.05)",boxShadow:"0 6px 8px rgba(0, 0, 0, 0.2)"}),onMouseOut:e=>Object.assign(e.currentTarget.style,{transform:"scale(1)",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"}),children:o.jsx(fe,{size:20})}),o.jsx("button",{onClick:V,style:{width:"32px",height:"32px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #5E412D, #8B5E3C)",border:"none",cursor:"pointer",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"},onMouseOver:e=>Object.assign(e.currentTarget.style,{transform:"scale(1.05)",boxShadow:"0 6px 8px rgba(0, 0, 0, 0.2)"}),onMouseOut:e=>Object.assign(e.currentTarget.style,{transform:"scale(1)",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"}),children:o.jsx(be,{size:20})}),o.jsx(le,{currentItem:t==null?void 0:t[s]}),o.jsx("button",{onClick:Y,style:{width:"32px",height:"32px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #5E412D, #8B5E3C)",border:"none",cursor:"pointer",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)",transition:"transform 0.2s ease, box-shadow 0.2s ease"},onMouseOver:e=>Object.assign(e.currentTarget.style,{transform:"scale(1.05)",boxShadow:"0 6px 8px rgba(0, 0, 0, 0.2)"}),onMouseOut:e=>Object.assign(e.currentTarget.style,{transform:"scale(1)",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"}),children:_?o.jsx(ye,{size:18,color:"green"}):o.jsx(we,{size:18})}),o.jsx("button",{onClick:Z,style:{width:"32px",height:"32px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #5E412D, #8B5E3C)",border:"none",cursor:"pointer",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"},onMouseOver:e=>Object.assign(e.currentTarget.style,{transform:"scale(1.05)",boxShadow:"0 6px 8px rgba(0, 0, 0, 0.2)"}),onMouseOut:e=>Object.assign(e.currentTarget.style,{transform:"scale(1)",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"}),children:o.jsx(Ce,{size:20})})]}),o.jsxs("div",{style:{flex:1,display:"flex",justifyContent:"flex-end"},children:[c===""&&o.jsxs("button",{onClick:w,disabled:h,style:{display:"flex",alignItems:"center",justifyContent:"center",width:"32px",height:"32px",borderRadius:"50%",border:"none",background:h?"#E0E0E0":"#8B5E3C",color:h?"#999":"#fff",cursor:h?"not-allowed":"pointer",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.15)",transition:"all 0.3s ease"},onMouseOver:e=>{h||(e.currentTarget.style.background="#704214",e.currentTarget.style.transform="scale(1.1)")},onMouseOut:e=>{h||(e.currentTarget.style.background="#8B5E3C",e.currentTarget.style.transform="scale(1)")},children:[o.jsx(G,{size:18})," "]}),c!==""&&o.jsxs("button",{onClick:w,disabled:b,style:{display:"flex",alignItems:"center",justifyContent:"center",width:"32px",height:"32px",borderRadius:"50%",border:"none",background:b?"#E0E0E0":"#8B5E3C",color:b?"#999":"#fff",cursor:b?"not-allowed":"pointer",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.15)",transition:"all 0.3s ease"},onMouseOver:e=>{b||(e.currentTarget.style.background="#704214",e.currentTarget.style.transform="scale(1.1)")},onMouseOut:e=>{b||(e.currentTarget.style.background="#8B5E3C",e.currentTarget.style.transform="scale(1)")},children:[o.jsx(G,{size:18})," "]})]})]});return o.jsxs(o.Fragment,{children:[o.jsx(de,{title:(S?`${S} | `:"")+"ຄຳສອນພຸດທະ",description:B,url:F,canonical:ne,type:"article",schemaJson:se}),o.jsx("section",{ref:U,className:"relative flex justify-center items-center mb-24 mt-4 px-3",children:(t==null?void 0:t.length)>0?o.jsx(o.Fragment,{children:o.jsx(je.div,{className:"page cursor-text mb-8",style:{fontSize:`${E}px`,perspective:"1000px",position:"relative"},transition:{duration:.6,ease:"easeInOut"},drag:I?!1:"x",dragConstraints:{left:0,right:0},onMouseUp:v,onMouseDown:v,onTouchEnd:v,onDragEnd:(e,r)=>{I||(r.offset.x<-100?w():r.offset.x>100&&s>0&&k())},children:o.jsxs("div",{children:[o.jsx("div",{style:{textAlign:"center",marginBottom:"1rem"},children:o.jsx(D,{highlightClassName:"bg-yellow-200 font-bold",searchWords:[c||""],autoEscape:!0,textToHighlight:($=t==null?void 0:t[s])==null?void 0:$.ຊື່ພຣະສູດ,style:{fontSize:"20px"}})}),o.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",marginBottom:"1rem"},children:((A=t==null?void 0:t[s])==null?void 0:A.ສຽງ)!=="/"&&o.jsx(ce,{audio:(N=t==null?void 0:t[s])==null?void 0:N.ສຽງ})}),te((P=t==null?void 0:t[s])==null?void 0:P.ພຣະສູດ,c),o.jsx("br",{}),o.jsx("div",{style:{textAlign:"center",marginBottom:"1rem"},children:o.jsx(D,{highlightClassName:"bg-yellow-200 font-bold",searchWords:[c||""],autoEscape:!0,textToHighlight:(H=t==null?void 0:t[s])==null?void 0:H.ໝວດທັມ,style:{fontSize:"20px",textAlign:"center",display:"inline-block",fontStyle:"italic",color:"#888"}})})]})})}):o.jsx("div",{className:"text-center",children:"No content available"})}),ie()]})}export{Se as Route};
