var gs=t=>{throw TypeError(t)};var Be=(t,s,e)=>s.has(t)||gs("Cannot "+e);var h=(t,s,e)=>(Be(t,s,"read from private field"),e?e.call(t):s.get(t)),E=(t,s,e)=>s.has(t)?gs("Cannot add the same private member more than once"):s instanceof WeakSet?s.add(t):s.set(t,e),b=(t,s,e,n)=>(Be(t,s,"write to private field"),n?n.call(t,e):s.set(t,e),e),T=(t,s,e)=>(Be(t,s,"access private method"),e);var Re=(t,s,e,n)=>({set _(r){b(t,s,r,e)},get _(){return h(t,s,n)}});import{r as S,j as R}from"./react-Bpj1It56.js";import{r as Ys}from"./react-dom-By78mrQC.js";import{i as st}from"./tiny-invariant-CopsF_GD.js";import{w as je}from"./tiny-warning-Dirz_SfZ.js";import{w as On}from"./use-sync-external-store-Ct5KFJC2.js";function We(){}function In(t,{interval:s=1e3,onError:e=We}={}){if(typeof t!="function")throw new Error("argument is not function.");let n=0,r=null,i=!1,o=!1;return async(...a)=>{if(r=a,!o){for(o=!0;i;)await new Promise(l=>setTimeout(l,s));for(;Date.now()<n;)await new Promise(l=>setTimeout(l,n-Date.now()));o=!1,i=!0;try{await t(...r)}catch(l){try{e(l)}catch{}}n=Date.now()+s,i=!1}}}var Ii=({storage:t,key:s="REACT_QUERY_OFFLINE_CACHE",throttleTime:e=1e3,serialize:n=JSON.stringify,deserialize:r=JSON.parse,retry:i})=>{if(t){const o=async a=>{try{const l=await n(a);await t.setItem(s,l);return}catch(l){return l}};return{persistClient:In(async a=>{let l=a,u=await o(l),c=0;for(;u&&l;)c++,l=await(i==null?void 0:i({persistedClient:l,error:u,errorCount:c})),l&&(u=await o(l))},{interval:e}),restoreClient:async()=>{const a=await t.getItem(s);if(a)return await r(a)},removeClient:()=>t.removeItem(s)}}return{persistClient:We,restoreClient:()=>Promise.resolve(void 0),removeClient:We}},_e=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},$t=typeof window>"u"||"Deno"in globalThis;function ht(){}function Ln(t,s){return typeof t=="function"?t(s):t}function Ge(t){return typeof t=="number"&&t>=0&&t!==1/0}function Zs(t,s){return Math.max(t+(s||0)-Date.now(),0)}function Jt(t,s){return typeof t=="function"?t(s):t}function pt(t,s){return typeof t=="function"?t(s):t}function bs(t,s){const{type:e="all",exact:n,fetchStatus:r,predicate:i,queryKey:o,stale:a}=t;if(o){if(n){if(s.queryHash!==us(o,s.options))return!1}else if(!ge(s.queryKey,o))return!1}if(e!=="all"){const l=s.isActive();if(e==="active"&&!l||e==="inactive"&&l)return!1}return!(typeof a=="boolean"&&s.isStale()!==a||r&&r!==s.state.fetchStatus||i&&!i(s))}function Ss(t,s){const{exact:e,status:n,predicate:r,mutationKey:i}=t;if(i){if(!s.options.mutationKey)return!1;if(e){if(ve(s.options.mutationKey)!==ve(i))return!1}else if(!ge(s.options.mutationKey,i))return!1}return!(n&&s.state.status!==n||r&&!r(s))}function us(t,s){return((s==null?void 0:s.queryKeyHashFn)||ve)(t)}function ve(t){return JSON.stringify(t,(s,e)=>Xe(e)?Object.keys(e).sort().reduce((n,r)=>(n[r]=e[r],n),{}):e)}function ge(t,s){return t===s?!0:typeof t!=typeof s?!1:t&&s&&typeof t=="object"&&typeof s=="object"?!Object.keys(s).some(e=>!ge(t[e],s[e])):!1}function tn(t,s){if(t===s)return t;const e=ws(t)&&ws(s);if(e||Xe(t)&&Xe(s)){const n=e?t:Object.keys(t),r=n.length,i=e?s:Object.keys(s),o=i.length,a=e?[]:{};let l=0;for(let u=0;u<o;u++){const c=e?u:i[u];(!e&&n.includes(c)||e)&&t[c]===void 0&&s[c]===void 0?(a[c]=void 0,l++):(a[c]=tn(t[c],s[c]),a[c]===t[c]&&t[c]!==void 0&&l++)}return r===o&&l===r?t:a}return s}function Je(t,s){if(!s||Object.keys(t).length!==Object.keys(s).length)return!1;for(const e in t)if(t[e]!==s[e])return!1;return!0}function ws(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Xe(t){if(!Cs(t))return!1;const s=t.constructor;if(s===void 0)return!0;const e=s.prototype;return!(!Cs(e)||!e.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function Cs(t){return Object.prototype.toString.call(t)==="[object Object]"}function Fn(t){return new Promise(s=>{setTimeout(s,t)})}function Ye(t,s,e){return typeof e.structuralSharing=="function"?e.structuralSharing(t,s):e.structuralSharing!==!1?tn(t,s):s}function Tn(t,s,e=0){const n=[...t,s];return e&&n.length>e?n.slice(1):n}function Dn(t,s,e=0){const n=[s,...t];return e&&n.length>e?n.slice(0,-1):n}var cs=Symbol();function en(t,s){return!t.queryFn&&(s!=null&&s.initialPromise)?()=>s.initialPromise:!t.queryFn||t.queryFn===cs?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var At,xt,Yt,Ks,jn=(Ks=class extends _e{constructor(){super();E(this,At);E(this,xt);E(this,Yt);b(this,Yt,s=>{if(!$t&&window.addEventListener){const e=()=>s();return window.addEventListener("visibilitychange",e,!1),()=>{window.removeEventListener("visibilitychange",e)}}})}onSubscribe(){h(this,xt)||this.setEventListener(h(this,Yt))}onUnsubscribe(){var s;this.hasListeners()||((s=h(this,xt))==null||s.call(this),b(this,xt,void 0))}setEventListener(s){var e;b(this,Yt,s),(e=h(this,xt))==null||e.call(this),b(this,xt,s(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(s){h(this,At)!==s&&(b(this,At,s),this.onFocus())}onFocus(){const s=this.isFocused();this.listeners.forEach(e=>{e(s)})}isFocused(){var s;return typeof h(this,At)=="boolean"?h(this,At):((s=globalThis.document)==null?void 0:s.visibilityState)!=="hidden"}},At=new WeakMap,xt=new WeakMap,Yt=new WeakMap,Ks),hs=new jn,Zt,Et,te,qs,kn=(qs=class extends _e{constructor(){super();E(this,Zt,!0);E(this,Et);E(this,te);b(this,te,s=>{if(!$t&&window.addEventListener){const e=()=>s(!0),n=()=>s(!1);return window.addEventListener("online",e,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",n)}}})}onSubscribe(){h(this,Et)||this.setEventListener(h(this,te))}onUnsubscribe(){var s;this.hasListeners()||((s=h(this,Et))==null||s.call(this),b(this,Et,void 0))}setEventListener(s){var e;b(this,te,s),(e=h(this,Et))==null||e.call(this),b(this,Et,s(this.setOnline.bind(this)))}setOnline(s){h(this,Zt)!==s&&(b(this,Zt,s),this.listeners.forEach(n=>{n(s)}))}isOnline(){return h(this,Zt)}},Zt=new WeakMap,Et=new WeakMap,te=new WeakMap,qs),Le=new kn;function Ze(){let t,s;const e=new Promise((r,i)=>{t=r,s=i});e.status="pending",e.catch(()=>{});function n(r){Object.assign(e,r),delete e.resolve,delete e.reject}return e.resolve=r=>{n({status:"fulfilled",value:r}),t(r)},e.reject=r=>{n({status:"rejected",reason:r}),s(r)},e}function zn(t){return Math.min(1e3*2**t,3e4)}function sn(t){return(t??"online")==="online"?Le.isOnline():!0}var nn=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function Ne(t){return t instanceof nn}function rn(t){let s=!1,e=0,n=!1,r;const i=Ze(),o=p=>{var y;n||(f(new nn(p)),(y=t.abort)==null||y.call(t))},a=()=>{s=!0},l=()=>{s=!1},u=()=>hs.isFocused()&&(t.networkMode==="always"||Le.isOnline())&&t.canRun(),c=()=>sn(t.networkMode)&&t.canRun(),d=p=>{var y;n||(n=!0,(y=t.onSuccess)==null||y.call(t,p),r==null||r(),i.resolve(p))},f=p=>{var y;n||(n=!0,(y=t.onError)==null||y.call(t,p),r==null||r(),i.reject(p))},m=()=>new Promise(p=>{var y;r=C=>{(n||u())&&p(C)},(y=t.onPause)==null||y.call(t)}).then(()=>{var p;r=void 0,n||(p=t.onContinue)==null||p.call(t)}),v=()=>{if(n)return;let p;const y=e===0?t.initialPromise:void 0;try{p=y??t.fn()}catch(C){p=Promise.reject(C)}Promise.resolve(p).then(d).catch(C=>{var z;if(n)return;const _=t.retry??($t?0:3),g=t.retryDelay??zn,P=typeof g=="function"?g(e,C):g,I=_===!0||typeof _=="number"&&e<_||typeof _=="function"&&_(e,C);if(s||!I){f(C);return}e++,(z=t.onFail)==null||z.call(t,e,C),Fn(P).then(()=>u()?void 0:m()).then(()=>{s?f(C):v()})})};return{promise:i,cancel:o,continue:()=>(r==null||r(),i),cancelRetry:a,continueRetry:l,canStart:c,start:()=>(c()?v():m().then(v),i)}}function An(){let t=[],s=0,e=a=>{a()},n=a=>{a()},r=a=>setTimeout(a,0);const i=a=>{s?t.push(a):r(()=>{e(a)})},o=()=>{const a=t;t=[],a.length&&r(()=>{n(()=>{a.forEach(l=>{e(l)})})})};return{batch:a=>{let l;s++;try{l=a()}finally{s--,s||o()}return l},batchCalls:a=>(...l)=>{i(()=>{a(...l)})},schedule:i,setNotifyFunction:a=>{e=a},setBatchNotifyFunction:a=>{n=a},setScheduler:a=>{r=a}}}var X=An(),Qt,$s,on=($s=class{constructor(){E(this,Qt)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Ge(this.gcTime)&&b(this,Qt,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??($t?1/0:5*60*1e3))}clearGcTimeout(){h(this,Qt)&&(clearTimeout(h(this,Qt)),b(this,Qt,void 0))}},Qt=new WeakMap,$s),ee,se,ct,Y,be,Ut,dt,wt,Hs,Qn=(Hs=class extends on{constructor(s){super();E(this,dt);E(this,ee);E(this,se);E(this,ct);E(this,Y);E(this,be);E(this,Ut);b(this,Ut,!1),b(this,be,s.defaultOptions),this.setOptions(s.options),this.observers=[],b(this,ct,s.cache),this.queryKey=s.queryKey,this.queryHash=s.queryHash,b(this,ee,Un(this.options)),this.state=s.state??h(this,ee),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var s;return(s=h(this,Y))==null?void 0:s.promise}setOptions(s){this.options={...h(this,be),...s},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&h(this,ct).remove(this)}setData(s,e){const n=Ye(this.state.data,s,this.options);return T(this,dt,wt).call(this,{data:n,type:"success",dataUpdatedAt:e==null?void 0:e.updatedAt,manual:e==null?void 0:e.manual}),n}setState(s,e){T(this,dt,wt).call(this,{type:"setState",state:s,setStateOptions:e})}cancel(s){var n,r;const e=(n=h(this,Y))==null?void 0:n.promise;return(r=h(this,Y))==null||r.cancel(s),e?e.then(ht).catch(ht):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(h(this,ee))}isActive(){return this.observers.some(s=>pt(s.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===cs||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(s=>s.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(s=0){return this.state.isInvalidated||this.state.data===void 0||!Zs(this.state.dataUpdatedAt,s)}onFocus(){var e;const s=this.observers.find(n=>n.shouldFetchOnWindowFocus());s==null||s.refetch({cancelRefetch:!1}),(e=h(this,Y))==null||e.continue()}onOnline(){var e;const s=this.observers.find(n=>n.shouldFetchOnReconnect());s==null||s.refetch({cancelRefetch:!1}),(e=h(this,Y))==null||e.continue()}addObserver(s){this.observers.includes(s)||(this.observers.push(s),this.clearGcTimeout(),h(this,ct).notify({type:"observerAdded",query:this,observer:s}))}removeObserver(s){this.observers.includes(s)&&(this.observers=this.observers.filter(e=>e!==s),this.observers.length||(h(this,Y)&&(h(this,Ut)?h(this,Y).cancel({revert:!0}):h(this,Y).cancelRetry()),this.scheduleGc()),h(this,ct).notify({type:"observerRemoved",query:this,observer:s}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||T(this,dt,wt).call(this,{type:"invalidate"})}fetch(s,e){var l,u,c;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(e!=null&&e.cancelRefetch))this.cancel({silent:!0});else if(h(this,Y))return h(this,Y).continueRetry(),h(this,Y).promise}if(s&&this.setOptions(s),!this.options.queryFn){const d=this.observers.find(f=>f.options.queryFn);d&&this.setOptions(d.options)}const n=new AbortController,r=d=>{Object.defineProperty(d,"signal",{enumerable:!0,get:()=>(b(this,Ut,!0),n.signal)})},i=()=>{const d=en(this.options,e),f={queryKey:this.queryKey,meta:this.meta};return r(f),b(this,Ut,!1),this.options.persister?this.options.persister(d,f,this):d(f)},o={fetchOptions:e,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:i};r(o),(l=this.options.behavior)==null||l.onFetch(o,this),b(this,se,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=o.fetchOptions)==null?void 0:u.meta))&&T(this,dt,wt).call(this,{type:"fetch",meta:(c=o.fetchOptions)==null?void 0:c.meta});const a=d=>{var f,m,v,p;Ne(d)&&d.silent||T(this,dt,wt).call(this,{type:"error",error:d}),Ne(d)||((m=(f=h(this,ct).config).onError)==null||m.call(f,d,this),(p=(v=h(this,ct).config).onSettled)==null||p.call(v,this.state.data,d,this)),this.scheduleGc()};return b(this,Y,rn({initialPromise:e==null?void 0:e.initialPromise,fn:o.fetchFn,abort:n.abort.bind(n),onSuccess:d=>{var f,m,v,p;if(d===void 0){a(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(d)}catch(y){a(y);return}(m=(f=h(this,ct).config).onSuccess)==null||m.call(f,d,this),(p=(v=h(this,ct).config).onSettled)==null||p.call(v,d,this.state.error,this),this.scheduleGc()},onError:a,onFail:(d,f)=>{T(this,dt,wt).call(this,{type:"failed",failureCount:d,error:f})},onPause:()=>{T(this,dt,wt).call(this,{type:"pause"})},onContinue:()=>{T(this,dt,wt).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0})),h(this,Y).start()}},ee=new WeakMap,se=new WeakMap,ct=new WeakMap,Y=new WeakMap,be=new WeakMap,Ut=new WeakMap,dt=new WeakSet,wt=function(s){const e=n=>{switch(s.type){case"failed":return{...n,fetchFailureCount:s.failureCount,fetchFailureReason:s.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...an(n.data,this.options),fetchMeta:s.meta??null};case"success":return{...n,data:s.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:s.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!s.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const r=s.error;return Ne(r)&&r.revert&&h(this,se)?{...h(this,se),fetchStatus:"idle"}:{...n,error:r,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:r,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...s.state}}};this.state=e(this.state),X.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),h(this,ct).notify({query:this,type:"updated",action:s})})},Hs);function an(t,s){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:sn(s.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function Un(t){const s=typeof t.initialData=="function"?t.initialData():t.initialData,e=s!==void 0,n=e?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:s,dataUpdateCount:0,dataUpdatedAt:e?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:e?"success":"pending",fetchStatus:"idle"}}var yt,Vs,Bn=(Vs=class extends _e{constructor(s={}){super();E(this,yt);this.config=s,b(this,yt,new Map)}build(s,e,n){const r=e.queryKey,i=e.queryHash??us(r,e);let o=this.get(i);return o||(o=new Qn({cache:this,queryKey:r,queryHash:i,options:s.defaultQueryOptions(e),state:n,defaultOptions:s.getQueryDefaults(r)}),this.add(o)),o}add(s){h(this,yt).has(s.queryHash)||(h(this,yt).set(s.queryHash,s),this.notify({type:"added",query:s}))}remove(s){const e=h(this,yt).get(s.queryHash);e&&(s.destroy(),e===s&&h(this,yt).delete(s.queryHash),this.notify({type:"removed",query:s}))}clear(){X.batch(()=>{this.getAll().forEach(s=>{this.remove(s)})})}get(s){return h(this,yt).get(s)}getAll(){return[...h(this,yt).values()]}find(s){const e={exact:!0,...s};return this.getAll().find(n=>bs(e,n))}findAll(s={}){const e=this.getAll();return Object.keys(s).length>0?e.filter(n=>bs(s,n)):e}notify(s){X.batch(()=>{this.listeners.forEach(e=>{e(s)})})}onFocus(){X.batch(()=>{this.getAll().forEach(s=>{s.onFocus()})})}onOnline(){X.batch(()=>{this.getAll().forEach(s=>{s.onOnline()})})}},yt=new WeakMap,Vs),vt,Z,Bt,gt,Mt,Ws,Nn=(Ws=class extends on{constructor(s){super();E(this,gt);E(this,vt);E(this,Z);E(this,Bt);this.mutationId=s.mutationId,b(this,Z,s.mutationCache),b(this,vt,[]),this.state=s.state||Kn(),this.setOptions(s.options),this.scheduleGc()}setOptions(s){this.options=s,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(s){h(this,vt).includes(s)||(h(this,vt).push(s),this.clearGcTimeout(),h(this,Z).notify({type:"observerAdded",mutation:this,observer:s}))}removeObserver(s){b(this,vt,h(this,vt).filter(e=>e!==s)),this.scheduleGc(),h(this,Z).notify({type:"observerRemoved",mutation:this,observer:s})}optionalRemove(){h(this,vt).length||(this.state.status==="pending"?this.scheduleGc():h(this,Z).remove(this))}continue(){var s;return((s=h(this,Bt))==null?void 0:s.continue())??this.execute(this.state.variables)}async execute(s){var r,i,o,a,l,u,c,d,f,m,v,p,y,C,_,g,P,I,z,L;b(this,Bt,rn({fn:()=>this.options.mutationFn?this.options.mutationFn(s):Promise.reject(new Error("No mutationFn found")),onFail:(x,w)=>{T(this,gt,Mt).call(this,{type:"failed",failureCount:x,error:w})},onPause:()=>{T(this,gt,Mt).call(this,{type:"pause"})},onContinue:()=>{T(this,gt,Mt).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>h(this,Z).canRun(this)}));const e=this.state.status==="pending",n=!h(this,Bt).canStart();try{if(!e){T(this,gt,Mt).call(this,{type:"pending",variables:s,isPaused:n}),await((i=(r=h(this,Z).config).onMutate)==null?void 0:i.call(r,s,this));const w=await((a=(o=this.options).onMutate)==null?void 0:a.call(o,s));w!==this.state.context&&T(this,gt,Mt).call(this,{type:"pending",context:w,variables:s,isPaused:n})}const x=await h(this,Bt).start();return await((u=(l=h(this,Z).config).onSuccess)==null?void 0:u.call(l,x,s,this.state.context,this)),await((d=(c=this.options).onSuccess)==null?void 0:d.call(c,x,s,this.state.context)),await((m=(f=h(this,Z).config).onSettled)==null?void 0:m.call(f,x,null,this.state.variables,this.state.context,this)),await((p=(v=this.options).onSettled)==null?void 0:p.call(v,x,null,s,this.state.context)),T(this,gt,Mt).call(this,{type:"success",data:x}),x}catch(x){try{throw await((C=(y=h(this,Z).config).onError)==null?void 0:C.call(y,x,s,this.state.context,this)),await((g=(_=this.options).onError)==null?void 0:g.call(_,x,s,this.state.context)),await((I=(P=h(this,Z).config).onSettled)==null?void 0:I.call(P,void 0,x,this.state.variables,this.state.context,this)),await((L=(z=this.options).onSettled)==null?void 0:L.call(z,void 0,x,s,this.state.context)),x}finally{T(this,gt,Mt).call(this,{type:"error",error:x})}}finally{h(this,Z).runNext(this)}}},vt=new WeakMap,Z=new WeakMap,Bt=new WeakMap,gt=new WeakSet,Mt=function(s){const e=n=>{switch(s.type){case"failed":return{...n,failureCount:s.failureCount,failureReason:s.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:s.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:s.isPaused,status:"pending",variables:s.variables,submittedAt:Date.now()};case"success":return{...n,data:s.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:s.error,failureCount:n.failureCount+1,failureReason:s.error,isPaused:!1,status:"error"}}};this.state=e(this.state),X.batch(()=>{h(this,vt).forEach(n=>{n.onMutationUpdate(s)}),h(this,Z).notify({mutation:this,type:"updated",action:s})})},Ws);function Kn(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var it,Se,Gs,qn=(Gs=class extends _e{constructor(s={}){super();E(this,it);E(this,Se);this.config=s,b(this,it,new Map),b(this,Se,Date.now())}build(s,e,n){const r=new Nn({mutationCache:this,mutationId:++Re(this,Se)._,options:s.defaultMutationOptions(e),state:n});return this.add(r),r}add(s){const e=Me(s),n=h(this,it).get(e)??[];n.push(s),h(this,it).set(e,n),this.notify({type:"added",mutation:s})}remove(s){var n;const e=Me(s);if(h(this,it).has(e)){const r=(n=h(this,it).get(e))==null?void 0:n.filter(i=>i!==s);r&&(r.length===0?h(this,it).delete(e):h(this,it).set(e,r))}this.notify({type:"removed",mutation:s})}canRun(s){var n;const e=(n=h(this,it).get(Me(s)))==null?void 0:n.find(r=>r.state.status==="pending");return!e||e===s}runNext(s){var n;const e=(n=h(this,it).get(Me(s)))==null?void 0:n.find(r=>r!==s&&r.state.isPaused);return(e==null?void 0:e.continue())??Promise.resolve()}clear(){X.batch(()=>{this.getAll().forEach(s=>{this.remove(s)})})}getAll(){return[...h(this,it).values()].flat()}find(s){const e={exact:!0,...s};return this.getAll().find(n=>Ss(e,n))}findAll(s={}){return this.getAll().filter(e=>Ss(s,e))}notify(s){X.batch(()=>{this.listeners.forEach(e=>{e(s)})})}resumePausedMutations(){const s=this.getAll().filter(e=>e.state.isPaused);return X.batch(()=>Promise.all(s.map(e=>e.continue().catch(ht))))}},it=new WeakMap,Se=new WeakMap,Gs);function Me(t){var s;return((s=t.options.scope)==null?void 0:s.id)??String(t.mutationId)}function _s(t){return{onFetch:(s,e)=>{var c,d,f,m,v;const n=s.options,r=(f=(d=(c=s.fetchOptions)==null?void 0:c.meta)==null?void 0:d.fetchMore)==null?void 0:f.direction,i=((m=s.state.data)==null?void 0:m.pages)||[],o=((v=s.state.data)==null?void 0:v.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const u=async()=>{let p=!1;const y=g=>{Object.defineProperty(g,"signal",{enumerable:!0,get:()=>(s.signal.aborted?p=!0:s.signal.addEventListener("abort",()=>{p=!0}),s.signal)})},C=en(s.options,s.fetchOptions),_=async(g,P,I)=>{if(p)return Promise.reject();if(P==null&&g.pages.length)return Promise.resolve(g);const z={queryKey:s.queryKey,pageParam:P,direction:I?"backward":"forward",meta:s.options.meta};y(z);const L=await C(z),{maxPages:x}=s.options,w=I?Dn:Tn;return{pages:w(g.pages,L,x),pageParams:w(g.pageParams,P,x)}};if(r&&i.length){const g=r==="backward",P=g?$n:Ps,I={pages:i,pageParams:o},z=P(n,I);a=await _(I,z,g)}else{const g=t??i.length;do{const P=l===0?o[0]??n.initialPageParam:Ps(n,a);if(l>0&&P==null)break;a=await _(a,P),l++}while(l<g)}return a};s.options.persister?s.fetchFn=()=>{var p,y;return(y=(p=s.options).persister)==null?void 0:y.call(p,u,{queryKey:s.queryKey,meta:s.options.meta,signal:s.signal},e)}:s.fetchFn=u}}}function Ps(t,{pages:s,pageParams:e}){const n=s.length-1;return s.length>0?t.getNextPageParam(s[n],s,e[n],e):void 0}function $n(t,{pages:s,pageParams:e}){var n;return s.length>0?(n=t.getPreviousPageParam)==null?void 0:n.call(t,s[0],s,e[0],e):void 0}var K,Ot,It,ne,re,Lt,ie,oe,Js,Li=(Js=class{constructor(t={}){E(this,K);E(this,Ot);E(this,It);E(this,ne);E(this,re);E(this,Lt);E(this,ie);E(this,oe);b(this,K,t.queryCache||new Bn),b(this,Ot,t.mutationCache||new qn),b(this,It,t.defaultOptions||{}),b(this,ne,new Map),b(this,re,new Map),b(this,Lt,0)}mount(){Re(this,Lt)._++,h(this,Lt)===1&&(b(this,ie,hs.subscribe(async t=>{t&&(await this.resumePausedMutations(),h(this,K).onFocus())})),b(this,oe,Le.subscribe(async t=>{t&&(await this.resumePausedMutations(),h(this,K).onOnline())})))}unmount(){var t,s;Re(this,Lt)._--,h(this,Lt)===0&&((t=h(this,ie))==null||t.call(this),b(this,ie,void 0),(s=h(this,oe))==null||s.call(this),b(this,oe,void 0))}isFetching(t){return h(this,K).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return h(this,Ot).findAll({...t,status:"pending"}).length}getQueryData(t){var e;const s=this.defaultQueryOptions({queryKey:t});return(e=h(this,K).get(s.queryHash))==null?void 0:e.state.data}ensureQueryData(t){const s=this.getQueryData(t.queryKey);if(s===void 0)return this.fetchQuery(t);{const e=this.defaultQueryOptions(t),n=h(this,K).build(this,e);return t.revalidateIfStale&&n.isStaleByTime(Jt(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(s)}}getQueriesData(t){return h(this,K).findAll(t).map(({queryKey:s,state:e})=>{const n=e.data;return[s,n]})}setQueryData(t,s,e){const n=this.defaultQueryOptions({queryKey:t}),r=h(this,K).get(n.queryHash),i=r==null?void 0:r.state.data,o=Ln(s,i);if(o!==void 0)return h(this,K).build(this,n).setData(o,{...e,manual:!0})}setQueriesData(t,s,e){return X.batch(()=>h(this,K).findAll(t).map(({queryKey:n})=>[n,this.setQueryData(n,s,e)]))}getQueryState(t){var e;const s=this.defaultQueryOptions({queryKey:t});return(e=h(this,K).get(s.queryHash))==null?void 0:e.state}removeQueries(t){const s=h(this,K);X.batch(()=>{s.findAll(t).forEach(e=>{s.remove(e)})})}resetQueries(t,s){const e=h(this,K),n={type:"active",...t};return X.batch(()=>(e.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries(n,s)))}cancelQueries(t={},s={}){const e={revert:!0,...s},n=X.batch(()=>h(this,K).findAll(t).map(r=>r.cancel(e)));return Promise.all(n).then(ht).catch(ht)}invalidateQueries(t={},s={}){return X.batch(()=>{if(h(this,K).findAll(t).forEach(n=>{n.invalidate()}),t.refetchType==="none")return Promise.resolve();const e={...t,type:t.refetchType??t.type??"active"};return this.refetchQueries(e,s)})}refetchQueries(t={},s){const e={...s,cancelRefetch:(s==null?void 0:s.cancelRefetch)??!0},n=X.batch(()=>h(this,K).findAll(t).filter(r=>!r.isDisabled()).map(r=>{let i=r.fetch(void 0,e);return e.throwOnError||(i=i.catch(ht)),r.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(n).then(ht)}fetchQuery(t){const s=this.defaultQueryOptions(t);s.retry===void 0&&(s.retry=!1);const e=h(this,K).build(this,s);return e.isStaleByTime(Jt(s.staleTime,e))?e.fetch(s):Promise.resolve(e.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(ht).catch(ht)}fetchInfiniteQuery(t){return t.behavior=_s(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(ht).catch(ht)}ensureInfiniteQueryData(t){return t.behavior=_s(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Le.isOnline()?h(this,Ot).resumePausedMutations():Promise.resolve()}getQueryCache(){return h(this,K)}getMutationCache(){return h(this,Ot)}getDefaultOptions(){return h(this,It)}setDefaultOptions(t){b(this,It,t)}setQueryDefaults(t,s){h(this,ne).set(ve(t),{queryKey:t,defaultOptions:s})}getQueryDefaults(t){const s=[...h(this,ne).values()];let e={};return s.forEach(n=>{ge(t,n.queryKey)&&(e={...e,...n.defaultOptions})}),e}setMutationDefaults(t,s){h(this,re).set(ve(t),{mutationKey:t,defaultOptions:s})}getMutationDefaults(t){const s=[...h(this,re).values()];let e={};return s.forEach(n=>{ge(t,n.mutationKey)&&(e={...e,...n.defaultOptions})}),e}defaultQueryOptions(t){if(t._defaulted)return t;const s={...h(this,It).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return s.queryHash||(s.queryHash=us(s.queryKey,s)),s.refetchOnReconnect===void 0&&(s.refetchOnReconnect=s.networkMode!=="always"),s.throwOnError===void 0&&(s.throwOnError=!!s.suspense),!s.networkMode&&s.persister&&(s.networkMode="offlineFirst"),s.enabled!==!0&&s.queryFn===cs&&(s.enabled=!1),s}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...h(this,It).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){h(this,K).clear(),h(this,Ot).clear()}},K=new WeakMap,Ot=new WeakMap,It=new WeakMap,ne=new WeakMap,re=new WeakMap,Lt=new WeakMap,ie=new WeakMap,oe=new WeakMap,Js),et,D,we,tt,Nt,ae,Ft,bt,Ce,le,ue,Kt,qt,Tt,ce,k,pe,ts,es,ss,ns,rs,is,os,ln,Xs,Hn=(Xs=class extends _e{constructor(s,e){super();E(this,k);E(this,et);E(this,D);E(this,we);E(this,tt);E(this,Nt);E(this,ae);E(this,Ft);E(this,bt);E(this,Ce);E(this,le);E(this,ue);E(this,Kt);E(this,qt);E(this,Tt);E(this,ce,new Set);this.options=e,b(this,et,s),b(this,bt,null),b(this,Ft,Ze()),this.options.experimental_prefetchInRender||h(this,Ft).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(e)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(h(this,D).addObserver(this),Rs(h(this,D),this.options)?T(this,k,pe).call(this):this.updateResult(),T(this,k,ns).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return as(h(this,D),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return as(h(this,D),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,T(this,k,rs).call(this),T(this,k,is).call(this),h(this,D).removeObserver(this)}setOptions(s,e){const n=this.options,r=h(this,D);if(this.options=h(this,et).defaultQueryOptions(s),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof pt(this.options.enabled,h(this,D))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");T(this,k,os).call(this),h(this,D).setOptions(this.options),n._defaulted&&!Je(this.options,n)&&h(this,et).getQueryCache().notify({type:"observerOptionsUpdated",query:h(this,D),observer:this});const i=this.hasListeners();i&&Ms(h(this,D),r,this.options,n)&&T(this,k,pe).call(this),this.updateResult(e),i&&(h(this,D)!==r||pt(this.options.enabled,h(this,D))!==pt(n.enabled,h(this,D))||Jt(this.options.staleTime,h(this,D))!==Jt(n.staleTime,h(this,D)))&&T(this,k,ts).call(this);const o=T(this,k,es).call(this);i&&(h(this,D)!==r||pt(this.options.enabled,h(this,D))!==pt(n.enabled,h(this,D))||o!==h(this,Tt))&&T(this,k,ss).call(this,o)}getOptimisticResult(s){const e=h(this,et).getQueryCache().build(h(this,et),s),n=this.createResult(e,s);return Wn(this,n)&&(b(this,tt,n),b(this,ae,this.options),b(this,Nt,h(this,D).state)),n}getCurrentResult(){return h(this,tt)}trackResult(s,e){const n={};return Object.keys(s).forEach(r=>{Object.defineProperty(n,r,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(r),e==null||e(r),s[r])})}),n}trackProp(s){h(this,ce).add(s)}getCurrentQuery(){return h(this,D)}refetch({...s}={}){return this.fetch({...s})}fetchOptimistic(s){const e=h(this,et).defaultQueryOptions(s),n=h(this,et).getQueryCache().build(h(this,et),e);return n.fetch().then(()=>this.createResult(n,e))}fetch(s){return T(this,k,pe).call(this,{...s,cancelRefetch:s.cancelRefetch??!0}).then(()=>(this.updateResult(),h(this,tt)))}createResult(s,e){var x;const n=h(this,D),r=this.options,i=h(this,tt),o=h(this,Nt),a=h(this,ae),u=s!==n?s.state:h(this,we),{state:c}=s;let d={...c},f=!1,m;if(e._optimisticResults){const w=this.hasListeners(),A=!w&&Rs(s,e),M=w&&Ms(s,n,e,r);(A||M)&&(d={...d,...an(c.data,s.options)}),e._optimisticResults==="isRestoring"&&(d.fetchStatus="idle")}let{error:v,errorUpdatedAt:p,status:y}=d;if(e.select&&d.data!==void 0)if(i&&d.data===(o==null?void 0:o.data)&&e.select===h(this,Ce))m=h(this,le);else try{b(this,Ce,e.select),m=e.select(d.data),m=Ye(i==null?void 0:i.data,m,e),b(this,le,m),b(this,bt,null)}catch(w){b(this,bt,w)}else m=d.data;if(e.placeholderData!==void 0&&m===void 0&&y==="pending"){let w;if(i!=null&&i.isPlaceholderData&&e.placeholderData===(a==null?void 0:a.placeholderData))w=i.data;else if(w=typeof e.placeholderData=="function"?e.placeholderData((x=h(this,ue))==null?void 0:x.state.data,h(this,ue)):e.placeholderData,e.select&&w!==void 0)try{w=e.select(w),b(this,bt,null)}catch(A){b(this,bt,A)}w!==void 0&&(y="success",m=Ye(i==null?void 0:i.data,w,e),f=!0)}h(this,bt)&&(v=h(this,bt),m=h(this,le),p=Date.now(),y="error");const C=d.fetchStatus==="fetching",_=y==="pending",g=y==="error",P=_&&C,I=m!==void 0,L={status:y,fetchStatus:d.fetchStatus,isPending:_,isSuccess:y==="success",isError:g,isInitialLoading:P,isLoading:P,data:m,dataUpdatedAt:d.dataUpdatedAt,error:v,errorUpdatedAt:p,failureCount:d.fetchFailureCount,failureReason:d.fetchFailureReason,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>u.dataUpdateCount||d.errorUpdateCount>u.errorUpdateCount,isFetching:C,isRefetching:C&&!_,isLoadingError:g&&!I,isPaused:d.fetchStatus==="paused",isPlaceholderData:f,isRefetchError:g&&I,isStale:ds(s,e),refetch:this.refetch,promise:h(this,Ft)};if(this.options.experimental_prefetchInRender){const w=O=>{L.status==="error"?O.reject(L.error):L.data!==void 0&&O.resolve(L.data)},A=()=>{const O=b(this,Ft,L.promise=Ze());w(O)},M=h(this,Ft);switch(M.status){case"pending":s.queryHash===n.queryHash&&w(M);break;case"fulfilled":(L.status==="error"||L.data!==M.value)&&A();break;case"rejected":(L.status!=="error"||L.error!==M.reason)&&A();break}}return L}updateResult(s){const e=h(this,tt),n=this.createResult(h(this,D),this.options);if(b(this,Nt,h(this,D).state),b(this,ae,this.options),h(this,Nt).data!==void 0&&b(this,ue,h(this,D)),Je(n,e))return;b(this,tt,n);const r={},i=()=>{if(!e)return!0;const{notifyOnChangeProps:o}=this.options,a=typeof o=="function"?o():o;if(a==="all"||!a&&!h(this,ce).size)return!0;const l=new Set(a??h(this,ce));return this.options.throwOnError&&l.add("error"),Object.keys(h(this,tt)).some(u=>{const c=u;return h(this,tt)[c]!==e[c]&&l.has(c)})};(s==null?void 0:s.listeners)!==!1&&i()&&(r.listeners=!0),T(this,k,ln).call(this,{...r,...s})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&T(this,k,ns).call(this)}},et=new WeakMap,D=new WeakMap,we=new WeakMap,tt=new WeakMap,Nt=new WeakMap,ae=new WeakMap,Ft=new WeakMap,bt=new WeakMap,Ce=new WeakMap,le=new WeakMap,ue=new WeakMap,Kt=new WeakMap,qt=new WeakMap,Tt=new WeakMap,ce=new WeakMap,k=new WeakSet,pe=function(s){T(this,k,os).call(this);let e=h(this,D).fetch(this.options,s);return s!=null&&s.throwOnError||(e=e.catch(ht)),e},ts=function(){T(this,k,rs).call(this);const s=Jt(this.options.staleTime,h(this,D));if($t||h(this,tt).isStale||!Ge(s))return;const n=Zs(h(this,tt).dataUpdatedAt,s)+1;b(this,Kt,setTimeout(()=>{h(this,tt).isStale||this.updateResult()},n))},es=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(h(this,D)):this.options.refetchInterval)??!1},ss=function(s){T(this,k,is).call(this),b(this,Tt,s),!($t||pt(this.options.enabled,h(this,D))===!1||!Ge(h(this,Tt))||h(this,Tt)===0)&&b(this,qt,setInterval(()=>{(this.options.refetchIntervalInBackground||hs.isFocused())&&T(this,k,pe).call(this)},h(this,Tt)))},ns=function(){T(this,k,ts).call(this),T(this,k,ss).call(this,T(this,k,es).call(this))},rs=function(){h(this,Kt)&&(clearTimeout(h(this,Kt)),b(this,Kt,void 0))},is=function(){h(this,qt)&&(clearInterval(h(this,qt)),b(this,qt,void 0))},os=function(){const s=h(this,et).getQueryCache().build(h(this,et),this.options);if(s===h(this,D))return;const e=h(this,D);b(this,D,s),b(this,we,s.state),this.hasListeners()&&(e==null||e.removeObserver(this),s.addObserver(this))},ln=function(s){X.batch(()=>{s.listeners&&this.listeners.forEach(e=>{e(h(this,tt))}),h(this,et).getQueryCache().notify({query:h(this,D),type:"observerResultsUpdated"})})},Xs);function Vn(t,s){return pt(s.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&s.retryOnMount===!1)}function Rs(t,s){return Vn(t,s)||t.state.data!==void 0&&as(t,s,s.refetchOnMount)}function as(t,s,e){if(pt(s.enabled,t)!==!1){const n=typeof e=="function"?e(t):e;return n==="always"||n!==!1&&ds(t,s)}return!1}function Ms(t,s,e,n){return(t!==s||pt(n.enabled,t)===!1)&&(!e.suspense||t.state.status!=="error")&&ds(t,e)}function ds(t,s){return pt(s.enabled,t)!==!1&&t.isStaleByTime(Jt(s.staleTime,t))}function Wn(t,s){return!Je(t.getCurrentResult(),s)}function un(t){return t}function Gn(t){return{mutationKey:t.options.mutationKey,state:t.state,...t.options.scope&&{scope:t.options.scope},...t.meta&&{meta:t.meta}}}function Jn(t,s){var e;return{state:{...t.state,...t.state.data!==void 0&&{data:s(t.state.data)}},queryKey:t.queryKey,queryHash:t.queryHash,...t.state.status==="pending"&&{promise:(e=t.promise)==null?void 0:e.then(s).catch(n=>Promise.reject(new Error("redacted")))},...t.meta&&{meta:t.meta}}}function Xn(t){return t.state.isPaused}function Yn(t){return t.state.status==="success"}function Zn(t,s={}){var a,l,u;const e=s.shouldDehydrateMutation??((a=t.getDefaultOptions().dehydrate)==null?void 0:a.shouldDehydrateMutation)??Xn,n=t.getMutationCache().getAll().flatMap(c=>e(c)?[Gn(c)]:[]),r=s.shouldDehydrateQuery??((l=t.getDefaultOptions().dehydrate)==null?void 0:l.shouldDehydrateQuery)??Yn,i=s.serializeData??((u=t.getDefaultOptions().dehydrate)==null?void 0:u.serializeData)??un,o=t.getQueryCache().getAll().flatMap(c=>r(c)?[Jn(c,i)]:[]);return{mutations:n,queries:o}}function tr(t,s,e){var l,u;if(typeof s!="object"||s===null)return;const n=t.getMutationCache(),r=t.getQueryCache(),i=((l=e==null?void 0:e.defaultOptions)==null?void 0:l.deserializeData)??((u=t.getDefaultOptions().hydrate)==null?void 0:u.deserializeData)??un,o=s.mutations||[],a=s.queries||[];o.forEach(({state:c,...d})=>{var f,m;n.build(t,{...(f=t.getDefaultOptions().hydrate)==null?void 0:f.mutations,...(m=e==null?void 0:e.defaultOptions)==null?void 0:m.mutations,...d},c)}),a.forEach(({queryKey:c,state:d,queryHash:f,meta:m,promise:v})=>{var C,_;let p=r.get(f);const y=d.data===void 0?d.data:i(d.data);if(p){if(p.state.dataUpdatedAt<d.dataUpdatedAt){const{fetchStatus:g,...P}=d;p.setState({...P,data:y})}}else p=r.build(t,{...(C=t.getDefaultOptions().hydrate)==null?void 0:C.queries,...(_=e==null?void 0:e.defaultOptions)==null?void 0:_.queries,queryKey:c,queryHash:f,meta:m},{...d,data:y,fetchStatus:"idle"});if(v){const g=Promise.resolve(v).then(i);p.fetch(void 0,{initialPromise:g})}})}var cn=S.createContext(void 0),er=t=>{const s=S.useContext(cn);if(!s)throw new Error("No QueryClient set, use QueryClientProvider to set one");return s},sr=({client:t,children:s})=>(S.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),R.jsx(cn.Provider,{value:t,children:s})),hn=S.createContext(!1),nr=()=>S.useContext(hn),rr=hn.Provider;function ir(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var or=S.createContext(ir()),ar=()=>S.useContext(or);function lr(t,s){return typeof t=="function"?t(...s):!!t}function xs(){}var ur=(t,s)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(s.isReset()||(t.retryOnMount=!1))},cr=t=>{S.useEffect(()=>{t.clearReset()},[t])},hr=({result:t,errorResetBoundary:s,throwOnError:e,query:n})=>t.isError&&!s.isReset()&&!t.isFetching&&n&&lr(e,[t.error,n]),dr=t=>{t.suspense&&(t.staleTime===void 0&&(t.staleTime=1e3),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3)))},fr=(t,s)=>t.isLoading&&t.isFetching&&!s,pr=(t,s)=>(t==null?void 0:t.suspense)&&s.isPending,Es=(t,s,e)=>s.fetchOptimistic(t).catch(()=>{e.clearReset()});function mr(t,s,e){var c,d,f,m,v;const n=er(),r=nr(),i=ar(),o=n.defaultQueryOptions(t);(d=(c=n.getDefaultOptions().queries)==null?void 0:c._experimental_beforeQuery)==null||d.call(c,o),o._optimisticResults=r?"isRestoring":"optimistic",dr(o),ur(o,i),cr(i);const a=!n.getQueryCache().get(o.queryHash),[l]=S.useState(()=>new s(n,o)),u=l.getOptimisticResult(o);if(S.useSyncExternalStore(S.useCallback(p=>{const y=r?xs:l.subscribe(X.batchCalls(p));return l.updateResult(),y},[l,r]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),S.useEffect(()=>{l.setOptions(o,{listeners:!1})},[o,l]),pr(o,u))throw Es(o,l,i);if(hr({result:u,errorResetBoundary:i,throwOnError:o.throwOnError,query:n.getQueryCache().get(o.queryHash)}))throw u.error;if((m=(f=n.getDefaultOptions().queries)==null?void 0:f._experimental_afterQuery)==null||m.call(f,o,u),o.experimental_prefetchInRender&&!$t&&fr(u,r)){const p=a?Es(o,l,i):(v=n.getQueryCache().get(o.queryHash))==null?void 0:v.promise;p==null||p.catch(xs).finally(()=>{l.updateResult()})}return o.notifyOnChangeProps?u:l.trackResult(u)}function Fi(t,s){return mr(t,Hn)}function Vt(t,s,e){let n=e.initialDeps??[],r;return()=>{var i,o,a,l;let u;e.key&&((i=e.debug)!=null&&i.call(e))&&(u=Date.now());const c=t();if(!(c.length!==n.length||c.some((m,v)=>n[v]!==m)))return r;n=c;let f;if(e.key&&((o=e.debug)!=null&&o.call(e))&&(f=Date.now()),r=s(...c),e.key&&((a=e.debug)!=null&&a.call(e))){const m=Math.round((Date.now()-u)*100)/100,v=Math.round((Date.now()-f)*100)/100,p=v/16,y=(C,_)=>{for(C=String(C);C.length<_;)C=" "+C;return C};console.info(`%c⏱ ${y(v,5)} /${y(m,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*p,120))}deg 100% 31%);`,e==null?void 0:e.key)}return(l=e==null?void 0:e.onChange)==null||l.call(e,r),r}}function Ke(t,s){if(t===void 0)throw new Error("Unexpected undefined");return t}const yr=(t,s)=>Math.abs(t-s)<1,vr=(t,s,e)=>{let n;return function(...r){t.clearTimeout(n),n=t.setTimeout(()=>s.apply(this,r),e)}},gr=t=>t,br=t=>{const s=Math.max(t.startIndex-t.overscan,0),e=Math.min(t.endIndex+t.overscan,t.count-1),n=[];for(let r=s;r<=e;r++)n.push(r);return n},Sr=(t,s)=>{const e=t.scrollElement;if(!e)return;const n=t.targetWindow;if(!n)return;const r=o=>{const{width:a,height:l}=o;s({width:Math.round(a),height:Math.round(l)})};if(r(e.getBoundingClientRect()),!n.ResizeObserver)return()=>{};const i=new n.ResizeObserver(o=>{const a=o[0];if(a!=null&&a.borderBoxSize){const l=a.borderBoxSize[0];if(l){r({width:l.inlineSize,height:l.blockSize});return}}r(e.getBoundingClientRect())});return i.observe(e,{box:"border-box"}),()=>{i.unobserve(e)}},Os={passive:!0},wr=typeof window>"u"?!0:"onscrollend"in window,Cr=(t,s)=>{const e=t.scrollElement;if(!e)return;const n=t.targetWindow;if(!n)return;let r=0;const i=t.options.useScrollendEvent&&wr?()=>{}:vr(n,()=>{s(r,!1)},t.options.isScrollingResetDelay),o=u=>()=>{const{horizontal:c,isRtl:d}=t.options;r=c?e.scrollLeft*(d&&-1||1):e.scrollTop,i(),s(r,u)},a=o(!0),l=o(!1);return l(),e.addEventListener("scroll",a,Os),e.addEventListener("scrollend",l,Os),()=>{e.removeEventListener("scroll",a),e.removeEventListener("scrollend",l)}},_r=(t,s,e)=>{if(s!=null&&s.borderBoxSize){const n=s.borderBoxSize[0];if(n)return Math.round(n[e.options.horizontal?"inlineSize":"blockSize"])}return Math.round(t.getBoundingClientRect()[e.options.horizontal?"width":"height"])},Pr=(t,{adjustments:s=0,behavior:e},n)=>{var r,i;const o=t+s;(i=(r=n.scrollElement)==null?void 0:r.scrollTo)==null||i.call(r,{[n.options.horizontal?"left":"top"]:o,behavior:e})};class Rr{constructor(s){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.scrollToIndexTimeoutId=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let e=null;const n=()=>e||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:e=new this.targetWindow.ResizeObserver(r=>{r.forEach(i=>{this._measureElement(i.target,i)})}));return{disconnect:()=>{var r;(r=n())==null||r.disconnect(),e=null},observe:r=>{var i;return(i=n())==null?void 0:i.observe(r,{box:"border-box"})},unobserve:r=>{var i;return(i=n())==null?void 0:i.unobserve(r)}}})(),this.range=null,this.setOptions=e=>{Object.entries(e).forEach(([n,r])=>{typeof r>"u"&&delete e[n]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:gr,rangeExtractor:br,onChange:()=>{},measureElement:_r,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!0,...e}},this.notify=e=>{var n,r;(r=(n=this.options).onChange)==null||r.call(n,this,e)},this.maybeNotify=Vt(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),e=>{this.notify(e)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(e=>e()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var e;const n=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==n){if(this.cleanup(),!n){this.maybeNotify();return}this.scrollElement=n,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((e=this.scrollElement)==null?void 0:e.window)??null,this.elementsCache.forEach(r=>{this.observer.observe(r)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,r=>{this.scrollRect=r,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(r,i)=>{this.scrollAdjustments=0,this.scrollDirection=i?this.getScrollOffset()<r?"forward":"backward":null,this.scrollOffset=r,this.isScrolling=i,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(e,n)=>{const r=new Map,i=new Map;for(let o=n-1;o>=0;o--){const a=e[o];if(r.has(a.lane))continue;const l=i.get(a.lane);if(l==null||a.end>l.end?i.set(a.lane,a):a.end<l.end&&r.set(a.lane,!0),r.size===this.options.lanes)break}return i.size===this.options.lanes?Array.from(i.values()).sort((o,a)=>o.end===a.end?o.index-a.index:o.end-a.end)[0]:void 0},this.getMeasurementOptions=Vt(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled],(e,n,r,i,o)=>(this.pendingMeasuredCacheIndexes=[],{count:e,paddingStart:n,scrollMargin:r,getItemKey:i,enabled:o}),{key:!1}),this.getMeasurements=Vt(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:e,paddingStart:n,scrollMargin:r,getItemKey:i,enabled:o},a)=>{if(!o)return this.measurementsCache=[],this.itemSizeCache.clear(),[];this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(c=>{this.itemSizeCache.set(c.key,c.size)}));const l=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const u=this.measurementsCache.slice(0,l);for(let c=l;c<e;c++){const d=i(c),f=this.options.lanes===1?u[c-1]:this.getFurthestMeasurement(u,c),m=f?f.end+this.options.gap:n+r,v=a.get(d),p=typeof v=="number"?v:this.options.estimateSize(c),y=m+p,C=f?f.lane:c%this.options.lanes;u[c]={index:c,start:m,size:p,end:y,key:d,lane:C}}return this.measurementsCache=u,u},{key:!1,debug:()=>this.options.debug}),this.calculateRange=Vt(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset()],(e,n,r)=>this.range=e.length>0&&n>0?Mr({measurements:e,outerSize:n,scrollOffset:r}):null,{key:!1,debug:()=>this.options.debug}),this.getIndexes=Vt(()=>[this.options.rangeExtractor,this.calculateRange(),this.options.overscan,this.options.count],(e,n,r,i)=>n===null?[]:e({startIndex:n.startIndex,endIndex:n.endIndex,overscan:r,count:i}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=e=>{const n=this.options.indexAttribute,r=e.getAttribute(n);return r?parseInt(r,10):(console.warn(`Missing attribute name '${n}={index}' on measured element.`),-1)},this._measureElement=(e,n)=>{const r=this.indexFromElement(e),i=this.measurementsCache[r];if(!i)return;const o=i.key,a=this.elementsCache.get(o);a!==e&&(a&&this.observer.unobserve(a),this.observer.observe(e),this.elementsCache.set(o,e)),e.isConnected&&this.resizeItem(r,this.options.measureElement(e,n,this))},this.resizeItem=(e,n)=>{const r=this.measurementsCache[e];if(!r)return;const i=this.itemSizeCache.get(r.key)??r.size,o=n-i;o!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(r,o,this):r.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=o,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(r.index),this.itemSizeCache=new Map(this.itemSizeCache.set(r.key,n)),this.notify(!1))},this.measureElement=e=>{if(!e){this.elementsCache.forEach((n,r)=>{n.isConnected||(this.observer.unobserve(n),this.elementsCache.delete(r))});return}this._measureElement(e,void 0)},this.getVirtualItems=Vt(()=>[this.getIndexes(),this.getMeasurements()],(e,n)=>{const r=[];for(let i=0,o=e.length;i<o;i++){const a=e[i],l=n[a];r.push(l)}return r},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=e=>{const n=this.getMeasurements();if(n.length!==0)return Ke(n[dn(0,n.length-1,r=>Ke(n[r]).start,e)])},this.getOffsetForAlignment=(e,n)=>{const r=this.getSize(),i=this.getScrollOffset();n==="auto"&&e>=i+r&&(n="end"),n==="end"&&(e-=r);const o=this.options.horizontal?"scrollWidth":"scrollHeight",l=(this.scrollElement?"document"in this.scrollElement?this.scrollElement.document.documentElement[o]:this.scrollElement[o]:0)-r;return Math.max(Math.min(l,e),0)},this.getOffsetForIndex=(e,n="auto")=>{e=Math.max(0,Math.min(e,this.options.count-1));const r=this.measurementsCache[e];if(!r)return;const i=this.getSize(),o=this.getScrollOffset();if(n==="auto")if(r.end>=o+i-this.options.scrollPaddingEnd)n="end";else if(r.start<=o+this.options.scrollPaddingStart)n="start";else return[o,n];const a=r.start-this.options.scrollPaddingStart+(r.size-i)/2;switch(n){case"center":return[this.getOffsetForAlignment(a,n),n];case"end":return[this.getOffsetForAlignment(r.end+this.options.scrollPaddingEnd,n),n];default:return[this.getOffsetForAlignment(r.start-this.options.scrollPaddingStart,n),n]}},this.isDynamicMode=()=>this.elementsCache.size>0,this.cancelScrollToIndex=()=>{this.scrollToIndexTimeoutId!==null&&this.targetWindow&&(this.targetWindow.clearTimeout(this.scrollToIndexTimeoutId),this.scrollToIndexTimeoutId=null)},this.scrollToOffset=(e,{align:n="start",behavior:r}={})=>{this.cancelScrollToIndex(),r==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(e,n),{adjustments:void 0,behavior:r})},this.scrollToIndex=(e,{align:n="auto",behavior:r}={})=>{e=Math.max(0,Math.min(e,this.options.count-1)),this.cancelScrollToIndex(),r==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size.");const i=this.getOffsetForIndex(e,n);if(!i)return;const[o,a]=i;this._scrollToOffset(o,{adjustments:void 0,behavior:r}),r!=="smooth"&&this.isDynamicMode()&&this.targetWindow&&(this.scrollToIndexTimeoutId=this.targetWindow.setTimeout(()=>{if(this.scrollToIndexTimeoutId=null,this.elementsCache.has(this.options.getItemKey(e))){const[u]=Ke(this.getOffsetForIndex(e,a));yr(u,this.getScrollOffset())||this.scrollToIndex(e,{align:a,behavior:r})}else this.scrollToIndex(e,{align:a,behavior:r})}))},this.scrollBy=(e,{behavior:n}={})=>{this.cancelScrollToIndex(),n==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+e,{adjustments:void 0,behavior:n})},this.getTotalSize=()=>{var e;const n=this.getMeasurements();let r;return n.length===0?r=this.options.paddingStart:r=this.options.lanes===1?((e=n[n.length-1])==null?void 0:e.end)??0:Math.max(...n.slice(-this.options.lanes).map(i=>i.end)),Math.max(r-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(e,{adjustments:n,behavior:r})=>{this.options.scrollToFn(e,{behavior:r,adjustments:n},this)},this.measure=()=>{this.itemSizeCache=new Map,this.notify(!1)},this.setOptions(s)}}const dn=(t,s,e,n)=>{for(;t<=s;){const r=(t+s)/2|0,i=e(r);if(i<n)t=r+1;else if(i>n)s=r-1;else return r}return t>0?t-1:0};function Mr({measurements:t,outerSize:s,scrollOffset:e}){const n=t.length-1,i=dn(0,n,a=>t[a].start,e);let o=i;for(;o<n&&t[o].end<e+s;)o++;return{startIndex:i,endIndex:o}}const Is=typeof document<"u"?S.useLayoutEffect:S.useEffect;function xr(t){const s=S.useReducer(()=>({}),{})[1],e={...t,onChange:(r,i)=>{var o;i?Ys.flushSync(s):s(),(o=t.onChange)==null||o.call(t,r,i)}},[n]=S.useState(()=>new Rr(e));return n.setOptions(e),Is(()=>n._didMount(),[]),Is(()=>n._willUpdate()),n}function Ti(t){return xr({observeElementRect:Sr,observeElementOffset:Cr,scrollToFn:Pr,...t})}var Di=function(){return null},Er=["added","removed","updated"];function Ls(t){return Er.includes(t)}async function Or({queryClient:t,persister:s,maxAge:e=1e3*60*60*24,buster:n="",hydrateOptions:r}){try{const i=await s.restoreClient();if(i)if(i.timestamp){const o=Date.now()-i.timestamp>e,a=i.buster!==n;o||a?s.removeClient():tr(t,i.clientState,r)}else s.removeClient()}catch{s.removeClient()}}async function Fs({queryClient:t,persister:s,buster:e="",dehydrateOptions:n}){const r={buster:e,timestamp:Date.now(),clientState:Zn(t,n)};await s.persistClient(r)}function Ir(t){const s=t.queryClient.getQueryCache().subscribe(n=>{Ls(n.type)&&Fs(t)}),e=t.queryClient.getMutationCache().subscribe(n=>{Ls(n.type)&&Fs(t)});return()=>{s(),e()}}var ji=({client:t,children:s,persistOptions:e,onSuccess:n,...r})=>{const[i,o]=S.useState(!0),a=S.useRef({persistOptions:e,onSuccess:n}),l=S.useRef(!1);return S.useEffect(()=>{a.current={persistOptions:e,onSuccess:n}}),S.useEffect(()=>{const u={...a.current.persistOptions,queryClient:t};return l.current||(l.current=!0,Or(u).then(async()=>{var c,d;try{await((d=(c=a.current).onSuccess)==null?void 0:d.call(c))}finally{o(!1)}})),i?void 0:Ir(u)},[t,i]),R.jsx(sr,{client:t,...r,children:R.jsx(rr,{value:i,children:s})})};const Ts="pushstate",Ds="popstate",fn="beforeunload",pn=t=>(t.preventDefault(),t.returnValue=""),Lr=()=>{removeEventListener(fn,pn,{capture:!0})};function mn(t){let s=t.getLocation();const e=new Set;let n=[];const r=()=>{s=t.getLocation(),e.forEach(o=>o({location:s}))},i=async(o,a)=>{var l;if(!((a==null?void 0:a.ignoreBlocker)??!1)&&typeof document<"u"&&n.length){for(const c of n)if(!await c()){(l=t.onBlocked)==null||l.call(t,r);return}}o()};return{get location(){return s},get length(){return t.getLength()},subscribers:e,subscribe:o=>(e.add(o),()=>{e.delete(o)}),push:(o,a,l)=>{a=js(a),i(()=>{t.pushState(o,a),r()},l)},replace:(o,a,l)=>{a=js(a),i(()=>{t.replaceState(o,a),r()},l)},go:(o,a)=>{i(()=>{t.go(o),r()},a)},back:o=>{i(()=>{t.back(),r()},o)},forward:o=>{i(()=>{t.forward(),r()},o)},createHref:o=>t.createHref(o),block:o=>(n.push(o),n.length===1&&addEventListener(fn,pn,{capture:!0}),()=>{n=n.filter(a=>a!==o),n.length||Lr()}),flush:()=>{var o;return(o=t.flush)==null?void 0:o.call(t)},destroy:()=>{var o;return(o=t.destroy)==null?void 0:o.call(t)},notify:r}}function js(t){return t||(t={}),{...t,key:Dr()}}function Fr(t){const s=typeof document<"u"?window:void 0,e=s.history.pushState,n=s.history.replaceState,r=p=>p,i=()=>Fe(`${s.location.pathname}${s.location.search}${s.location.hash}`,s.history.state);let o=i(),a;const l=()=>o;let u,c;const d=()=>{u&&(v._ignoreSubscribers=!0,(u.isPush?s.history.pushState:s.history.replaceState)(u.state,"",u.href),v._ignoreSubscribers=!1,u=void 0,c=void 0,a=void 0)},f=(p,y,C)=>{const _=r(y);c||(a=o),o=Fe(y,C),u={href:_,state:C,isPush:(u==null?void 0:u.isPush)||p==="push"},c||(c=Promise.resolve().then(()=>d()))},m=()=>{o=i(),v.notify()},v=mn({getLocation:l,getLength:()=>s.history.length,pushState:(p,y)=>f("push",p,y),replaceState:(p,y)=>f("replace",p,y),back:()=>s.history.back(),forward:()=>s.history.forward(),go:p=>s.history.go(p),createHref:p=>r(p),flush:d,destroy:()=>{s.history.pushState=e,s.history.replaceState=n,s.removeEventListener(Ts,m),s.removeEventListener(Ds,m)},onBlocked:p=>{a&&o!==a&&(o=a,p())}});return s.addEventListener(Ts,m),s.addEventListener(Ds,m),s.history.pushState=function(...p){const y=e.apply(s.history,p);return v._ignoreSubscribers||m(),y},s.history.replaceState=function(...p){const y=n.apply(s.history,p);return v._ignoreSubscribers||m(),y},v}function Tr(t={initialEntries:["/"]}){const s=t.initialEntries;let e=t.initialIndex??s.length-1;const n=s.map(()=>({}));return mn({getLocation:()=>Fe(s[e],n[e]),getLength:()=>s.length,pushState:(i,o)=>{e<s.length-1&&(s.splice(e+1),n.splice(e+1)),n.push(o),s.push(i),e=Math.max(s.length-1,0)},replaceState:(i,o)=>{n[e]=o,s[e]=i},back:()=>{e=Math.max(e-1,0)},forward:()=>{e=Math.min(e+1,s.length-1)},go:i=>{e=Math.min(Math.max(e+i,0),s.length-1)},createHref:i=>i})}function Fe(t,s){const e=t.indexOf("#"),n=t.indexOf("?");return{href:t,pathname:t.substring(0,e>0?n>0?Math.min(e,n):e:n>0?n:t.length),hash:e>-1?t.substring(e):"",search:n>-1?t.slice(n,e===-1?void 0:e):"",state:s||{}}}function Dr(){return(Math.random()+1).toString(36).substring(7)}const qe=S.createContext(null);function yn(){return typeof document>"u"?qe:window.__TSR_ROUTER_CONTEXT__?window.__TSR_ROUTER_CONTEXT__:(window.__TSR_ROUTER_CONTEXT__=qe,qe)}function Dt(t){const s=S.useContext(yn());return je(!(((t==null?void 0:t.warn)??!0)&&!s)),s}class jr{constructor(s,e){this.listeners=new Set,this._batching=!1,this._flushing=0,this.subscribe=n=>{var r,i;this.listeners.add(n);const o=(i=(r=this.options)==null?void 0:r.onSubscribe)==null?void 0:i.call(r,n,this);return()=>{this.listeners.delete(n),o==null||o()}},this.setState=n=>{var r,i,o;const a=this.state;this.state=(r=this.options)!=null&&r.updateFn?this.options.updateFn(a)(n):n(a),(o=(i=this.options)==null?void 0:i.onUpdate)==null||o.call(i),this._flush()},this._flush=()=>{if(this._batching)return;const n=++this._flushing;this.listeners.forEach(r=>{this._flushing===n&&r()})},this.batch=n=>{if(this._batching)return n();this._batching=!0,n(),this._batching=!1,this._flush()},this.state=s,this.options=e}}function kr(t,s=e=>e){return On.useSyncExternalStoreWithSelector(t.subscribe,()=>t.state,()=>t.state,s,zr)}function zr(t,s){if(Object.is(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;if(t instanceof Map&&s instanceof Map){if(t.size!==s.size)return!1;for(const[n,r]of t)if(!s.has(n)||!Object.is(r,s.get(n)))return!1;return!0}if(t instanceof Set&&s instanceof Set){if(t.size!==s.size)return!1;for(const n of t)if(!s.has(n))return!1;return!0}const e=Object.keys(t);if(e.length!==Object.keys(s).length)return!1;for(let n=0;n<e.length;n++)if(!Object.prototype.hasOwnProperty.call(s,e[n])||!Object.is(t[e[n]],s[e[n]]))return!1;return!0}const ot="__root__";function Ar(t,s){let e,n,r,i="";for(e in t)if((r=t[e])!==void 0)if(Array.isArray(r))for(n=0;n<r.length;n++)i&&(i+="&"),i+=encodeURIComponent(e)+"="+encodeURIComponent(r[n]);else i&&(i+="&"),i+=encodeURIComponent(e)+"="+encodeURIComponent(r);return""+i}function ks(t){if(!t)return"";const s=decodeURIComponent(t);return s==="false"?!1:s==="true"?!0:+s*0===0&&+s+""===s?+s:s}function Qr(t,s){let e,n;const r={},i=t.split("&");for(;e=i.shift();){const o=e.indexOf("=");if(o!==-1){n=e.slice(0,o),n=decodeURIComponent(n);const a=e.slice(o+1);r[n]!==void 0?r[n]=[].concat(r[n],ks(a)):r[n]=ks(a)}else n=e,n=decodeURIComponent(n),r[n]=""}return r}const Ur=Nr(JSON.parse),Br=Kr(JSON.stringify,JSON.parse);function Nr(t){return s=>{s.substring(0,1)==="?"&&(s=s.substring(1));const e=Qr(s);for(const n in e){const r=e[n];if(typeof r=="string")try{e[n]=t(r)}catch{}}return e}}function Kr(t,s){function e(n){if(typeof n=="object"&&n!==null)try{return t(n)}catch{}else if(typeof n=="string"&&typeof s=="function")try{return s(n),t(n)}catch{}return n}return n=>{n={...n},Object.keys(n).forEach(i=>{const o=n[i];typeof o>"u"||o===void 0?delete n[i]:n[i]=e(o)});const r=Ar(n).toString();return r?`?${r}`:""}}function ye(t){return t[t.length-1]}function qr(t){return typeof t=="function"}function Gt(t,s){return qr(t)?t(s):t}function Oe(t,s){return s.reduce((e,n)=>(e[n]=t[n],e),{})}function ut(t,s){if(t===s)return t;const e=s,n=As(t)&&As(e);if(n||he(t)&&he(e)){const r=n?t:Object.keys(t),i=r.length,o=n?e:Object.keys(e),a=o.length,l=n?[]:{};let u=0;for(let c=0;c<a;c++){const d=n?c:o[c];(!n&&r.includes(d)||n)&&t[d]===void 0&&e[d]===void 0?(l[d]=void 0,u++):(l[d]=ut(t[d],e[d]),l[d]===t[d]&&t[d]!==void 0&&u++)}return i===a&&u===i?t:l}return e}function he(t){if(!zs(t))return!1;const s=t.constructor;if(typeof s>"u")return!0;const e=s.prototype;return!(!zs(e)||!e.hasOwnProperty("isPrototypeOf"))}function zs(t){return Object.prototype.toString.call(t)==="[object Object]"}function As(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Qs(t,s){let e=Object.keys(t);return s&&(e=e.filter(n=>t[n]!==void 0)),e}function Xt(t,s,e){if(t===s)return!0;if(typeof t!=typeof s)return!1;if(he(t)&&he(s)){const n=(e==null?void 0:e.ignoreUndefined)??!0,r=Qs(t,n),i=Qs(s,n);return!(e!=null&&e.partial)&&r.length!==i.length?!1:i.every(o=>Xt(t[o],s[o],e))}return Array.isArray(t)&&Array.isArray(s)?t.length!==s.length?!1:!t.some((n,r)=>!Xt(n,s[r],e)):!1}const me=typeof window<"u"?S.useLayoutEffect:S.useEffect;function Wt(t){let s,e;const n=new Promise((r,i)=>{s=r,e=i});return n.status="pending",n.resolve=r=>{n.status="resolved",n.value=r,s(r),t==null||t(r)},n.reject=r=>{n.status="rejected",e(r)},n}function $e(t){const s=S.useRef({value:t,prev:null}),e=s.current.value;return t!==e&&(s.current={value:t,prev:e}),s.current.prev}function $r(t,s,e={},n={}){const r=S.useRef(typeof IntersectionObserver=="function"),i=S.useRef(null);return S.useEffect(()=>{if(!(!t.current||!r.current||n.disabled))return i.current=new IntersectionObserver(([o])=>{s(o)},e),i.current.observe(t.current),()=>{var o;(o=i.current)==null||o.disconnect()}},[s,e,n.disabled,t]),i.current}function Hr(t){const s=S.useRef(null);return S.useEffect(()=>{t&&(typeof t=="function"?t(s.current):t.current=s.current)}),s}function Ct(t){return ke(t.filter(s=>s!==void 0).join("/"))}function ke(t){return t.replace(/\/{2,}/g,"/")}function fs(t){return t==="/"?t:t.replace(/^\/{1,}/,"")}function zt(t){return t==="/"?t:t.replace(/\/{1,}$/,"")}function Vr(t){return zt(fs(t))}function Te(t,s){return t.endsWith("/")&&t!=="/"&&t!==`${s}/`?t.slice(0,-1):t}function Wr(t,s,e){return Te(t,e)===Te(s,e)}function Gr({basepath:t,base:s,to:e,trailingSlash:n="never",caseSensitive:r}){var i,o;s=De(t,s,r),e=De(t,e,r);let a=de(s);const l=de(e);a.length>1&&((i=ye(a))==null?void 0:i.value)==="/"&&a.pop(),l.forEach((c,d)=>{c.value==="/"?d?d===l.length-1&&a.push(c):a=[c]:c.value===".."?a.pop():c.value==="."||a.push(c)}),a.length>1&&(((o=ye(a))==null?void 0:o.value)==="/"?n==="never"&&a.pop():n==="always"&&a.push({type:"pathname",value:"/"}));const u=Ct([t,...a.map(c=>c.value)]);return ke(u)}function de(t){if(!t)return[];t=ke(t);const s=[];if(t.slice(0,1)==="/"&&(t=t.substring(1),s.push({type:"pathname",value:"/"})),!t)return s;const e=t.split("/").filter(Boolean);return s.push(...e.map(n=>n==="$"||n==="*"?{type:"wildcard",value:n}:n.charAt(0)==="$"?{type:"param",value:n}:{type:"pathname",value:decodeURI(n)})),t.slice(-1)==="/"&&(t=t.substring(1),s.push({type:"pathname",value:"/"})),s}function xe({path:t,params:s,leaveWildcards:e,leaveParams:n,decodeCharMap:r}){const i=de(t),o={};for(const[a,l]of Object.entries(s)){const u=typeof l=="string";["*","_splat"].includes(a)?o[a]=u?encodeURI(l):l:o[a]=u?Jr(l,r):l}return Ct(i.map(a=>{if(a.type==="wildcard"){const l=o._splat;return e?`${a.value}${l??""}`:l}if(a.type==="param"){if(n){const l=o[a.value];return`${a.value}${l??""}`}return o[a.value.substring(1)]??"undefined"}return a.value}))}function Jr(t,s){let e=encodeURIComponent(t);if(s)for(const[n,r]of s)e=e.replaceAll(n,r);return e}function Ee(t,s,e){const n=Xr(t,s,e);if(!(e.to&&!n))return n??{}}function De(t,s,e=!1){const n=e?t:t.toLowerCase(),r=e?s:s.toLowerCase();switch(!0){case n==="/":return s;case r===n:return"";case s.length<t.length:return s;case r[n.length]!=="/":return s;case r.startsWith(n):return s.slice(t.length);default:return s}}function Xr(t,s,e){if(t!=="/"&&!s.startsWith(t))return;s=De(t,s,e.caseSensitive);const n=De(t,`${e.to??"$"}`,e.caseSensitive),r=de(s),i=de(n);s.startsWith("/")||r.unshift({type:"pathname",value:"/"}),n.startsWith("/")||i.unshift({type:"pathname",value:"/"});const o={};return(()=>{for(let l=0;l<Math.max(r.length,i.length);l++){const u=r[l],c=i[l],d=l>=r.length-1,f=l>=i.length-1;if(c){if(c.type==="wildcard"){const m=decodeURI(Ct(r.slice(l).map(v=>v.value)));return o["*"]=m,o._splat=m,!0}if(c.type==="pathname"){if(c.value==="/"&&!(u!=null&&u.value))return!0;if(u){if(e.caseSensitive){if(c.value!==u.value)return!1}else if(c.value.toLowerCase()!==u.value.toLowerCase())return!1}}if(!u)return!1;if(c.type==="param"){if(u.value==="/")return!1;u.value.charAt(0)!=="$"&&(o[c.value.substring(1)]=decodeURIComponent(u.value))}}if(!d&&f)return o["**"]=Ct(r.slice(l+1).map(m=>m.value)),!!e.fuzzy&&(c==null?void 0:c.value)!=="/"}return!0})()?o:void 0}function ki(t){if(t.isRedirect=!0,t.statusCode=t.statusCode||t.code||307,t.headers=t.headers||{},t.throw)throw t;return t}function kt(t){return!!(t!=null&&t.isRedirect)}function He(t){return!!(t!=null&&t.isRedirect)&&t.href}function ps(t){const s=t.errorComponent??ze;return R.jsx(Yr,{getResetKey:t.getResetKey,onCatch:t.onCatch,children:({error:e,reset:n})=>e?S.createElement(s,{error:e,reset:n}):t.children})}class Yr extends S.Component{constructor(){super(...arguments),this.state={error:null}}static getDerivedStateFromProps(s){return{resetKey:s.getResetKey()}}static getDerivedStateFromError(s){return{error:s}}reset(){this.setState({error:null})}componentDidUpdate(s,e){e.error&&e.resetKey!==this.state.resetKey&&this.reset()}componentDidCatch(s,e){this.props.onCatch&&this.props.onCatch(s,e)}render(){return this.props.children({error:this.state.resetKey!==this.props.getResetKey()?null:this.state.error,reset:()=>{this.reset()}})}}function ze({error:t}){const[s,e]=S.useState(!1);return R.jsxs("div",{style:{padding:".5rem",maxWidth:"100%"},children:[R.jsxs("div",{style:{display:"flex",alignItems:"center",gap:".5rem"},children:[R.jsx("strong",{style:{fontSize:"1rem"},children:"Something went wrong!"}),R.jsx("button",{style:{appearance:"none",fontSize:".6em",border:"1px solid currentColor",padding:".1rem .2rem",fontWeight:"bold",borderRadius:".25rem"},onClick:()=>e(n=>!n),children:s?"Hide Error":"Show Error"})]}),R.jsx("div",{style:{height:".25rem"}}),s?R.jsx("div",{children:R.jsx("pre",{style:{fontSize:".7em",border:"1px solid red",borderRadius:".25rem",padding:".3rem",color:"red",overflow:"auto"},children:t.message?R.jsx("code",{children:t.message}):null})}):null]})}function nt(t){const s=Dt({warn:(t==null?void 0:t.router)===void 0}),e=(t==null?void 0:t.router)||s,n=S.useRef();return kr(e.__store,r=>{if(t!=null&&t.select){if(t.structuralSharing??e.options.defaultStructuralSharing){const i=ut(n.current,t.select(r));return n.current=i,i}return t.select(r)}return r})}function ft(t){return!!(t!=null&&t.isNotFound)}function Zr(t){const s=nt({select:e=>`not-found-${e.location.pathname}-${e.status}`});return R.jsx(ps,{getResetKey:()=>s,onCatch:(e,n)=>{var r;if(ft(e))(r=t.onCatch)==null||r.call(t,e,n);else throw e},errorComponent:({error:e})=>{var n;if(ft(e))return(n=t.fallback)==null?void 0:n.call(t,e);throw e},children:t.children})}function ti(){return R.jsx("p",{children:"Not Found"})}const ei={stringify:t=>JSON.stringify(t,function(e,n){const r=this[e],i=Us.find(o=>o.stringifyCondition(r));return i?i.stringify(r):n}),parse:t=>JSON.parse(t,function(e,n){const r=this[e],i=Us.find(o=>o.parseCondition(r));return i?i.parse(r):n})},Us=[{stringifyCondition:t=>t instanceof Date,stringify:t=>({$date:t.toISOString()}),parseCondition:t=>he(t)&&t.$date,parse:t=>new Date(t.$date)},{stringifyCondition:t=>t===void 0,stringify:()=>({$undefined:""}),parseCondition:t=>he(t)&&t.$undefined==="",parse:()=>{}}],vn=["component","errorComponent","pendingComponent","notFoundComponent"];function si(t){var s;for(const e of vn)if((s=t.options[e])!=null&&s.preload)return!0;return!1}function Ve(t,s){if(t==null)return{};if("~standard"in t){const e=t["~standard"].validate(s);if(e instanceof Promise)throw new ls("Async validation not supported");if(e.issues)throw new ls(JSON.stringify(e.issues,void 0,2));return e.value}return"parse"in t?t.parse(s):typeof t=="function"?t(s):{}}function zi(t){return new ni(t)}class ni{constructor(s){this.tempLocationKey=`${Math.round(Math.random()*1e7)}`,this.resetNextScroll=!0,this.shouldViewTransition=void 0,this.isViewTransitionTypesSupported=void 0,this.subscribers=new Set,this.startReactTransition=e=>e(),this.update=e=>{e.notFoundRoute&&console.warn("The notFoundRoute API is deprecated and will be removed in the next major version. See https://tanstack.com/router/v1/docs/guide/not-found-errors#migrating-from-notfoundroute for more info.");const n=this.options;this.options={...this.options,...e},this.isServer=this.options.isServer??typeof document>"u",this.pathParamsDecodeCharMap=this.options.pathParamsAllowedCharacters?new Map(this.options.pathParamsAllowedCharacters.map(r=>[encodeURIComponent(r),r])):void 0,(!this.basepath||e.basepath&&e.basepath!==n.basepath)&&(e.basepath===void 0||e.basepath===""||e.basepath==="/"?this.basepath="/":this.basepath=`/${Vr(e.basepath)}`),(!this.history||this.options.history&&this.options.history!==this.history)&&(this.history=this.options.history??(this.isServer?Tr({initialEntries:[this.basepath||"/"]}):Fr()),this.latestLocation=this.parseLocation()),this.options.routeTree!==this.routeTree&&(this.routeTree=this.options.routeTree,this.buildRouteTree()),this.__store||(this.__store=new jr(ii(this.latestLocation),{onUpdate:()=>{this.__store.state={...this.state,cachedMatches:this.state.cachedMatches.filter(r=>!["redirected"].includes(r.status))}}})),typeof window<"u"&&"CSS"in window&&typeof window.CSS.supports=="function"&&(this.isViewTransitionTypesSupported=window.CSS.supports("selector(:active-view-transition-type(a)"))},this.buildRouteTree=()=>{this.routesById={},this.routesByPath={};const e=this.options.notFoundRoute;e&&(e.init({originalIndex:99999999999,defaultSsr:this.options.defaultSsr}),this.routesById[e.id]=e);const n=o=>{o.forEach((a,l)=>{a.init({originalIndex:l,defaultSsr:this.options.defaultSsr});const u=this.routesById[a.id];if(st(!u,`Duplicate routes found with id: ${String(a.id)}`),this.routesById[a.id]=a,!a.isRoot&&a.path){const d=zt(a.fullPath);(!this.routesByPath[d]||a.fullPath.endsWith("/"))&&(this.routesByPath[d]=a)}const c=a.children;c!=null&&c.length&&n(c)})};n([this.routeTree]);const r=[];Object.values(this.routesById).forEach((o,a)=>{var l;if(o.isRoot||!o.path)return;const u=fs(o.fullPath),c=de(u);for(;c.length>1&&((l=c[0])==null?void 0:l.value)==="/";)c.shift();const d=c.map(f=>f.value==="/"?.75:f.type==="param"?.5:f.type==="wildcard"?.25:1);r.push({child:o,trimmed:u,parsed:c,index:a,scores:d})}),this.flatRoutes=r.sort((o,a)=>{const l=Math.min(o.scores.length,a.scores.length);for(let u=0;u<l;u++)if(o.scores[u]!==a.scores[u])return a.scores[u]-o.scores[u];if(o.scores.length!==a.scores.length)return a.scores.length-o.scores.length;for(let u=0;u<l;u++)if(o.parsed[u].value!==a.parsed[u].value)return o.parsed[u].value>a.parsed[u].value?1:-1;return o.index-a.index}).map((o,a)=>(o.child.rank=a,o.child))},this.subscribe=(e,n)=>{const r={eventType:e,fn:n};return this.subscribers.add(r),()=>{this.subscribers.delete(r)}},this.emit=e=>{this.subscribers.forEach(n=>{n.eventType===e.type&&n.fn(e)})},this.parseLocation=e=>{const n=({pathname:a,search:l,hash:u,state:c})=>{const d=this.options.parseSearch(l),f=this.options.stringifySearch(d);return{pathname:a,searchStr:f,search:ut(e==null?void 0:e.search,d),hash:u.split("#").reverse()[0]??"",href:`${a}${f}${u}`,state:ut(e==null?void 0:e.state,c)}},r=n(this.history.location),{__tempLocation:i,__tempKey:o}=r.state;if(i&&(!o||o===this.tempLocationKey)){const a=n(i);return a.state.key=r.state.key,delete a.state.__tempLocation,{...a,maskedLocation:r}}return r},this.resolvePathWithBase=(e,n)=>Gr({basepath:this.basepath,base:e,to:ke(n),trailingSlash:this.options.trailingSlash,caseSensitive:this.options.caseSensitive}),this.getMatchedRoutes=(e,n)=>{let r={};const i=zt(e.pathname),o=c=>Ee(this.basepath,i,{to:c.fullPath,caseSensitive:c.options.caseSensitive??this.options.caseSensitive,fuzzy:!0});let a=(n==null?void 0:n.to)!==void 0?this.routesByPath[n.to]:void 0;a?r=o(a):a=this.flatRoutes.find(c=>{const d=o(c);return d?(r=d,!0):!1});let l=a||this.routesById[ot];const u=[l];for(;l.parentRoute;)l=l.parentRoute,u.unshift(l);return{matchedRoutes:u,routeParams:r,foundRoute:a}},this.cancelMatch=e=>{const n=this.getMatch(e);n&&(n.abortController.abort(),clearTimeout(n.pendingTimeout))},this.cancelMatches=()=>{var e;(e=this.state.pendingMatches)==null||e.forEach(n=>{this.cancelMatch(n.id)})},this.buildLocation=e=>{const n=(i={},o)=>{var a,l,u,c,d,f;const m=i._fromLocation?this.matchRoutes(i._fromLocation,{_buildLocation:!0}):this.state.matches,v=i.from!=null?m.find(M=>Ee(this.basepath,zt(M.pathname),{to:i.from,caseSensitive:!1,fuzzy:!1})):void 0,p=(v==null?void 0:v.pathname)||this.latestLocation.pathname;st(i.from==null||v!=null,"Could not find match for from: "+i.from);const y=(a=this.state.pendingMatches)!=null&&a.length?(l=ye(this.state.pendingMatches))==null?void 0:l.search:((u=ye(m))==null?void 0:u.search)||this.latestLocation.search,C=o==null?void 0:o.matchedRoutes.filter(M=>m.find(O=>O.routeId===M.id));let _;if(i.to)_=this.resolvePathWithBase(p,`${i.to}`);else{const M=this.routesById[(c=C==null?void 0:C.find(O=>{const V=xe({path:O.fullPath,params:(o==null?void 0:o.routeParams)??{},decodeCharMap:this.pathParamsDecodeCharMap});return Ct([this.basepath,V])===p}))==null?void 0:c.id];_=this.resolvePathWithBase(p,(M==null?void 0:M.to)??p)}const g={...(d=ye(m))==null?void 0:d.params};let P=(i.params??!0)===!0?g:{...g,...Gt(i.params,g)};Object.keys(P).length>0&&(o==null||o.matchedRoutes.map(M=>{var O;return((O=M.options.params)==null?void 0:O.stringify)??M.options.stringifyParams}).filter(Boolean).forEach(M=>{P={...P,...M(P)}})),_=xe({path:_,params:P??{},leaveWildcards:!1,leaveParams:e.leaveParams,decodeCharMap:this.pathParamsDecodeCharMap});let I=y;if(e._includeValidateSearch&&((f=this.options.search)!=null&&f.strict)){let M={};o==null||o.matchedRoutes.forEach(O=>{try{O.options.validateSearch&&(M={...M,...Ve(O.options.validateSearch,{...M,...I})??{}})}catch{}}),I=M}I=(M=>{const O=(o==null?void 0:o.matchedRoutes.reduce((N,U)=>{var at;const B=[];if("search"in U.options)(at=U.options.search)!=null&&at.middlewares&&B.push(...U.options.search.middlewares);else if(U.options.preSearchFilters||U.options.postSearchFilters){const $=({search:q,next:H})=>{let j=q;"preSearchFilters"in U.options&&U.options.preSearchFilters&&(j=U.options.preSearchFilters.reduce((mt,lt)=>lt(mt),q));const J=H(j);return"postSearchFilters"in U.options&&U.options.postSearchFilters?U.options.postSearchFilters.reduce((mt,lt)=>lt(mt),J):J};B.push($)}if(e._includeValidateSearch&&U.options.validateSearch){const $=({search:q,next:H})=>{try{const j=H(q);return{...j,...Ve(U.options.validateSearch,j)??{}}}catch{}};B.push($)}return N.concat(B)},[]))??[],V=({search:N})=>i.search?i.search===!0?N:Gt(i.search,N):{};O.push(V);const F=(N,U)=>{if(N>=O.length)return U;const at=O[N];return at({search:U,next:$=>F(N+1,$)})};return F(0,M)})(I),I=ut(y,I);const L=this.options.stringifySearch(I),x=i.hash===!0?this.latestLocation.hash:i.hash?Gt(i.hash,this.latestLocation.hash):void 0,w=x?`#${x}`:"";let A=i.state===!0?this.latestLocation.state:i.state?Gt(i.state,this.latestLocation.state):{};return A=ut(this.latestLocation.state,A),{pathname:_,search:I,searchStr:L,state:A,hash:x??"",href:`${_}${L}${w}`,unmaskOnReload:i.unmaskOnReload}},r=(i={},o)=>{var a;const l=n(i);let u=o?n(o):void 0;if(!u){let f={};const m=(a=this.options.routeMasks)==null?void 0:a.find(v=>{const p=Ee(this.basepath,l.pathname,{to:v.from,caseSensitive:!1,fuzzy:!1});return p?(f=p,!0):!1});if(m){const{from:v,...p}=m;o={...Oe(e,["from"]),...p,params:f},u=n(o)}}const c=this.getMatchedRoutes(l,i),d=n(i,c);if(u){const f=this.getMatchedRoutes(u,o),m=n(o,f);d.maskedLocation=m}return d};return e.mask?r(e,{...Oe(e,["from"]),...e.mask}):r(e)},this.commitLocation=({viewTransition:e,ignoreBlocker:n,...r})=>{const i=()=>{r.state.key=this.latestLocation.state.key;const l=Xt(r.state,this.latestLocation.state);return delete r.state.key,l},o=this.latestLocation.href===r.href,a=this.commitLocationPromise;if(this.commitLocationPromise=Wt(()=>{a==null||a.resolve()}),o&&i())this.load();else{let{maskedLocation:l,...u}=r;l&&(u={...l,state:{...l.state,__tempKey:void 0,__tempLocation:{...u,search:u.searchStr,state:{...u.state,__tempKey:void 0,__tempLocation:void 0,key:void 0}}}},(u.unmaskOnReload??this.options.unmaskOnReload??!1)&&(u.state.__tempKey=this.tempLocationKey)),this.shouldViewTransition=e,this.history[r.replace?"replace":"push"](u.href,u.state,{ignoreBlocker:n})}return this.resetNextScroll=r.resetScroll??!0,this.history.subscribers.size||this.load(),this.commitLocationPromise},this.buildAndCommitLocation=({replace:e,resetScroll:n,viewTransition:r,ignoreBlocker:i,...o}={})=>{const a=o.href;if(a){const u=Fe(a,{});o.to=u.pathname,o.search=this.options.parseSearch(u.search),o.hash=u.hash.slice(1)}const l=this.buildLocation({...o,_includeValidateSearch:!0});return this.commitLocation({...l,viewTransition:r,replace:e,resetScroll:n,ignoreBlocker:i})},this.navigate=({to:e,...n})=>{const r=String(e);let i;try{new URL(`${r}`),i=!0}catch{}return st(!i),this.buildAndCommitLocation({...n,to:e})},this.load=async()=>{this.latestLocation=this.parseLocation(this.latestLocation);let e,n,r;for(r=new Promise(i=>{this.startReactTransition(async()=>{var o;try{const a=this.latestLocation,l=this.state.resolvedLocation,u=l.href!==a.href,c=l.pathname!==a.pathname;this.cancelMatches();let d;this.__store.batch(()=>{d=this.matchRoutes(a),this.__store.setState(f=>({...f,status:"pending",isLoading:!0,location:a,pendingMatches:d,cachedMatches:f.cachedMatches.filter(m=>!d.find(v=>v.id===m.id))}))}),this.state.redirect||this.emit({type:"onBeforeNavigate",fromLocation:l,toLocation:a,pathChanged:c,hrefChanged:u}),this.emit({type:"onBeforeLoad",fromLocation:l,toLocation:a,pathChanged:c,hrefChanged:u}),await this.loadMatches({matches:d,location:a,onReady:async()=>{this.startViewTransition(async()=>{let f,m,v;this.__store.batch(()=>{this.__store.setState(p=>{const y=p.matches,C=p.pendingMatches||p.matches;return f=y.filter(_=>!C.find(g=>g.id===_.id)),m=C.filter(_=>!y.find(g=>g.id===_.id)),v=y.filter(_=>C.find(g=>g.id===_.id)),{...p,isLoading:!1,loadedAt:Date.now(),matches:C,pendingMatches:void 0,cachedMatches:[...p.cachedMatches,...f.filter(_=>_.status!=="error")]}}),this.clearExpiredCache()}),[[f,"onLeave"],[m,"onEnter"],[v,"onStay"]].forEach(([p,y])=>{p.forEach(C=>{var _,g;(g=(_=this.looseRoutesById[C.routeId].options)[y])==null||g.call(_,C)})})})}})}catch(a){He(a)?(e=a,this.isServer||this.navigate({...a,replace:!0,ignoreBlocker:!0})):ft(a)&&(n=a),this.__store.setState(l=>({...l,statusCode:e?e.statusCode:n?404:l.matches.some(u=>u.status==="error")?500:200,redirect:e}))}this.latestLoadPromise===r&&((o=this.commitLocationPromise)==null||o.resolve(),this.latestLoadPromise=void 0,this.commitLocationPromise=void 0),i()})}),this.latestLoadPromise=r,await r;this.latestLoadPromise&&r!==this.latestLoadPromise;)await this.latestLoadPromise},this.startViewTransition=e=>{const n=this.shouldViewTransition??this.options.defaultViewTransition;if(delete this.shouldViewTransition,n&&typeof document<"u"&&"startViewTransition"in document&&typeof document.startViewTransition=="function"){let r;typeof n=="object"&&this.isViewTransitionTypesSupported?r={update:e,types:n.types}:r=e,document.startViewTransition(r)}else e()},this.updateMatch=(e,n)=>{var r;let i;const o=(r=this.state.pendingMatches)==null?void 0:r.find(u=>u.id===e),a=this.state.matches.find(u=>u.id===e),l=o?"pendingMatches":a?"matches":"cachedMatches";return this.__store.setState(u=>{var c;return{...u,[l]:(c=u[l])==null?void 0:c.map(d=>d.id===e?i=n(d):d)}}),i},this.getMatch=e=>[...this.state.cachedMatches,...this.state.pendingMatches??[],...this.state.matches].find(n=>n.id===e),this.loadMatches=async({location:e,matches:n,preload:r,onReady:i,updateMatch:o=this.updateMatch})=>{let a,l=!1;const u=async()=>{l||(l=!0,await(i==null?void 0:i()))};!this.isServer&&!this.state.matches.length&&u();const c=(d,f)=>{var m,v,p;if(He(f))throw f;if(kt(f)||ft(f)){if(o(d.id,y=>({...y,status:kt(f)?"redirected":ft(f)?"notFound":"error",isFetching:!1,error:f,beforeLoadPromise:void 0,loaderPromise:void 0})),f.routeId||(f.routeId=d.routeId),(m=d.beforeLoadPromise)==null||m.resolve(),(v=d.loaderPromise)==null||v.resolve(),(p=d.loadPromise)==null||p.resolve(),kt(f))throw l=!0,f=this.resolveRedirect({...f,_fromLocation:e}),f;if(ft(f))throw this._handleNotFound(n,f,{updateMatch:o}),f}};try{await new Promise((d,f)=>{(async()=>{var m,v,p;try{const y=(g,P,I)=>{var z,L;const{id:x,routeId:w}=n[g],A=this.looseRoutesById[w];if(P instanceof Promise)throw P;P.routerCode=I,a=a??g,c(this.getMatch(x),P);try{(L=(z=A.options).onError)==null||L.call(z,P)}catch(M){P=M,c(this.getMatch(x),P)}o(x,M=>{var O,V;return(O=M.beforeLoadPromise)==null||O.resolve(),(V=M.loadPromise)==null||V.resolve(),{...M,error:P,status:"error",isFetching:!1,updatedAt:Date.now(),abortController:new AbortController,beforeLoadPromise:void 0}})};for(const[g,{id:P,routeId:I}]of n.entries()){const z=this.getMatch(P),L=(m=n[g-1])==null?void 0:m.id,x=this.looseRoutesById[I],w=x.options.pendingMs??this.options.defaultPendingMs,A=!!(i&&!this.isServer&&!r&&(x.options.loader||x.options.beforeLoad)&&typeof w=="number"&&w!==1/0&&(x.options.pendingComponent??this.options.defaultPendingComponent));if(z.beforeLoadPromise||z.loaderPromise)A&&setTimeout(()=>{try{u()}catch{}},w),await z.beforeLoadPromise;else{try{o(P,j=>({...j,loadPromise:Wt(()=>{var J;(J=j.loadPromise)==null||J.resolve()}),beforeLoadPromise:Wt()}));const M=new AbortController;let O;A&&(O=setTimeout(()=>{try{u()}catch{}},w));const{paramsError:V,searchError:F}=this.getMatch(P);V&&y(g,V,"PARSE_PARAMS"),F&&y(g,F,"VALIDATE_SEARCH");const N=()=>L?this.getMatch(L).context:this.options.context??{};o(P,j=>({...j,isFetching:"beforeLoad",fetchCount:j.fetchCount+1,abortController:M,pendingTimeout:O,context:{...N(),...j.__routeContext,...j.__beforeLoadContext}}));const{search:U,params:at,context:B,cause:$}=this.getMatch(P),q={search:U,abortController:M,params:at,preload:!!r,context:B,location:e,navigate:j=>this.navigate({...j,_fromLocation:e}),buildLocation:this.buildLocation,cause:r?"preload":$,matches:n};let H=await((p=(v=x.options).beforeLoad)==null?void 0:p.call(v,q))??{};this.serializeLoaderData&&(H=this.serializeLoaderData("__beforeLoadContext",H,{router:this,match:this.getMatch(P)})),(kt(H)||ft(H))&&y(g,H,"BEFORE_LOAD"),o(P,j=>({...j,__beforeLoadContext:H,context:{...N(),...j.__routeContext,...H},abortController:M}))}catch(M){y(g,M,"BEFORE_LOAD")}o(P,M=>{var O;return(O=M.beforeLoadPromise)==null||O.resolve(),{...M,beforeLoadPromise:void 0,isFetching:!1}})}}const C=n.slice(0,a),_=[];C.forEach(({id:g,routeId:P},I)=>{_.push((async()=>{const{loaderPromise:z}=this.getMatch(g);let L=!1;if(z)await z;else{const x=_[I-1],w=this.looseRoutesById[P],A=()=>{const{params:q,loaderDeps:H,abortController:j,context:J,cause:mt}=this.getMatch(g);return{params:q,deps:H,preload:!!r,parentMatchPromise:x,abortController:j,context:J,location:e,navigate:lt=>this.navigate({...lt,_fromLocation:e}),cause:r?"preload":mt,route:w}},M=Date.now()-this.getMatch(g).updatedAt,O=r?w.options.preloadStaleTime??this.options.defaultPreloadStaleTime??3e4:w.options.staleTime??this.options.defaultStaleTime??0,V=w.options.shouldReload,F=typeof V=="function"?V(A()):V;o(g,q=>({...q,loaderPromise:Wt(),preload:!!r&&!this.state.matches.find(H=>H.id===g)}));const N=async()=>{var q,H,j,J,mt,lt,St,Pe;try{const Ht=async()=>{const W=this.getMatch(g);W.minPendingPromise&&await W.minPendingPromise};try{w._lazyPromise===void 0&&(w.lazyFn?w._lazyPromise=w.lazyFn().then(rt=>{const{id:Rt,...fe}=rt.options;Object.assign(w.options,fe)}):w._lazyPromise=Promise.resolve()),w._componentsPromise===void 0&&(w._componentsPromise=w._lazyPromise.then(()=>Promise.all(vn.map(async rt=>{const Rt=w.options[rt];Rt!=null&&Rt.preload&&await Rt.preload()})))),o(g,rt=>({...rt,isFetching:"loader"}));let W=await((H=(q=w.options).loader)==null?void 0:H.call(q,A()));this.serializeLoaderData&&(W=this.serializeLoaderData("loaderData",W,{router:this,match:this.getMatch(g)})),c(this.getMatch(g),W),await w._lazyPromise,await Ht();const jt=(J=(j=w.options).head)==null?void 0:J.call(j,{matches:n,match:this.getMatch(g),params:this.getMatch(g).params,loaderData:W}),Pt=jt==null?void 0:jt.meta,Qe=(lt=(mt=w.options).headers)==null?void 0:lt.call(mt,{loaderData:W});o(g,rt=>({...rt,error:void 0,status:"success",isFetching:!1,updatedAt:Date.now(),loaderData:W,meta:Pt,headers:Qe}))}catch(W){let jt=W;await Ht(),c(this.getMatch(g),W);try{(Pe=(St=w.options).onError)==null||Pe.call(St,W)}catch(Pt){jt=Pt,c(this.getMatch(g),Pt)}o(g,Pt=>({...Pt,error:jt,status:"error",isFetching:!1}))}await w._componentsPromise}catch(Ht){o(g,W=>({...W,loaderPromise:void 0})),c(this.getMatch(g),Ht)}},{status:U,invalid:at}=this.getMatch(g);L=U==="success"&&(at||(F??M>O)),r&&w.options.preload===!1||(L?(async()=>{try{await N()}catch(q){He(q)&&await this.navigate(q)}})():U!=="success"&&await N());const{loaderPromise:B,loadPromise:$}=this.getMatch(g);B==null||B.resolve(),$==null||$.resolve()}return o(g,x=>({...x,isFetching:L?x.isFetching:!1,loaderPromise:void 0,invalid:!1})),this.getMatch(g)})())}),await Promise.all(_),d()}catch(y){f(y)}})()}),await u()}catch(d){if(kt(d)||ft(d))throw ft(d)&&!r&&await u(),d}return n},this.invalidate=e=>{const n=r=>{var i;return((i=e==null?void 0:e.filter)==null?void 0:i.call(e,r))??!0?{...r,invalid:!0,...r.status==="error"?{status:"pending",error:void 0}:{}}:r};return this.__store.setState(r=>{var i;return{...r,matches:r.matches.map(n),cachedMatches:r.cachedMatches.map(n),pendingMatches:(i=r.pendingMatches)==null?void 0:i.map(n)}}),this.load()},this.resolveRedirect=e=>{const n=e;return n.href||(n.href=this.buildLocation(n).href),n},this.clearCache=e=>{const n=e==null?void 0:e.filter;n!==void 0?this.__store.setState(r=>({...r,cachedMatches:r.cachedMatches.filter(i=>!n(i))})):this.__store.setState(r=>({...r,cachedMatches:[]}))},this.clearExpiredCache=()=>{const e=n=>{const r=this.looseRoutesById[n.routeId];if(!r.options.loader)return!0;const i=(n.preload?r.options.preloadGcTime??this.options.defaultPreloadGcTime:r.options.gcTime??this.options.defaultGcTime)??5*60*1e3;return!(n.status!=="error"&&Date.now()-n.updatedAt<i)};this.clearCache({filter:e})},this.preloadRoute=async e=>{const n=this.buildLocation(e);let r=this.matchRoutes(n,{throwOnError:!0,preload:!0,dest:e});const i=Object.fromEntries([...this.state.matches,...this.state.pendingMatches??[],...this.state.cachedMatches].map(a=>[a.id,!0]));this.__store.batch(()=>{r.forEach(a=>{i[a.id]||this.__store.setState(l=>({...l,cachedMatches:[...l.cachedMatches,a]}))})});const o=new Set([...this.state.matches,...this.state.pendingMatches??[]].map(a=>a.id));try{return r=await this.loadMatches({matches:r,location:n,preload:!0,updateMatch:(a,l)=>{o.has(a)?r=r.map(u=>u.id===a?l(u):u):this.updateMatch(a,l)}}),r}catch(a){if(kt(a))return await this.preloadRoute({...a,_fromLocation:n});console.error(a);return}},this.matchRoute=(e,n)=>{const r={...e,to:e.to?this.resolvePathWithBase(e.from||"",e.to):void 0,params:e.params||{},leaveParams:!0},i=this.buildLocation(r);if(n!=null&&n.pending&&this.state.status!=="pending")return!1;const a=((n==null?void 0:n.pending)===void 0?!this.state.isLoading:n.pending)?this.latestLocation:this.state.resolvedLocation,l=Ee(this.basepath,a.pathname,{...n,to:i.pathname});return!l||e.params&&!Xt(l,e.params,{partial:!0})?!1:l&&((n==null?void 0:n.includeSearch)??!0)?Xt(a.search,i.search,{partial:!0})?l:!1:l},this.dehydrate=()=>{var e;const n=((e=this.options.errorSerializer)==null?void 0:e.serialize)??oi;return{state:{dehydratedMatches:this.state.matches.map(r=>({...Oe(r,["id","status","updatedAt"]),error:r.error?{data:n(r.error),__isServerError:!0}:void 0}))},manifest:this.manifest}},this.hydrate=()=>{var e,n,r;let i;typeof document<"u"&&(i=this.options.transformer.parse((e=window.__TSR__)==null?void 0:e.dehydrated)),st(i),this.dehydratedData=i.payload,(r=(n=this.options).hydrate)==null||r.call(n,i.payload);const o=i.router.state,a=this.matchRoutes(this.state.location).map(l=>{const u=o.dehydratedMatches.find(c=>c.id===l.id);return st(u,`Could not find a client-side match for dehydrated match with id: ${l.id}!`),{...l,...u}});this.__store.setState(l=>({...l,matches:a})),this.manifest=i.router.manifest},this.injectedHtml=[],this.injectHtml=e=>{const n=()=>(this.injectedHtml=this.injectedHtml.filter(r=>r!==n),e);this.injectedHtml.push(n)},this.injectScript=(e,n)=>{this.injectHtml(`<script class='tsr-once'>${e}; __TSR__.cleanScripts()<\/script>`)},this.streamedKeys=new Set,this.getStreamedValue=e=>{var n;if(this.isServer)return;const r=(n=window.__TSR__)==null?void 0:n.streamedValues[e];if(r)return r.parsed||(r.parsed=this.options.transformer.parse(r.value)),r.parsed},this.streamValue=(e,n)=>{var r;je(!this.streamedKeys.has(e)),this.streamedKeys.add(e),this.injectScript(`__TSR__.streamedValues['${e}'] = { value: ${(r=this.serializer)==null?void 0:r.call(this,this.options.transformer.stringify(n))}}`)},this._handleNotFound=(e,n,{updateMatch:r=this.updateMatch}={})=>{const i=Object.fromEntries(e.map(l=>[l.routeId,l]));let o=(n.global?this.looseRoutesById[ot]:this.looseRoutesById[n.routeId])||this.looseRoutesById[ot];for(;!o.options.notFoundComponent&&!this.options.defaultNotFoundComponent&&o.id!==ot;)o=o.parentRoute,st(o);const a=i[o.id];st(a,"Could not find match for route: "+o.id),r(a.id,l=>({...l,status:"notFound",error:n,isFetching:!1})),n.routerCode==="BEFORE_LOAD"&&o.parentRoute&&(n.routeId=o.parentRoute.id,this._handleNotFound(e,n,{updateMatch:r}))},this.hasNotFoundMatch=()=>this.__store.state.matches.some(e=>e.status==="notFound"||e.globalNotFound),this.update({defaultPreloadDelay:50,defaultPendingMs:1e3,defaultPendingMinMs:500,context:void 0,...s,caseSensitive:s.caseSensitive??!1,notFoundMode:s.notFoundMode??"fuzzy",stringifySearch:s.stringifySearch??Br,parseSearch:s.parseSearch??Ur,transformer:s.transformer??ei}),typeof document<"u"&&(window.__TSR__ROUTER__=this)}get state(){return this.__store.state}get looseRoutesById(){return this.routesById}matchRoutes(s,e,n){return typeof s=="string"?this.matchRoutesInternal({pathname:s,search:e},n):this.matchRoutesInternal(s,e)}matchRoutesInternal(s,e){const{foundRoute:n,matchedRoutes:r,routeParams:i}=this.getMatchedRoutes(s,e==null?void 0:e.dest);let o=!1;(n?n.path!=="/"&&i["**"]:zt(s.pathname))&&(this.options.notFoundRoute?r.push(this.options.notFoundRoute):o=!0);const a=(()=>{if(o){if(this.options.notFoundMode!=="root")for(let c=r.length-1;c>=0;c--){const d=r[c];if(d.children)return d.id}return ot}})(),l=r.map(c=>{var d;let f;const m=((d=c.options.params)==null?void 0:d.parse)??c.options.parseParams;if(m)try{const v=m(i);Object.assign(i,v)}catch(v){if(f=new ri(v.message,{cause:v}),e!=null&&e.throwOnError)throw f;return f}}),u=[];return r.forEach((c,d)=>{var f,m,v,p,y,C,_,g;const P=u[d-1],[I,z]=(()=>{const B=(P==null?void 0:P.search)??s.search;try{const $=Ve(c.options.validateSearch,B)??{};return[{...B,...$},void 0]}catch($){const q=new ls($.message,{cause:$});if(e!=null&&e.throwOnError)throw q;return[B,q]}})(),L=((m=(f=c.options).loaderDeps)==null?void 0:m.call(f,{search:I}))??"",x=L?JSON.stringify(L):"",w=xe({path:c.fullPath,params:i,decodeCharMap:this.pathParamsDecodeCharMap}),A=xe({path:c.id,params:i,leaveWildcards:!0,decodeCharMap:this.pathParamsDecodeCharMap})+x,M=this.getMatch(A),O=this.state.matches.find(B=>B.routeId===c.id),V=O?"stay":"enter";let F;if(M)F={...M,cause:V,params:O?ut(O.params,i):i,search:ut(O?O.search:M.search,I)};else{const B=c.options.loader||c.options.beforeLoad||c.lazyFn||si(c)?"pending":"success";F={id:A,index:d,routeId:c.id,params:O?ut(O.params,i):i,pathname:Ct([this.basepath,w]),updatedAt:Date.now(),search:O?ut(O.search,I):I,searchError:void 0,status:B,isFetching:!1,error:void 0,paramsError:l[d],__routeContext:{},__beforeLoadContext:{},context:{},abortController:new AbortController,fetchCount:0,cause:V,loaderDeps:O?ut(O.loaderDeps,L):L,invalid:!1,preload:!1,links:void 0,scripts:void 0,meta:void 0,staticData:c.options.staticData||{},loadPromise:Wt(),fullPath:c.fullPath}}const N=(p=(v=c.options).head)==null?void 0:p.call(v,{matches:u,match:F,params:F.params,loaderData:F.loaderData??void 0});F.links=N==null?void 0:N.links,F.scripts=N==null?void 0:N.scripts,F.meta=N==null?void 0:N.meta,F.status==="success"&&(F.headers=(C=(y=c.options).headers)==null?void 0:C.call(y,{loaderData:F.loaderData})),e!=null&&e.preload||(F.globalNotFound=a===c.id),F.searchError=z;const at=(P==null?void 0:P.id)?P.context??this.options.context??{}:this.options.context??{};if(F.context={...at,...F.__routeContext,...F.__beforeLoadContext},!M&&(e==null?void 0:e._buildLocation)!==!0){const B={deps:L,params:F.params,context:F.context,location:s,navigate:$=>this.navigate({...$,_fromLocation:s}),buildLocation:this.buildLocation,cause:F.cause,abortController:F.abortController,preload:!!F.preload,matches:u};F.__routeContext=((g=(_=c.options).context)==null?void 0:g.call(_,B))??{},F.context={...at,...F.__routeContext,...F.__beforeLoadContext}}u.push(F)}),u}}class ls extends Error{}class ri extends Error{}function ii(t){return{loadedAt:0,isLoading:!1,isTransitioning:!1,status:"idle",resolvedLocation:{...t},location:t,matches:[],pendingMatches:[],cachedMatches:[],statusCode:200}}function oi(t){return t instanceof Error?{name:t.name,message:t.message}:{data:t}}function Bs(t){return!(typeof t=="object"&&t&&"data"in t)||!("__isServerError"in t&&t.__isServerError)||!(typeof t.data=="object"&&t.data)?!1:t.__isServerError===!0}function Ns(t){if("name"in t&&"message"in t){const s=new Error(t.message);return s.name=t.name,s}return t.data}const Ae=S.createContext(void 0),ai=S.createContext(void 0);function _t(t){const s=S.useContext(t.from?ai:Ae);return nt({select:n=>{const r=n.matches.find(i=>t.from?t.from===i.routeId:i.id===s);if(st(!((t.shouldThrow??!0)&&!r),`Could not find ${t.from?`an active match from "${t.from}"`:"a nearest match!"}`),r!==void 0)return t.select?t.select(r):r},structuralSharing:t.structuralSharing})}function gn(t){return _t({from:t.from,strict:t.strict,structuralSharing:t.structuralSharing,select:s=>t.select?t.select(s.loaderData):s.loaderData})}function bn(t){const{select:s,...e}=t;return _t({...e,select:n=>s?s(n.loaderDeps):n.loaderDeps})}function Sn(t){return _t({from:t.from,strict:t.strict,structuralSharing:t.structuralSharing,select:s=>t.select?t.select(s.params):s.params})}function wn(t){return _t({from:t.from,strict:t.strict,structuralSharing:t.structuralSharing,select:s=>t.select?t.select(s.search):s.search})}function Cn(t){const{navigate:s}=Dt();return S.useCallback(e=>s({...e}),[s])}class _n{constructor(s){this.init=e=>{var n,r;this.originalIndex=e.originalIndex;const i=this.options,o=!(i!=null&&i.path)&&!(i!=null&&i.id);this.parentRoute=(r=(n=this.options).getParentRoute)==null?void 0:r.call(n),o?this._path=ot:st(this.parentRoute);let a=o?ot:i.path;a&&a!=="/"&&(a=fs(a));const l=(i==null?void 0:i.id)||a;let u=o?ot:Ct([this.parentRoute.id===ot?"":this.parentRoute.id,l]);a===ot&&(a="/"),u!==ot&&(u=Ct(["/",u]));const c=u===ot?"/":Ct([this.parentRoute.fullPath,a]);this._path=a,this._id=u,this._fullPath=c,this._to=c,this._ssr=(i==null?void 0:i.ssr)??e.defaultSsr??!0},this.updateLoader=e=>(Object.assign(this.options,e),this),this.update=e=>(Object.assign(this.options,e),this),this.lazy=e=>(this.lazyFn=e,this),this.useMatch=e=>_t({select:e==null?void 0:e.select,from:this.id,structuralSharing:e==null?void 0:e.structuralSharing}),this.useRouteContext=e=>_t({...e,from:this.id,select:n=>e!=null&&e.select?e.select(n.context):n.context}),this.useSearch=e=>wn({select:e==null?void 0:e.select,structuralSharing:e==null?void 0:e.structuralSharing,from:this.id}),this.useParams=e=>Sn({select:e==null?void 0:e.select,structuralSharing:e==null?void 0:e.structuralSharing,from:this.id}),this.useLoaderDeps=e=>bn({...e,from:this.id}),this.useLoaderData=e=>gn({...e,from:this.id}),this.useNavigate=()=>Cn({from:this.id}),this.options=s||{},this.isRoot=!(s!=null&&s.getParentRoute),st(!(s!=null&&s.id&&(s!=null&&s.path))),this.$$typeof=Symbol.for("react.memo")}get to(){return this._to}get id(){return this._id}get path(){return this._path}get fullPath(){return this._fullPath}get ssr(){return this._ssr}addChildren(s){return this._addFileChildren(s)}_addFileChildren(s){return Array.isArray(s)&&(this.children=s),typeof s=="object"&&s!==null&&(this.children=Object.values(s)),this}}function li(t){return new _n(t)}class ui extends _n{constructor(s){super(s)}addChildren(s){return super.addChildren(s),this}_addFileChildren(s){return super._addFileChildren(s),this}_addFileTypes(){return this}}function Ai(t){return new ui(t)}function Qi(t){return new ci(t,{silent:!0}).createRoute}class ci{constructor(s,e){this.path=s,this.createRoute=n=>{je(this.silent);const r=li(n);return r.isRoot=!1,r},this.silent=e==null?void 0:e.silent}}class hi{constructor(s){this.useMatch=e=>_t({select:e==null?void 0:e.select,from:this.options.id,structuralSharing:e==null?void 0:e.structuralSharing}),this.useRouteContext=e=>_t({from:this.options.id,select:n=>e!=null&&e.select?e.select(n.context):n.context}),this.useSearch=e=>wn({select:e==null?void 0:e.select,structuralSharing:e==null?void 0:e.structuralSharing,from:this.options.id}),this.useParams=e=>Sn({select:e==null?void 0:e.select,structuralSharing:e==null?void 0:e.structuralSharing,from:this.options.id}),this.useLoaderDeps=e=>bn({...e,from:this.options.id}),this.useLoaderData=e=>gn({...e,from:this.options.id}),this.useNavigate=()=>Cn({from:this.options.id}),this.options=s,this.$$typeof=Symbol.for("react.memo")}}function Ui(t){return s=>new hi({id:t,...s})}function Ie(t){return R.jsx(R.Fragment,{children:t.children})}function Pn(t,s,e){return s.options.notFoundComponent?R.jsx(s.options.notFoundComponent,{data:e}):t.options.defaultNotFoundComponent?R.jsx(t.options.defaultNotFoundComponent,{data:e}):R.jsx(ti,{})}const Rn=S.memo(function({matchId:s}){var e,n;const r=Dt(),i=nt({select:y=>{var C;return(C=y.matches.find(_=>_.id===s))==null?void 0:C.routeId}});st(i);const o=r.routesById[i],a=o.options.pendingComponent??r.options.defaultPendingComponent,l=a?R.jsx(a,{}):null,u=o.options.errorComponent??r.options.defaultErrorComponent,c=o.options.onCatch??r.options.defaultOnCatch,d=o.isRoot?o.options.notFoundComponent??((e=r.options.notFoundRoute)==null?void 0:e.options.component):o.options.notFoundComponent,f=(!o.isRoot||o.options.wrapInSuspense)&&(o.options.wrapInSuspense??a??((n=o.options.errorComponent)==null?void 0:n.preload))?S.Suspense:Ie,m=u?ps:Ie,v=d?Zr:Ie,p=nt({select:y=>y.loadedAt});return R.jsx(Ae.Provider,{value:s,children:R.jsx(f,{fallback:l,children:R.jsx(m,{getResetKey:()=>p,errorComponent:u||ze,onCatch:(y,C)=>{if(ft(y))throw y;c==null||c(y,C)},children:R.jsx(v,{fallback:y=>{if(!d||y.routeId&&y.routeId!==i||!y.routeId&&!o.isRoot)throw y;return S.createElement(d,y)},children:R.jsx(di,{matchId:s})})})})})}),di=S.memo(function({matchId:s}){var e,n,r,i,o;const a=Dt(),{match:l,matchIndex:u,routeId:c}=nt({select:v=>{const p=v.matches.findIndex(_=>_.id===s),y=v.matches[p];return{routeId:y.routeId,matchIndex:p,match:Oe(y,["id","status","error"])}},structuralSharing:!0}),d=a.routesById[c],f=S.useMemo(()=>{const v=d.options.component??a.options.defaultComponent;return v?R.jsx(v,{}):R.jsx(Mn,{})},[d.options.component,a.options.defaultComponent]),m=(d.options.errorComponent??a.options.defaultErrorComponent)||ze;if(l.status==="notFound"){let v;return Bs(l.error)?v=(((e=a.options.errorSerializer)==null?void 0:e.deserialize)??Ns)(l.error.data):v=l.error,st(ft(v)),Pn(a,d,v)}if(l.status==="redirected")throw st(kt(l.error)),(n=a.getMatch(l.id))==null?void 0:n.loadPromise;if(l.status==="error"){if(a.isServer)return R.jsx(m,{error:l.error,info:{componentStack:""}});throw Bs(l.error)?(((r=a.options.errorSerializer)==null?void 0:r.deserialize)??Ns)(l.error.data):l.error}if(l.status==="pending"){const v=d.options.pendingMinMs??a.options.defaultPendingMinMs;if(v&&!((i=a.getMatch(l.id))!=null&&i.minPendingPromise)&&!a.isServer){const p=Wt();Promise.resolve().then(()=>{a.updateMatch(l.id,y=>({...y,minPendingPromise:p}))}),setTimeout(()=>{p.resolve(),a.updateMatch(l.id,y=>({...y,minPendingPromise:void 0}))},v)}throw(o=a.getMatch(l.id))==null?void 0:o.loadPromise}return R.jsxs(R.Fragment,{children:[f,a.AfterEachMatch?R.jsx(a.AfterEachMatch,{match:l,matchIndex:u}):null]})}),Mn=S.memo(function(){const s=Dt(),e=S.useContext(Ae),n=nt({select:u=>{var c;return(c=u.matches.find(d=>d.id===e))==null?void 0:c.routeId}}),r=s.routesById[n],i=nt({select:u=>{const d=u.matches.find(f=>f.id===e);return st(d),d.globalNotFound}}),o=nt({select:u=>{var c;const d=u.matches,f=d.findIndex(m=>m.id===e);return(c=d[f+1])==null?void 0:c.id}});if(i)return Pn(s,r,void 0);if(!o)return null;const a=R.jsx(Rn,{matchId:o}),l=s.options.defaultPendingComponent?R.jsx(s.options.defaultPendingComponent,{}):null;return e===ot?R.jsx(S.Suspense,{fallback:l,children:a}):a});function fi(t){return typeof(t==null?void 0:t.message)=="string"&&/Failed to fetch dynamically imported module/.test(t.message)}function pi({children:t,fallback:s=null}){return yi()?R.jsx(R.Fragment,{children:t}):R.jsx(R.Fragment,{children:s})}function mi(){return()=>{}}function yi(){return S.useSyncExternalStore(mi,()=>!0,()=>!1)}function Bi(t,s,e){let n,r,i;const o=()=>typeof document>"u"&&(e==null?void 0:e())===!1?(r=()=>null,Promise.resolve()):(n||(n=t().then(l=>{n=void 0,r=l[s]}).catch(l=>{i=l})),n),a=function(u){if(i){if(fi(i)&&i instanceof Error&&typeof window<"u"&&typeof sessionStorage<"u"){const c=`tanstack_router_reload:${i.message}`;if(!sessionStorage.getItem(c))return sessionStorage.setItem(c,"1"),window.location.reload(),{default:()=>null}}throw i}if(!r)throw o();return(e==null?void 0:e())===!1?R.jsx(pi,{fallback:R.jsx(Mn,{}),children:S.createElement(r,u)}):S.createElement(r,u)};return a.preload=o,a}const vi="Error preloading route! ☝️";function gi(t,s){const e=Dt(),[n,r]=S.useState(!1),i=S.useRef(!1),o=Hr(s),{activeProps:a=()=>({className:"active"}),inactiveProps:l=()=>({}),activeOptions:u,to:c,preload:d,preloadDelay:f,replace:m,startTransition:v,resetScroll:p,viewTransition:y,children:C,target:_,disabled:g,style:P,className:I,onClick:z,onFocus:L,onMouseEnter:x,onMouseLeave:w,onTouchStart:A,ignoreBlocker:M,...O}=t,{params:V,search:F,hash:N,state:U,mask:at,...B}=O,$=S.useMemo(()=>{try{return new URL(`${c}`),"external"}catch{}return"internal"},[c]),q=nt({select:Q=>Q.location.search,structuralSharing:!0});t={from:_t({strict:!1,select:Q=>Q.pathname}),...t};const j=S.useMemo(()=>e.buildLocation(t),[e,t,q]),J=S.useMemo(()=>d??e.options.defaultPreload,[e.options.defaultPreload,d]),mt=f??e.options.defaultPreloadDelay??0,lt=nt({select:Q=>{if(u!=null&&u.exact){if(!Wr(Q.location.pathname,j.pathname,e.basepath))return!1}else{const G=Te(Q.location.pathname,e.basepath).split("/");if(!Te(j.pathname,e.basepath).split("/").every((xn,En)=>xn===G[En]))return!1}return((u==null?void 0:u.includeSearch)??!0)&&!Xt(Q.location.search,j.search,{partial:!(u!=null&&u.exact),ignoreUndefined:!(u!=null&&u.explicitUndefined)})?!1:u!=null&&u.includeHash?Q.location.hash===j.hash:!0}}),St=S.useCallback(()=>{e.preloadRoute(t).catch(Q=>{console.warn(Q),console.warn(vi)})},[t,e]),Pe=S.useCallback(Q=>{Q!=null&&Q.isIntersecting&&St()},[St]);if($r(o,Pe,{rootMargin:"100px"},{disabled:!!g||J!=="viewport"}),me(()=>{i.current||!g&&J==="render"&&(St(),i.current=!0)},[g,St,J]),$==="external")return{...B,ref:o,type:$,href:c,...C&&{children:C},..._&&{target:_},...g&&{disabled:g},...P&&{style:P},...I&&{className:I},...z&&{onClick:z},...L&&{onFocus:L},...x&&{onMouseEnter:x},...w&&{onMouseLeave:w},...A&&{onTouchStart:A}};const Ht=Q=>{if(!g&&!bi(Q)&&!Q.defaultPrevented&&(!_||_==="_self")&&Q.button===0){Q.preventDefault(),Ys.flushSync(()=>{r(!0)});const G=e.subscribe("onResolved",()=>{G(),r(!1)});e.buildAndCommitLocation({...t,replace:m,resetScroll:p,startTransition:v,viewTransition:y,ignoreBlocker:M})}},W=Q=>{g||J&&St()},jt=W,Pt=Q=>{if(g)return;const G=Q.target||{};if(J){if(G.preloadTimeout)return;G.preloadTimeout=setTimeout(()=>{G.preloadTimeout=null,St()},mt)}},Qe=Q=>{if(g)return;const G=Q.target||{};G.preloadTimeout&&(clearTimeout(G.preloadTimeout),G.preloadTimeout=null)},rt=Q=>G=>{var Ue;(Ue=G.persist)==null||Ue.call(G),Q.filter(Boolean).forEach(vs=>{G.defaultPrevented||vs(G)})},Rt=lt?Gt(a,{})??{}:{},fe=lt?{}:Gt(l,{}),ms=[I,Rt.className,fe.className].filter(Boolean).join(" "),ys={...P,...Rt.style,...fe.style};return{...B,...Rt,...fe,href:g?void 0:j.maskedLocation?e.history.createHref(j.maskedLocation.href):e.history.createHref(j.href),ref:o,onClick:rt([z,Ht]),onFocus:rt([L,W]),onMouseEnter:rt([x,Pt]),onMouseLeave:rt([w,Qe]),onTouchStart:rt([A,jt]),disabled:!!g,target:_,...Object.keys(ys).length&&{style:ys},...ms&&{className:ms},...g&&{role:"link","aria-disabled":!0},...lt&&{"data-status":"active","aria-current":"page"},...n&&{"data-transitioning":"transitioning"}}}const Ni=S.forwardRef((t,s)=>{const{_asChild:e,...n}=t,{type:r,ref:i,...o}=gi(n,s),a=typeof n.children=="function"?n.children({isActive:o["data-status"]==="active"}):n.children;return typeof e>"u"&&delete o.disabled,S.createElement(e||"a",{...o,ref:i},a)});function bi(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Si(){const t=Dt(),s=S.useRef({router:t,mounted:!1}),e=nt({select:({isLoading:d})=>d}),[n,r]=S.useTransition(),i=nt({select:d=>d.matches.some(f=>f.status==="pending"),structuralSharing:!0}),o=$e(e),a=e||n||i,l=$e(a),u=e||i,c=$e(u);return t.isServer||(t.startReactTransition=r),S.useEffect(()=>{const d=t.history.subscribe(t.load),f=t.buildLocation({to:t.latestLocation.pathname,search:!0,params:!0,hash:!0,state:!0,_includeValidateSearch:!0});return zt(t.latestLocation.href)!==zt(f.href)&&t.commitLocation({...f,replace:!0}),()=>{d()}},[t,t.history]),me(()=>{var d;if(typeof window<"u"&&((d=window.__TSR__)!=null&&d.dehydrated)||s.current.router===t&&s.current.mounted)return;s.current={router:t,mounted:!0},(async()=>{try{await t.load()}catch(m){console.error(m)}})()},[t]),me(()=>{if(o&&!e){const d=t.state.location,f=t.state.resolvedLocation,m=f.pathname!==d.pathname,v=f.href!==d.href;t.emit({type:"onLoad",fromLocation:f,toLocation:d,pathChanged:m,hrefChanged:v})}},[o,t,e]),me(()=>{if(c&&!u){const d=t.state.location,f=t.state.resolvedLocation,m=f.pathname!==d.pathname,v=f.href!==d.href;t.emit({type:"onBeforeRouteMount",fromLocation:f,toLocation:d,pathChanged:m,hrefChanged:v})}},[u,c,t]),me(()=>{if(l&&!a){const d=t.state.location,f=t.state.resolvedLocation,m=f.pathname!==d.pathname,v=f.href!==d.href;if(t.emit({type:"onResolved",fromLocation:f,toLocation:d,pathChanged:m,hrefChanged:v}),t.__store.setState(p=>({...p,status:"idle",resolvedLocation:p.location})),typeof document<"u"&&document.querySelector&&t.state.location.hash!==""){const p=document.getElementById(t.state.location.hash);p&&p.scrollIntoView()}}},[a,l,t]),null}function wi(){const t=Dt(),s=t.options.defaultPendingComponent?R.jsx(t.options.defaultPendingComponent,{}):null,e=t.isServer||typeof document<"u"&&window.__TSR__?Ie:S.Suspense,n=R.jsxs(e,{fallback:s,children:[R.jsx(Si,{}),R.jsx(Ci,{})]});return t.options.InnerWrap?R.jsx(t.options.InnerWrap,{children:n}):n}function Ci(){const t=nt({select:e=>{var n;return(n=e.matches[0])==null?void 0:n.id}}),s=nt({select:e=>e.loadedAt});return R.jsx(Ae.Provider,{value:t,children:R.jsx(ps,{getResetKey:()=>s,errorComponent:ze,onCatch:e=>{je(!1,e.message||e.toString())},children:t?R.jsx(Rn,{matchId:t}):null})})}function _i({router:t,children:s,...e}){t.update({...t.options,...e,context:{...t.options.context,...e.context}});const n=yn(),r=R.jsx(n.Provider,{value:t,children:s});return t.options.Wrap?R.jsx(t.options.Wrap,{children:r}):r}function Ki({router:t,...s}){return R.jsx(_i,{router:t,...s,children:R.jsx(wi,{})})}export{ze as E,Ni as L,Mn as O,ji as P,Li as Q,Ki as R,Dt as a,_t as b,Ii as c,Cn as d,nt as e,wn as f,Fi as g,Ai as h,Qi as i,ki as j,zi as k,Bi as l,Di as m,Ui as n,ot as r,Ti as u};
