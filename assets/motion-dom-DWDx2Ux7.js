const i={x:!1,y:!1};function L(){return i.x||i.y}function T(e,n,t){var s;if(e instanceof Element)return[e];if(typeof e=="string"){let r=document;const u=(s=void 0)!==null&&s!==void 0?s:r.querySelectorAll(e);return u?Array.from(u):[]}return Array.from(e)}function P(e,n){const t=T(e),s=new AbortController,r={passive:!0,...n,signal:s.signal};return[t,r,()=>s.abort()]}function b(e){return n=>{n.pointerType==="touch"||L()||e(n)}}function K(e,n,t={}){const[s,r,u]=P(e,t),v=b(o=>{const{target:a}=o,c=n(o);if(!c||!a)return;const d=b(E=>{c(E),a.removeEventListener("pointerleave",d)});a.addEventListener("pointerleave",d,r)});return s.forEach(o=>{o.addEventListener("pointerenter",v,r)}),u}const A=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,f=new WeakSet;function g(e){return n=>{n.key==="Enter"&&e(n)}}function p(e,n){e.dispatchEvent(new PointerEvent("pointer"+n,{isPrimary:!0,bubbles:!0}))}const k=(e,n)=>{const t=e.currentTarget;if(!t)return;const s=g(()=>{if(f.has(t))return;p(t,"down");const r=g(()=>{p(t,"up")}),u=()=>p(t,"cancel");t.addEventListener("keyup",r,n),t.addEventListener("blur",u,n)});t.addEventListener("keydown",s,n),t.addEventListener("blur",()=>t.removeEventListener("keydown",s),n)},C=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function x(e){return C.has(e.tagName)||e.tabIndex!==-1}const m=(e,n)=>n?e===n?!0:m(e,n.parentElement):!1;function w(e){return A(e)&&!L()}function N(e,n,t={}){const[s,r,u]=P(e,t),v=o=>{const a=o.currentTarget;if(!w(o)||f.has(a))return;f.add(a);const c=n(o),d=(l,h)=>{window.removeEventListener("pointerup",E),window.removeEventListener("pointercancel",y),!(!w(l)||!f.has(a))&&(f.delete(a),c&&c(l,{success:h}))},E=l=>{d(l,t.useGlobalTarget||m(a,l.target))},y=l=>{d(l,!1)};window.addEventListener("pointerup",E,r),window.addEventListener("pointercancel",y,r)};return s.forEach(o=>{x(o)||(o.tabIndex=0),(t.useGlobalTarget?window:o).addEventListener("pointerdown",v,r),o.addEventListener("focus",c=>k(c,r),r)}),u}function D(e){return e==="x"||e==="y"?i[e]?null:(i[e]=!0,()=>{i[e]=!1}):i.x||i.y?null:(i.x=i.y=!0,()=>{i.x=i.y=!1})}export{K as h,A as i,N as p,D as s};
