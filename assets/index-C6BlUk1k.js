import{r as i,j as e}from"./react-Bpj1It56.js";import{u as A,S as W}from"./main-hZYZiN6R.js";import{u as q,e as G,l as J}from"./utils-BUiPkcdd.js";import{L as D}from"./@tanstack-BQ3PdJvV.js";import{p as K}from"./dompurify-CocPUCx9.js";import{d as Q,v as U,C as X}from"./react-big-calendar-BzSGFtnG.js";import{H as Y}from"./react-html-parser-Bzk_WztA.js";import"./htmlparser2-QVUjCeQB.js";import{n as Z,o as ee,b as S,p as te}from"./react-icons-C88MKWVs.js";import{S as se,A as ae,P as le,a as re}from"./swiper-DTw7uyIM.js";import{p as f,f as ie,s as oe,g as ne}from"./date-fns-HN8wQw8H.js";import{i as ce,y as k,e as h,s as T,m as me,a as de,b as pe,c as xe,d as he}from"./@heroui-CIH5ufY4.js";import{I as u}from"./antd-Cx7N9Psy.js";import"./@babel-houl6Xsg.js";import"./core-js-pure-evcE_T-D.js";import"./react-dom-By78mrQC.js";import"./scheduler-8y5VlOXR.js";import"./idb-Bn1DMRyg.js";import"./react-helmet-async-BL1df5qm.js";import"./react-fast-compare-CoPa2Gs5.js";import"./invariant-BaQWlx5Y.js";import"./shallowequal-QcPrNyiR.js";import"./react-transition-group-CwkOSmso.js";import"./dom-helpers-k64VTSqm.js";import"./react-toastify-BeNbc-FJ.js";import"./clsx-B-dksMZM.js";import"./smoothscroll-polyfill-DfrSojlF.js";import"./@react-aria-xE5HBTkH.js";import"./@react-stately-BNzC-r0j.js";import"./@internationalized-C6LEMtSM.js";import"./@swc-h1AXYk7E.js";import"./axios-DXsv3KKR.js";import"./lodash.debounce-DOTX7tph.js";import"./react-highlight-words-yh67jzXc.js";import"./@ant-design-AtsPa5Ww.js";import"./rc-util-BDnH4PQc.js";import"./classnames-C0_Vbuxc.js";import"./@ctrl-DOFZgDuz.js";import"./react-scroll-to-bottom-CTjbJ2mK.js";import"./core-js-Dho04YfF.js";import"./@emotion-CBpc3bmA.js";import"./stylis-YPZU7XtI.js";import"./math-random-BDtfBM1x.js";import"./tiny-invariant-CopsF_GD.js";import"./tiny-warning-Dirz_SfZ.js";import"./use-sync-external-store-Ct5KFJC2.js";import"./framer-motion-BfgC9wdC.js";import"./motion-utils-C_SlKRoS.js";import"./motion-dom-DWDx2Ux7.js";import"./scroll-into-view-if-needed-BHvttMQE.js";import"./compute-scroll-into-view-DWa9QgjM.js";import"./tailwind-variants-wBLq28id.js";import"./tailwind-merge-CYizakiM.js";import"./rc-motion-BrDRrNAo.js";import"./@rc-component-DfZBjsxQ.js";import"./dayjs-DYhqyFLG.js";import"./rc-field-form-C5nkFfg4.js";import"./rc-image-CJVIC9RT.js";import"./rc-dialog-Oy9-Ncdj.js";import"./rc-pagination-BRLbcoVp.js";import"./rc-picker-oSZthl20.js";import"./entities-05SZEo_X.js";import"./inherits-BlmhoU4v.js";import"./events-CXH2uRM3.js";import"./domutils-nv7eZwOX.js";import"./dom-serializer-C1mRqh9f.js";import"./domelementtype-C_FFwB5S.js";import"./string_decoder-DSI1wpto.js";import"./safe-buffer-CMTcrbJ_.js";import"./buffer-DT9VzwNJ.js";import"./base64-js-DRz5BQNA.js";import"./ieee754-vIlwft-x.js";import"./uncontrollable-Dt8teSny.js";import"./react-lifecycles-compat-AfN2QaV3.js";import"./prop-types-D1h4IAre.js";import"./date-arithmetic-DrY26MJF.js";import"./lodash-Cj-1ifDK.js";import"./react-overlays-0MuLoRkH.js";import"./@restart-JGbTMMQN.js";import"./@popperjs-DMGSESOy.js";import"./warning-Dwrh-cZ9.js";import"./memoize-one-BdPwpGay.js";const ue={lao:J},fe=Q({format:ie,parse:f,startOfWeek:oe,getDay:ne,locales:ue}),Gt=function(){const{scrollContainerRef:_}=A(),{data:g,isLoading:l,searchTerm:o,setSearchTerm:c}=q(),[m,j]=i.useState(null),[d,w]=i.useState(null),[b,p]=i.useState(!1),[M,P]=i.useState(new Date),[z,R]=i.useState(U.MONTH),[s,N]=i.useState(null),[B,y]=i.useState(!1),C=t=>{N(t),y(!0)},x=()=>{N(null),y(!1)},n=g.filter(t=>{const a=new Date(t.startDateTime||""),r=new Date(t.endDateTime||"");return(!m||a>=new Date(m.toString()))&&(!d||r<=new Date(d.toString()))}),F=()=>{p(!0)},H=()=>{c(""),p(!1)},I=()=>{o||p(!1)},L=()=>{const t=["#f0e0d1","#c7c3bc","#e1cfbd","#e4e1d7","#cdcaca","#e2e2d0"];return t[Math.floor(Math.random()*t.length)]},O=g.map((t,a)=>({id:a+1,title:t.title,start:f(t.startDateTime||"","dd/MM/yyyy",new Date),end:f(t.endDateTime||"","dd/MM/yyyy",new Date),color:L(),details:t})),V=({title:t,color:a,event:r})=>e.jsx("div",{className:"flex overflow-x-auto",style:{backgroundColor:a},onClick:()=>C(r),children:e.jsx("div",{className:"flex items-center justify-center",style:{backgroundColor:a},children:e.jsxs("div",{className:"flex justify-between items-center gap-2 p-1 text-black",children:[e.jsx(te,{className:"w-5 h-5 cursor-pointer text-center",onClick:()=>C(r)}),t]})})}),$=(t,a)=>{const E=K.sanitize(t||"No description available.").replace(/\n/g,"<br/>");return e.jsx("div",{style:{fontSize:"20px"},className:"cursor-text",children:Y(E)})},v=async t=>{const a=window.location.href;if(navigator.share&&t)try{await navigator.share({url:`${a}/${t.title}`,text:(t==null?void 0:t.title)||"Click to open"}),console.log("Shared successfully")}catch(r){console.error("Error sharing:",r)}};return e.jsx(e.Fragment,{children:e.jsxs("section",{ref:_,className:"flex flex-col items-center justify-center mb-1 mt-2",children:[b?e.jsxs("div",{className:"flex flex-col md:flex-row gap-1 mb-3",children:[e.jsx(ce,{"aria-label":"Search",labelPlacement:"outside",type:"search",placeholder:"àº„àº»à»‰àº™àº«àº²...",startContent:e.jsx(W,{className:"text-base text-default-400 pointer-events-none flex-shrink-0"}),value:o,onChange:t=>c(t.target.value),onBlur:I,className:"w-full md:w-1/3"}),e.jsxs("div",{className:"flex gap-1 items-center w-full md:w-2/3",children:[e.jsx(k,{label:"Start Date",value:m,onChange:j,className:"w-1/2"}),e.jsx(k,{label:"End Date",value:d,onChange:w,className:"w-1/2"})]})," ",e.jsx(h,{onClick:()=>{c(""),j(null),w(null)},color:"primary",children:"Reset"})]}):e.jsx("button",{onClick:F,className:"absolute top-0 right-0 mt-16 mr-2 z-10",children:e.jsx(Z,{className:"w-6 h-6"})}),!l&&o!==""&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-2",children:n.map((t,a)=>e.jsxs(D,{to:`/calendar/${t.title}`,style:{backgroundColor:"default-100",backdropFilter:"blur(10px)",borderRadius:"12px",WebkitBackdropFilter:"blur(10px)"},className:"p-4 border border-gray-200 rounded-lg shadow-sm text-center",children:[e.jsx("h2",{className:"font-semibold text-lg",style:{marginBottom:"0.5rem"},children:t.title}),e.jsxs("p",{className:"text-sm ",children:["ðŸ“… ",t.startDateTime," - ",t.endDateTime]})]},a))}),b&&e.jsx("button",{className:"absolute top-0 right-0 mt-16 mr-2 flex items-center justify-center gap-1",onClick:H,children:e.jsx(ee,{className:"w-6 h-6"})}),l&&e.jsx("div",{className:"flex justify-center my-8",children:e.jsx(T,{})}),!l&&e.jsx("div",{className:"relative w-full p-0 z-1 mb-2",children:e.jsx(se,{modules:[ae,le],spaceBetween:0,slidesPerView:1,pagination:{clickable:!0},autoplay:{delay:3e3,disableOnInteraction:!1},breakpoints:{640:{slidesPerView:1},768:{slidesPerView:1},1024:{slidesPerView:1}},className:"w-full",children:n.reverse().map((t,a)=>e.jsx(re,{children:e.jsx("div",{className:"w-full max-h-[50vh] h-[200px] lg:h-[50vh] rounded-lg shadow-sm overflow-hidden",children:e.jsx("div",{className:"w-full h-full relative",children:e.jsx(u,{src:t.poster,alt:(t==null?void 0:t.title)||"",width:"100%",height:"100%",style:{objectFit:"contain",maxHeight:"100%"},className:"rounded-t-lg"})})})},a))})}),!l&&e.jsx("div",{className:"w-full h-[600px] mt-0 bg-white text-black p-4 rounded-lg shadow-lg mb-1",children:e.jsx(X,{localizer:fe,culture:"lao",defaultDate:new Date,events:O,startAccessor:"start",endAccessor:"end",style:{height:"100%",borderRadius:"12px"},views:["month","week","day","agenda"],view:z,onView:t=>R(t),date:M,onNavigate:t=>P(t),components:{event:({event:t})=>e.jsx(V,{title:t.title,color:t.color,event:t.details})},popup:!0})}),!l&&o===""&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-20",children:n.map((t,a)=>e.jsxs("div",{className:"flex flex-col h-full p-4 shadow-md rounded-lg bg-gray-100",children:[e.jsx("div",{className:"w-full h-[150px] md:h-[200px] lg:h-[150px] overflow-hidden",children:e.jsx(u,{src:t.poster,alt:`Poster for ${t.title}`,className:"w-full h-full object-cover rounded-t-lg"})}),e.jsx(D,{to:`/calendar/${t.title}`,className:"flex-shrink-0",children:e.jsx("div",{className:"flex flex-col justify-between flex-grow p-4",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold truncate text-black",title:t.title,children:t.title}),e.jsxs("p",{className:"text-sm text-black mt-2",children:["Start: ",t.startDateTime||""," â€” End:"," ",t.endDateTime||""]})]})})}),e.jsx("div",{className:"flex justify-end",style:{marginTop:"-40px"},children:e.jsx(S,{className:"w-6 h-6 text-gray-500 cursor-pointer hover:text-primary-500",onClick:()=>v(t)})})]},a))}),!l&&n.length===0&&e.jsx("p",{className:"text-center text-gray-500 mt-6",children:"No events found."}),e.jsx("div",{onClick:x,children:e.jsx(me,{isOpen:B,hideCloseButton:!0,placement:"center",className:"max-w-full h-full overflow-auto px-2 sm:px-2 md:px-2 lg:px-2 xl:px-2",children:e.jsxs(de,{onClick:t=>t.stopPropagation(),className:"relative w-full max-w-md sm:max-w-lg md:max-w-2xl lg:max-w-3xl xl:max-w-3xl mx-auto",children:[e.jsx("button",{onClick:x,style:{position:"absolute",top:"0.8rem",right:"1.5rem"},className:"text-gray-700 rounded-full focus:outline-none focus:ring-2 focus:ring-gray-400 z-20",children:"âœ–ï¸"}),e.jsx(pe,{className:"text-lg md:text-xl lg:text-2xl font-bold",children:"Event Details"}),e.jsx(xe,{children:s&&e.jsxs(e.Fragment,{children:[l&&e.jsx("div",{className:"flex justify-center items-center",children:e.jsx(T,{})}),e.jsx("div",{className:"w-full max-h-[50vh] h-[250px] lg:h-[50vh] overflow-hidden",children:e.jsx("div",{className:"w-full h-full relative",children:e.jsx(u,{src:s==null?void 0:s.poster,alt:(s==null?void 0:s.title)||"",loading:l?"lazy":"eager",width:"100%",height:"100%",style:{display:l?"none":"block",objectFit:"contain",maxHeight:"100%"}})})}),e.jsxs("div",{className:"flex flex-col items-center justify-center gap-2",children:[e.jsx("p",{children:e.jsx("strong",{className:"text-lg md:text-xl lg:text-2xl font-bold",children:s.title})}),e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsxs("p",{children:[e.jsx("strong",{className:"font-semibold",children:"Start Date:Â "}),s.startDateTime]}),e.jsx("span",{children:"|"}),e.jsxs("p",{children:[e.jsx("strong",{className:"font-semibold",children:"End Date:Â "}),s.endDateTime]})]}),e.jsx("div",{className:"flex flex-wrap justify-center",children:$(s.details||"No description available.")}),(s==null?void 0:s.details)&&e.jsx("div",{className:"flex flex-wrap justify-center",children:G(s.details)})]})]})}),e.jsxs(he,{children:[e.jsx(h,{onClick:x,color:"primary",children:"Close"}),e.jsx(h,{onClick:()=>v(s),color:"primary",children:e.jsx(S,{className:"w-5 h-5 mr-2"})})]})]})})})]})})};export{Gt as component};
